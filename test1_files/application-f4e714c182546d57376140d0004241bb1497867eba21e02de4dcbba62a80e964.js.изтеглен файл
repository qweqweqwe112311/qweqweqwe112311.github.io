(function(){var e=this;(function(){(function(){this.Rails={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:{selector:"button[data-remote]:not([form]), button[data-confirm]:not([form])",exclude:"form button"},inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",formDisableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",formEnableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]"}}).call(this)}).call(e);var t=e.Rails;(function(){(function(){var e;e=null,t.loadCSPNonce=function(){var t;return e=null!=(t=document.querySelector("meta[name=csp-nonce]"))?t.content:void 0},t.cspNonce=function(){return null!=e?e:t.loadCSPNonce()}}).call(this),function(){var e,n;n=Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector,t.matches=function(e,t){return null!=t.exclude?n.call(e,t.selector)&&!n.call(e,t.exclude):n.call(e,t)},e="_ujsData",t.getData=function(t,n){var r;return null!=(r=t[e])?r[n]:void 0},t.setData=function(t,n,r){return null==t[e]&&(t[e]={}),t[e][n]=r},t.$=function(e){return Array.prototype.slice.call(document.querySelectorAll(e))}}.call(this),function(){var e,n,r;e=t.$,r=t.csrfToken=function(){var e;return(e=document.querySelector("meta[name=csrf-token]"))&&e.content},n=t.csrfParam=function(){var e;return(e=document.querySelector("meta[name=csrf-param]"))&&e.content},t.CSRFProtection=function(e){var t;if(null!=(t=r()))return e.setRequestHeader("X-CSRF-Token",t)},t.refreshCSRFTokens=function(){var t,o;if(o=r(),t=n(),null!=o&&null!=t)return e('form input[name="'+t+'"]').forEach(function(e){return e.value=o})}}.call(this),function(){var e,n,r,o;r=t.matches,"function"!=typeof(e=window.CustomEvent)&&((e=function(e,t){var n;return(n=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}).prototype=window.Event.prototype,o=e.prototype.preventDefault,e.prototype.preventDefault=function(){var e;return e=o.call(this),this.cancelable&&!this.defaultPrevented&&Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}}),e}),n=t.fire=function(t,n,r){var o;return o=new e(n,{bubbles:!0,cancelable:!0,detail:r}),t.dispatchEvent(o),!o.defaultPrevented},t.stopEverything=function(e){return n(e.target,"ujs:everythingStopped"),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()},t.delegate=function(e,t,n,o){return e.addEventListener(n,function(e){var n;for(n=e.target;n instanceof Element&&!r(n,t);)n=n.parentNode;if(n instanceof Element&&!1===o.call(n,e))return e.preventDefault(),e.stopPropagation()})}}.call(this),function(){var e,n,r,o,i,s,a;o=t.cspNonce,n=t.CSRFProtection,i=t.fire,e={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript",script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},t.ajax=function(e){var t;return e=s(e),t=r(e,function(){var n,r;return r=a(null!=(n=t.response)?n:t.responseText,t.getResponseHeader("Content-Type")),2===Math.floor(t.status/100)?"function"==typeof e.success&&e.success(r,t.statusText,t):"function"==typeof e.error&&e.error(r,t.statusText,t),"function"==typeof e.complete?e.complete(t,t.statusText):void 0}),!(null!=e.beforeSend&&!e.beforeSend(t,e))&&(t.readyState===XMLHttpRequest.OPENED?t.send(e.data):void 0)},s=function(t){return t.url=t.url||location.href,t.type=t.type.toUpperCase(),"GET"===t.type&&t.data&&(t.url.indexOf("?")<0?t.url+="?"+t.data:t.url+="&"+t.data),null==e[t.dataType]&&(t.dataType="*"),t.accept=e[t.dataType],"*"!==t.dataType&&(t.accept+=", */*; q=0.01"),t},r=function(e,t){var r;return(r=new XMLHttpRequest).open(e.type,e.url,!0),r.setRequestHeader("Accept",e.accept),"string"==typeof e.data&&r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e.crossDomain||(r.setRequestHeader("X-Requested-With","XMLHttpRequest"),n(r)),r.withCredentials=!!e.withCredentials,r.onreadystatechange=function(){if(r.readyState===XMLHttpRequest.DONE)return t(r)},r},a=function(e,t){var n,r;if("string"==typeof e&&"string"==typeof t)if(t.match(/\bjson\b/))try{e=JSON.parse(e)}catch(i){}else if(t.match(/\b(?:java|ecma)script\b/))(r=document.createElement("script")).setAttribute("nonce",o()),r.text=e,document.head.appendChild(r).parentNode.removeChild(r);else if(t.match(/\b(xml|html|svg)\b/)){n=new DOMParser,t=t.replace(/;.+/,"");try{e=n.parseFromString(e,t)}catch(i){}}return e},t.href=function(e){return e.href},t.isCrossDomain=function(e){var t,n,r;(n=document.createElement("a")).href=location.href,r=document.createElement("a");try{return r.href=e,!((!r.protocol||":"===r.protocol)&&!r.host||n.protocol+"//"+n.host==r.protocol+"//"+r.host)}catch(o){return t=o,!0}}}.call(this),function(){var e,n;e=t.matches,n=function(e){return Array.prototype.slice.call(e)},t.serializeElement=function(t,r){var o,i;return o=[t],e(t,"form")&&(o=n(t.elements)),i=[],o.forEach(function(t){if(t.name&&!t.disabled)return e(t,"select")?n(t.options).forEach(function(e){if(e.selected)return i.push({name:t.name,value:e.value})}):t.checked||-1===["radio","checkbox","submit"].indexOf(t.type)?i.push({name:t.name,value:t.value}):void 0}),r&&i.push(r),i.map(function(e){return null!=e.name?encodeURIComponent(e.name)+"="+encodeURIComponent(e.value):e}).join("&")},t.formElements=function(t,r){return e(t,"form")?n(t.elements).filter(function(t){return e(t,r)}):n(t.querySelectorAll(r))}}.call(this),function(){var e,n,r;n=t.fire,r=t.stopEverything,t.handleConfirm=function(t){if(!e(this))return r(t)},e=function(e){var t,r,o;if(!(o=e.getAttribute("data-confirm")))return!0;if(t=!1,n(e,"confirm")){try{t=confirm(o)}catch(i){}r=n(e,"confirm:complete",[t])}return t&&r}}.call(this),function(){var e,n,r,o,i,s,a,u,l,c,d;l=t.matches,u=t.getData,c=t.setData,d=t.stopEverything,a=t.formElements,t.handleDisabledElement=function(e){var t;if((t=this).disabled)return d(e)},t.enableElement=function(e){var n;return n=e instanceof Event?e.target:e,l(n,t.linkDisableSelector)?s(n):l(n,t.buttonDisableSelector)||l(n,t.formEnableSelector)?o(n):l(n,t.formSubmitSelector)?i(n):void 0},t.disableElement=function(o){var i;return i=o instanceof Event?o.target:o,l(i,t.linkDisableSelector)?r(i):l(i,t.buttonDisableSelector)||l(i,t.formDisableSelector)?e(i):l(i,t.formSubmitSelector)?n(i):void 0},r=function(e){var t;return null!=(t=e.getAttribute("data-disable-with"))&&(c(e,"ujs:enable-with",e.innerHTML),e.innerHTML=t),e.addEventListener("click",d),c(e,"ujs:disabled",!0)},s=function(e){var t;return null!=(t=u(e,"ujs:enable-with"))&&(e.innerHTML=t,c(e,"ujs:enable-with",null)),e.removeEventListener("click",d),c(e,"ujs:disabled",null)},n=function(n){return a(n,t.formDisableSelector).forEach(e)},e=function(e){var t;return null!=(t=e.getAttribute("data-disable-with"))&&(l(e,"button")?(c(e,"ujs:enable-with",e.innerHTML),e.innerHTML=t):(c(e,"ujs:enable-with",e.value),e.value=t)),e.disabled=!0,c(e,"ujs:disabled",!0)},i=function(e){return a(e,t.formEnableSelector).forEach(o)},o=function(e){var t;return null!=(t=u(e,"ujs:enable-with"))&&(l(e,"button")?e.innerHTML=t:e.value=t,c(e,"ujs:enable-with",null)),e.disabled=!1,c(e,"ujs:disabled",null)}}.call(this),function(){var e;e=t.stopEverything,t.handleMethod=function(n){var r,o,i,s,a,u,l;if(l=(u=this).getAttribute("data-method"))return a=t.href(u),o=t.csrfToken(),r=t.csrfParam(),i=document.createElement("form"),s="<input name='_method' value='"+l+"' type='hidden' />",null==r||null==o||t.isCrossDomain(a)||(s+="<input name='"+r+"' value='"+o+"' type='hidden' />"),s+='<input type="submit" />',i.method="post",i.action=a,i.target=u.target,i.innerHTML=s,i.style.display="none",document.body.appendChild(i),i.querySelector('[type="submit"]').click(),e(n)}}.call(this),function(){var e,n,r,o,i,s,a,u,l,c=[].slice;s=t.matches,r=t.getData,u=t.setData,n=t.fire,l=t.stopEverything,e=t.ajax,o=t.isCrossDomain,a=t.serializeElement,i=function(e){var t;return null!=(t=e.getAttribute("data-remote"))&&"false"!==t},t.handleRemote=function(d){var h,p,f,m,g,y,v;return!i(m=this)||(n(m,"ajax:before")?(v=m.getAttribute("data-with-credentials"),f=m.getAttribute("data-type")||"script",s(m,t.formSubmitSelector)?(h=r(m,"ujs:submit-button"),g=r(m,"ujs:submit-button-formmethod")||m.method,y=r(m,"ujs:submit-button-formaction")||m.getAttribute("action")||location.href,"GET"===g.toUpperCase()&&(y=y.replace(/\?.*$/,"")),"multipart/form-data"===m.enctype?(p=new FormData(m),null!=h&&p.append(h.name,h.value)):p=a(m,h),u(m,"ujs:submit-button",null),u(m,"ujs:submit-button-formmethod",null),u(m,"ujs:submit-button-formaction",null)):s(m,t.buttonClickSelector)||s(m,t.inputChangeSelector)?(g=m.getAttribute("data-method"),y=m.getAttribute("data-url"),p=a(m,m.getAttribute("data-params"))):(g=m.getAttribute("data-method"),y=t.href(m),p=m.getAttribute("data-params")),e({type:g||"GET",url:y,data:p,dataType:f,beforeSend:function(e,t){return n(m,"ajax:beforeSend",[e,t])?n(m,"ajax:send",[e]):(n(m,"ajax:stopped"),!1)},success:function(){var e;return e=1<=arguments.length?c.call(arguments,0):[],n(m,"ajax:success",e)},error:function(){var e;return e=1<=arguments.length?c.call(arguments,0):[],n(m,"ajax:error",e)},complete:function(){var e;return e=1<=arguments.length?c.call(arguments,0):[],n(m,"ajax:complete",e)},crossDomain:o(y),withCredentials:null!=v&&"false"!==v}),l(d)):(n(m,"ajax:stopped"),!1))},t.formSubmitButtonClick=function(e){var t,n;if(n=(t=this).form)return t.name&&u(n,"ujs:submit-button",{name:t.name,value:t.value}),u(n,"ujs:formnovalidate-button",t.formNoValidate),u(n,"ujs:submit-button-formaction",t.getAttribute("formaction")),u(n,"ujs:submit-button-formmethod",t.getAttribute("formmethod"))},t.preventInsignificantClick=function(e){var t,n,r,o,i,s;if(i=((r=this).getAttribute("data-method")||"GET").toUpperCase(),t=r.getAttribute("data-params"),n=(o=e.metaKey||e.ctrlKey)&&"GET"===i&&!t,(s=null!=e.button&&0!==e.button)||n)return e.stopImmediatePropagation()}}.call(this),function(){var e,n,r,o,i,s,a,u,l,c,d,h,p,f,m;if(s=t.fire,r=t.delegate,u=t.getData,e=t.$,m=t.refreshCSRFTokens,n=t.CSRFProtection,p=t.loadCSPNonce,i=t.enableElement,o=t.disableElement,c=t.handleDisabledElement,l=t.handleConfirm,f=t.preventInsignificantClick,h=t.handleRemote,a=t.formSubmitButtonClick,d=t.handleMethod,"undefined"!=typeof jQuery&&null!==jQuery&&null!=jQuery.ajax){if(jQuery.rails)throw new Error("If you load both jquery_ujs and rails-ujs, use rails-ujs only.");jQuery.rails=t,jQuery.ajaxPrefilter(function(e,t,r){if(!e.crossDomain)return n(r)})}t.start=function(){if(window._rails_loaded)throw new Error("rails-ujs has already been loaded!");return window.addEventListener("pageshow",function(){return e(t.formEnableSelector).forEach(function(e){if(u(e,"ujs:disabled"))return i(e)}),e(t.linkDisableSelector).forEach(function(e){if(u(e,"ujs:disabled"))return i(e)})}),r(document,t.linkDisableSelector,"ajax:complete",i),r(document,t.linkDisableSelector,"ajax:stopped",i),r(document,t.buttonDisableSelector,"ajax:complete",i),r(document,t.buttonDisableSelector,"ajax:stopped",i),r(document,t.linkClickSelector,"click",f),r(document,t.linkClickSelector,"click",c),r(document,t.linkClickSelector,"click",l),r(document,t.linkClickSelector,"click",o),r(document,t.linkClickSelector,"click",h),r(document,t.linkClickSelector,"click",d),r(document,t.buttonClickSelector,"click",f),r(document,t.buttonClickSelector,"click",c),r(document,t.buttonClickSelector,"click",l),r(document,t.buttonClickSelector,"click",o),r(document,t.buttonClickSelector,"click",h),r(document,t.inputChangeSelector,"change",c),r(document,t.inputChangeSelector,"change",l),r(document,t.inputChangeSelector,"change",h),r(document,t.formSubmitSelector,"submit",c),r(document,t.formSubmitSelector,"submit",l),r(document,t.formSubmitSelector,"submit",h),r(document,t.formSubmitSelector,"submit",function(e){return setTimeout(function(){return o(e)},13)}),r(document,t.formSubmitSelector,"ajax:send",o),r(document,t.formSubmitSelector,"ajax:complete",i),r(document,t.formInputClickSelector,"click",f),r(document,t.formInputClickSelector,"click",c),r(document,t.formInputClickSelector,"click",l),r(document,t.formInputClickSelector,"click",a),document.addEventListener("DOMContentLoaded",m),document.addEventListener("DOMContentLoaded",p),window._rails_loaded=!0},window.Rails===t&&s(document,"rails:attachBindings")&&t.start()}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd&&define(t)}).call(this),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.ActiveStorage={})}(this,function(e){"use strict";function t(e,t){return e(t={exports:{}},t.exports),t.exports}function n(e){var t=o(document.head,'meta[name="'+e+'"]');if(t)return t.getAttribute("content")}function r(e,t){var n;return"string"==typeof e&&(t=e,e=document),s(e.querySelectorAll(t))}function o(e,t){return"string"==typeof e&&(t=e,e=document),e.querySelector(t)}function i(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},r=e.disabled,o=n.bubbles,i=n.cancelable,s=n.detail,a=document.createEvent("Event");a.initEvent(t,o||!0,i||!0),a.detail=s||{};try{e.disabled=!1,e.dispatchEvent(a)}finally{e.disabled=r}return a}function s(e){return Array.isArray(e)?e:Array.from?Array.from(e):[].slice.call(e)}function a(e,t){if(e&&"function"==typeof e[t]){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return e[t].apply(e,r)}}function u(){x||(x=!0,document.addEventListener("click",l,!0),document.addEventListener("submit",c),document.addEventListener("ajax:before",d))}function l(e){var t=e.target;"INPUT"!=t.tagName&&"BUTTON"!=t.tagName||"submit"!=t.type||!t.form||q.set(t.form,t)}function c(e){h(e)}function d(e){"FORM"==e.target.tagName&&h(e)}function h(e){var t=e.target;if(t.hasAttribute(T))e.preventDefault();else{var n=new M(t),r=n.inputs;r.length&&(e.preventDefault(),t.setAttribute(T,""),r.forEach(f),n.start(function(e){t.removeAttribute(T),e?r.forEach(m):p(t)}))}}function p(e){var t=q.get(e)||o(e,"input[type=submit], button[type=submit]");if(t){var n,r=t.disabled;t.disabled=!1,t.focus(),t.click(),t.disabled=r}else(t=document.createElement("input")).type="submit",t.style.display="none",e.appendChild(t),t.click(),e.removeChild(t);q["delete"](e)}function f(e){e.disabled=!0}function m(e){e.disabled=!1}function g(){window.ActiveStorage&&u()}var y=t(function(e,t){var n;n=function(e){function t(e,t){var n=e[0],r=e[1],o=e[2],i=e[3];r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&o)+t[1]-389564586|0)<<12|i>>>20)+n|0)&n|~i&r)+t[2]+606105819|0)<<17|o>>>15)+i|0)&i|~o&n)+t[3]-1044525330|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&o)+t[5]+1200080426|0)<<12|i>>>20)+n|0)&n|~i&r)+t[6]-1473231341|0)<<17|o>>>15)+i|0)&i|~o&n)+t[7]-45705983|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&o)+t[9]-1958414417|0)<<12|i>>>20)+n|0)&n|~i&r)+t[10]-42063|0)<<17|o>>>15)+i|0)&i|~o&n)+t[11]-1990404162|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&o)+t[13]-40341101|0)<<12|i>>>20)+n|0)&n|~i&r)+t[14]-1502002290|0)<<17|o>>>15)+i|0)&i|~o&n)+t[15]+1236535329|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[1]-165796510|0)<<5|n>>>27)+r|0)&o|r&~o)+t[6]-1069501632|0)<<9|i>>>23)+n|0)&r|n&~r)+t[11]+643717713|0)<<14|o>>>18)+i|0)&n|i&~n)+t[0]-373897302|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[5]-701558691|0)<<5|n>>>27)+r|0)&o|r&~o)+t[10]+38016083|0)<<9|i>>>23)+n|0)&r|n&~r)+t[15]-660478335|0)<<14|o>>>18)+i|0)&n|i&~n)+t[4]-405537848|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[9]+568446438|0)<<5|n>>>27)+r|0)&o|r&~o)+t[14]-1019803690|0)<<9|i>>>23)+n|0)&r|n&~r)+t[3]-187363961|0)<<14|o>>>18)+i|0)&n|i&~n)+t[8]+1163531501|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[13]-1444681467|0)<<5|n>>>27)+r|0)&o|r&~o)+t[2]-51403784|0)<<9|i>>>23)+n|0)&r|n&~r)+t[7]+1735328473|0)<<14|o>>>18)+i|0)&n|i&~n)+t[12]-1926607734|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[5]-378558|0)<<4|n>>>28)+r|0)^r^o)+t[8]-2022574463|0)<<11|i>>>21)+n|0)^n^r)+t[11]+1839030562|0)<<16|o>>>16)+i|0)^i^n)+t[14]-35309556|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[1]-1530992060|0)<<4|n>>>28)+r|0)^r^o)+t[4]+1272893353|0)<<11|i>>>21)+n|0)^n^r)+t[7]-155497632|0)<<16|o>>>16)+i|0)^i^n)+t[10]-1094730640|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[13]+681279174|0)<<4|n>>>28)+r|0)^r^o)+t[0]-358537222|0)<<11|i>>>21)+n|0)^n^r)+t[3]-722521979|0)<<16|o>>>16)+i|0)^i^n)+t[6]+76029189|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[9]-640364487|0)<<4|n>>>28)+r|0)^r^o)+t[12]-421815835|0)<<11|i>>>21)+n|0)^n^r)+t[15]+530742520|0)<<16|o>>>16)+i|0)^i^n)+t[2]-995338651|0)<<23|r>>>9)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[0]-198630844|0)<<6|n>>>26)+r|0)|~o))+t[7]+1126891415|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[14]-1416354905|0)<<15|o>>>17)+i|0)|~n))+t[5]-57434055|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[12]+1700485571|0)<<6|n>>>26)+r|0)|~o))+t[3]-1894986606|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[10]-1051523|0)<<15|o>>>17)+i|0)|~n))+t[1]-2054922799|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[8]+1873313359|0)<<6|n>>>26)+r|0)|~o))+t[15]-30611744|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[6]-1560198380|0)<<15|o>>>17)+i|0)|~n))+t[13]+1309151649|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[4]-145523070|0)<<6|n>>>26)+r|0)|~o))+t[11]-1120210379|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[2]+718787259|0)<<15|o>>>17)+i|0)|~n))+t[9]-343485551|0)<<21|r>>>11)+o|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=o+e[2]|0,e[3]=i+e[3]|0}function n(e){var t=[],n;for(n=0;n<64;n+=4)t[n>>2]=e.charCodeAt(n)+(e.charCodeAt(n+1)<<8)+(e.charCodeAt(n+2)<<16)+(e.charCodeAt(n+3)<<24);return t}function r(e){var t=[],n;for(n=0;n<64;n+=4)t[n>>2]=e[n]+(e[n+1]<<8)+(e[n+2]<<16)+(e[n+3]<<24);return t}function o(e){var r=e.length,o=[1732584193,-271733879,-1732584194,271733878],i,s,a,u,l,c;for(i=64;i<=r;i+=64)t(o,n(e.substring(i-64,i)));for(s=(e=e.substring(i-64)).length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0;i<s;i+=1)a[i>>2]|=e.charCodeAt(i)<<(i%4<<3);if(a[i>>2]|=128<<(i%4<<3),i>55)for(t(o,a),i=0;i<16;i+=1)a[i]=0;return u=(u=8*r).toString(16).match(/(.*?)(.{0,8})$/),l=parseInt(u[2],16),c=parseInt(u[1],16)||0,a[14]=l,a[15]=c,t(o,a),o}function i(e){var n=e.length,o=[1732584193,-271733879,-1732584194,271733878],i,s,a,u,l,c;for(i=64;i<=n;i+=64)t(o,r(e.subarray(i-64,i)));for(s=(e=i-64<n?e.subarray(i-64):new Uint8Array(0)).length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0;i<s;i+=1)a[i>>2]|=e[i]<<(i%4<<3);if(a[i>>2]|=128<<(i%4<<3),i>55)for(t(o,a),i=0;i<16;i+=1)a[i]=0;return u=(u=8*n).toString(16).match(/(.*?)(.{0,8})$/),l=parseInt(u[2],16),c=parseInt(u[1],16)||0,a[14]=l,a[15]=c,t(o,a),o}function s(e){var t="",n;for(n=0;n<4;n+=1)t+=f[e>>8*n+4&15]+f[e>>8*n&15];return t}function a(e){var t;for(t=0;t<e.length;t+=1)e[t]=s(e[t]);return e.join("")}function u(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function l(e,t){var n=e.length,r=new ArrayBuffer(n),o=new Uint8Array(r),i;for(i=0;i<n;i+=1)o[i]=e.charCodeAt(i);return t?o:r}function c(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function d(e,t,n){var r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e)),r.set(new Uint8Array(t),e.byteLength),n?r:r.buffer}function h(e){var t=[],n=e.length,r;for(r=0;r<n-1;r+=2)t.push(parseInt(e.substr(r,2),16));return String.fromCharCode.apply(String,t)}function p(){this.reset()}var f=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return a(o("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(n,r){var o=this.byteLength,i=t(n,o),s=o,a,u,l,c;return r!==e&&(s=t(r,o)),i>s?new ArrayBuffer(0):(a=s-i,u=new ArrayBuffer(a),l=new Uint8Array(u),c=new Uint8Array(this,i,a),l.set(c),u)}}(),p.prototype.append=function(e){return this.appendBinary(u(e)),this},p.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var r=this._buff.length,o;for(o=64;o<=r;o+=64)t(this._hash,n(this._buff.substring(o-64,o)));return this._buff=this._buff.substring(o-64),this},p.prototype.end=function(e){var t=this._buff,n=t.length,r,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i;for(r=0;r<n;r+=1)o[r>>2]|=t.charCodeAt(r)<<(r%4<<3);return this._finish(o,n),i=a(this._hash),e&&(i=h(i)),this.reset(),i},p.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},p.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},p.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},p.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},p.prototype._finish=function(e,n){var r=n,o,i,s;if(e[r>>2]|=128<<(r%4<<3),r>55)for(t(this._hash,e),r=0;r<16;r+=1)e[r]=0;o=(o=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(o[2],16),s=parseInt(o[1],16)||0,e[14]=i,e[15]=s,t(this._hash,e)},p.hash=function(e,t){return p.hashBinary(u(e),t)},p.hashBinary=function(e,t){var n,r=a(o(e));return t?h(r):r},p.ArrayBuffer=function(){this.reset()},p.ArrayBuffer.prototype.append=function(e){var n=d(this._buff.buffer,e,!0),o=n.length,i;for(this._length+=e.byteLength,i=64;i<=o;i+=64)t(this._hash,r(n.subarray(i-64,i)));return this._buff=i-64<o?new Uint8Array(n.buffer.slice(i-64)):new Uint8Array(0),this},p.ArrayBuffer.prototype.end=function(e){var t=this._buff,n=t.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o,i;for(o=0;o<n;o+=1)r[o>>2]|=t[o]<<(o%4<<3);return this._finish(r,n),i=a(this._hash),e&&(i=h(i)),this.reset(),i},p.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},p.ArrayBuffer.prototype.getState=function(){var e=p.prototype.getState.call(this);return e.buff=c(e.buff),e},p.ArrayBuffer.prototype.setState=function(e){return e.buff=l(e.buff,!0),p.prototype.setState.call(this,e)},p.ArrayBuffer.prototype.destroy=p.prototype.destroy,p.ArrayBuffer.prototype._finish=p.prototype._finish,p.ArrayBuffer.hash=function(e,t){var n,r=a(i(new Uint8Array(e)));return t?h(r):r},p},e.exports=n()}),v=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},w=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,k=function(){function e(t){v(this,e),this.file=t,this.chunkSize=2097152,this.chunkCount=Math.ceil(this.file.size/this.chunkSize),this.chunkIndex=0}return w(e,null,[{key:"create",value:function t(n,r){var o;new e(n).create(r)}}]),w(e,[{key:"create",value:function n(e){var t=this;this.callback=e,this.md5Buffer=new y.ArrayBuffer,this.fileReader=new FileReader,this.fileReader.addEventListener("load",function(e){return t.fileReaderDidLoad(e)}),this.fileReader.addEventListener("error",function(e){return t.fileReaderDidError(e)}),this.readNextChunk()}},{key:"fileReaderDidLoad",value:function r(e){if(this.md5Buffer.append(e.target.result),!this.readNextChunk()){var t=this.md5Buffer.end(!0),n=btoa(t);this.callback(null,n)}}},{key:"fileReaderDidError",value:function o(e){this.callback("Error reading "+this.file.name)}},{key:"readNextChunk",value:function i(){if(this.chunkIndex<this.chunkCount||0==this.chunkIndex&&0==this.chunkCount){var e=this.chunkIndex*this.chunkSize,t=Math.min(e+this.chunkSize,this.file.size),n=b.call(this.file,e,t);return this.fileReader.readAsArrayBuffer(n),this.chunkIndex++,!0}return!1}}]),e}(),S=function(){function e(t,r,o){var i=this;v(this,e),this.file=t,this.attributes={filename:t.name,content_type:t.type,byte_size:t.size,checksum:r},this.xhr=new XMLHttpRequest,this.xhr.open("POST",o,!0),this.xhr.responseType="json",this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.setRequestHeader("Accept","application/json"),this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),this.xhr.setRequestHeader("X-CSRF-Token",n("csrf-token")),this.xhr.addEventListener("load",function(e){return i.requestDidLoad(e)}),this.xhr.addEventListener("error",function(e){return i.requestDidError(e)})}return w(e,[{key:"create",value:function t(e){this.callback=e,this.xhr.send(JSON.stringify({blob:this.attributes}))}},{key:"requestDidLoad",value:function r(e){if(this.status>=200&&this.status<300){var t=this.response,n=t.direct_upload;delete t.direct_upload,this.attributes=t,this.directUploadData=n,this.callback(null,this.toJSON())}else this.requestDidError(e)}},{key:"requestDidError",value:function o(e){this.callback('Error creating Blob for "'+this.file.name+'". Status: '+this.status)}},{key:"toJSON",value:function i(){var e={};for(var t in this.attributes)e[t]=this.attributes[t];return e}},{key:"status",get:function s(){return this.xhr.status}},{key:"response",get:function a(){var e=this.xhr,t=e.responseType,n=e.response;return"json"==t?n:JSON.parse(n)}}]),e}(),_=function(){function e(t){var n=this;v(this,e),this.blob=t,this.file=t.file;var r=t.directUploadData,o=r.url,i=r.headers;for(var s in this.xhr=new XMLHttpRequest,this.xhr.open("PUT",o,!0),this.xhr.responseType="text",i)this.xhr.setRequestHeader(s,i[s]);this.xhr.addEventListener("load",function(e){return n.requestDidLoad(e)}),this.xhr.addEventListener("error",function(e){return n.requestDidError(e)})}return w(e,[{key:"create",value:function t(e){this.callback=e,this.xhr.send(this.file.slice())}},{key:"requestDidLoad",value:function n(e){var t=this.xhr,n=t.status,r=t.response;n>=200&&n<300?this.callback(null,r):this.requestDidError(e)}},{key:"requestDidError",value:function r(e){this.callback('Error storing "'+this.file.name+'". Status: '+this.xhr.status)}}]),e}(),E=0,A=function(){function e(t,n,r){v(this,e),this.id=++E,this.file=t,this.url=n,this.delegate=r}return w(e,[{key:"create",value:function t(e){var t=this;k.create(this.file,function(n,r){if(n)e(n);else{var o=new S(t.file,r,t.url);a(t.delegate,"directUploadWillCreateBlobWithXHR",o.xhr),o.create(function(n){if(n)e(n);else{var r=new _(o);a(t.delegate,"directUploadWillStoreFileWithXHR",r.xhr),r.create(function(t){t?e(t):e(null,o.toJSON())})}})}})}}]),e}(),C=function(){function e(t,n){v(this,e),this.input=t,this.file=n,this.directUpload=new A(this.file,this.url,this),this.dispatch("initialize")}return w(e,[{key:"start",value:function t(e){var t=this,n=document.createElement("input");n.type="hidden",n.name=this.input.name,this.input.insertAdjacentElement("beforebegin",n),this.dispatch("start"),this.directUpload.create(function(r,o){r?(n.parentNode.removeChild(n),t.dispatchError(r)):n.value=o.signed_id,t.dispatch("end"),e(r)})}},{key:"uploadRequestDidProgress",value:function n(e){var t=e.loaded/e.total*100;t&&this.dispatch("progress",{progress:t})}},{key:"dispatch",value:function r(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return t.file=this.file,t.id=this.directUpload.id,i(this.input,"direct-upload:"+e,{detail:t})}},{key:"dispatchError",value:function o(e){var t;this.dispatch("error",{error:e}).defaultPrevented||alert(e)}},{key:"directUploadWillCreateBlobWithXHR",value:function s(e){this.dispatch("before-blob-request",{xhr:e})}},{key:"directUploadWillStoreFileWithXHR",value:function a(e){var t=this;this.dispatch("before-storage-request",{xhr:e}),e.upload.addEventListener("progress",function(e){return t.uploadRequestDidProgress(e)})}},{key:"url",get:function u(){return this.input.getAttribute("data-direct-upload-url")}}]),e}(),L="input[type=file][data-direct-upload-url]:not([disabled])",M=function(){function e(t){v(this,e),this.form=t,this.inputs=r(t,L).filter(function(e){return e.files.length})}return w(e,[{key:"start",value:function t(e){var t=this,n=this.createDirectUploadControllers(),r=function o(){var r=n.shift();r?r.start(function(n){n?(e(n),t.dispatch("end")):o()}):(e(),t.dispatch("end"))};this.dispatch("start"),r()}},{key:"createDirectUploadControllers",value:function n(){var e=[];return this.inputs.forEach(function(t){s(t.files).forEach(function(n){var r=new C(t,n);e.push(r)})}),e}},{key:"dispatch",value:function o(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return i(this.form,"direct-uploads:"+e,{detail:t})}}]),e}(),T="data-direct-uploads-processing",q=new WeakMap,x=!1;setTimeout(g,1),e.start=u,e.DirectUpload=A,Object.defineProperty(e,"__esModule",{value:!0})}),function(){var e=this;(function(){(function(){this.Turbolinks={supported:null!=window.history.pushState&&null!=window.requestAnimationFrame&&null!=window.addEventListener,visit:function(e,n){return t.controller.visit(e,n)},clearCache:function(){return t.controller.clearCache()},setProgressBarDelay:function(e){return t.controller.setProgressBarDelay(e)}}}).call(this)}).call(e);var t=e.Turbolinks;(function(){(function(){var e,n,r,o=[].slice;t.copyObject=function(e){var t,n,r;for(t in n={},e)r=e[t],n[t]=r;return n},t.closest=function(t,n){return e.call(t,n)},e=function(){var e,t;return null!=(t=(e=document.documentElement).closest)?t:function(e){var t;for(t=this;t;){if(t.nodeType===Node.ELEMENT_NODE&&n.call(t,e))return t;t=t.parentNode}}}(),t.defer=function(e){return setTimeout(e,1)},t.throttle=function(e){var t;return t=null,function(){var n,r;return n=1<=arguments.length?o.call(arguments,0):[],null!=t?t:t=requestAnimationFrame((r=this,function(){return t=null,e.apply(r,n)}))}},t.dispatch=function(e,t){var n,o,i,s,a,u;return u=(a=null!=t?t:{}).target,n=a.cancelable,o=a.data,(i=document.createEvent("Events")).initEvent(e,!0,!0===n),i.data=null!=o?o:{},i.cancelable&&!r&&(s=i.preventDefault,i.preventDefault=function(){return this.defaultPrevented||Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}}),s.call(this)}),(null!=u?u:document).dispatchEvent(i),i},r=function(){var e;return(e=document.createEvent("Events")).initEvent("test",!0,!0),e.preventDefault(),e.defaultPrevented}(),t.match=function(e,t){return n.call(e,t)},n=function(){var e,t,n,r;return null!=(t=null!=(n=null!=(r=(e=document.documentElement).matchesSelector)?r:e.webkitMatchesSelector)?n:e.msMatchesSelector)?t:e.mozMatchesSelector}(),t.uuid=function(){var e,t,n;for(n="",e=t=1;36>=t;e=++t)n+=9===e||14===e||19===e||24===e?"-":15===e?"4":20===e?(Math.floor(4*Math.random())+8).toString(16):Math.floor(15*Math.random()).toString(16);return n}}).call(this),function(){t.Location=function(){function e(e){var t,n;null==e&&(e=""),(n=document.createElement("a")).href=e.toString(),this.absoluteURL=n.href,2>(t=n.hash.length)?this.requestURL=this.absoluteURL:(this.requestURL=this.absoluteURL.slice(0,-t),this.anchor=n.hash.slice(1))}var t,n,r,o;return e.wrap=function(e){return e instanceof this?e:new this(e)},e.prototype.getOrigin=function(){return this.absoluteURL.split("/",3).join("/")},e.prototype.getPath=function(){var e,t;return null!=(e=null!=(t=this.requestURL.match(/\/\/[^\/]*(\/[^?;]*)/))?t[1]:void 0)?e:"/"},e.prototype.getPathComponents=function(){return this.getPath().split("/").slice(1)},e.prototype.getLastPathComponent=function(){return this.getPathComponents().slice(-1)[0]},e.prototype.getExtension=function(){var e,t
;return null!=(e=null!=(t=this.getLastPathComponent().match(/\.[^.]*$/))?t[0]:void 0)?e:""},e.prototype.isHTML=function(){return this.getExtension().match(/^(?:|\.(?:htm|html|xhtml))$/)},e.prototype.isPrefixedBy=function(e){var t;return t=n(e),this.isEqualTo(e)||o(this.absoluteURL,t)},e.prototype.isEqualTo=function(e){return this.absoluteURL===(null!=e?e.absoluteURL:void 0)},e.prototype.toCacheKey=function(){return this.requestURL},e.prototype.toJSON=function(){return this.absoluteURL},e.prototype.toString=function(){return this.absoluteURL},e.prototype.valueOf=function(){return this.absoluteURL},n=function(e){return t(e.getOrigin()+e.getPath())},t=function(e){return r(e,"/")?e:e+"/"},o=function(e,t){return e.slice(0,t.length)===t},r=function(e,t){return e.slice(-t.length)===t},e}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};t.HttpRequest=function(){function n(n,r,o){this.delegate=n,this.requestCanceled=e(this.requestCanceled,this),this.requestTimedOut=e(this.requestTimedOut,this),this.requestFailed=e(this.requestFailed,this),this.requestLoaded=e(this.requestLoaded,this),this.requestProgressed=e(this.requestProgressed,this),this.url=t.Location.wrap(r).requestURL,this.referrer=t.Location.wrap(o).absoluteURL,this.createXHR()}return n.NETWORK_FAILURE=0,n.TIMEOUT_FAILURE=-1,n.timeout=60,n.prototype.send=function(){var e;return this.xhr&&!this.sent?(this.notifyApplicationBeforeRequestStart(),this.setProgress(0),this.xhr.send(),this.sent=!0,"function"==typeof(e=this.delegate).requestStarted?e.requestStarted():void 0):void 0},n.prototype.cancel=function(){return this.xhr&&this.sent?this.xhr.abort():void 0},n.prototype.requestProgressed=function(e){return e.lengthComputable?this.setProgress(e.loaded/e.total):void 0},n.prototype.requestLoaded=function(){return this.endRequest((e=this,function(){var t;return 200<=(t=e.xhr.status)&&300>t?e.delegate.requestCompletedWithResponse(e.xhr.responseText,e.xhr.getResponseHeader("Turbolinks-Location")):(e.failed=!0,e.delegate.requestFailedWithStatusCode(e.xhr.status,e.xhr.responseText))}));var e},n.prototype.requestFailed=function(){return this.endRequest((e=this,function(){return e.failed=!0,e.delegate.requestFailedWithStatusCode(e.constructor.NETWORK_FAILURE)}));var e},n.prototype.requestTimedOut=function(){return this.endRequest((e=this,function(){return e.failed=!0,e.delegate.requestFailedWithStatusCode(e.constructor.TIMEOUT_FAILURE)}));var e},n.prototype.requestCanceled=function(){return this.endRequest()},n.prototype.notifyApplicationBeforeRequestStart=function(){return t.dispatch("turbolinks:request-start",{data:{url:this.url,xhr:this.xhr}})},n.prototype.notifyApplicationAfterRequestEnd=function(){return t.dispatch("turbolinks:request-end",{data:{url:this.url,xhr:this.xhr}})},n.prototype.createXHR=function(){return this.xhr=new XMLHttpRequest,this.xhr.open("GET",this.url,!0),this.xhr.timeout=1e3*this.constructor.timeout,this.xhr.setRequestHeader("Accept","text/html, application/xhtml+xml"),this.xhr.setRequestHeader("Turbolinks-Referrer",this.referrer),this.xhr.onprogress=this.requestProgressed,this.xhr.onload=this.requestLoaded,this.xhr.onerror=this.requestFailed,this.xhr.ontimeout=this.requestTimedOut,this.xhr.onabort=this.requestCanceled},n.prototype.endRequest=function(e){return this.xhr?(this.notifyApplicationAfterRequestEnd(),null!=e&&e.call(this),this.destroy()):void 0},n.prototype.setProgress=function(e){var t;return this.progress=e,"function"==typeof(t=this.delegate).requestProgressed?t.requestProgressed(this.progress):void 0},n.prototype.destroy=function(){var e;return this.setProgress(1),"function"==typeof(e=this.delegate).requestFinished&&e.requestFinished(),this.delegate=null,this.xhr=null},n}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};t.ProgressBar=function(){function t(){this.trickle=e(this.trickle,this),this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement()}var n;return n=300,t.defaultCSS=".turbolinks-progress-bar {\n  position: fixed;\n  display: block;\n  top: 0;\n  left: 0;\n  height: 3px;\n  background: #0076ff;\n  z-index: 9999;\n  transition: width "+n+"ms ease-out, opacity "+n/2+"ms "+n/2+"ms ease-in;\n  transform: translate3d(0, 0, 0);\n}",t.prototype.show=function(){return this.visible?void 0:(this.visible=!0,this.installStylesheetElement(),this.installProgressElement(),this.startTrickling())},t.prototype.hide=function(){return this.visible&&!this.hiding?(this.hiding=!0,this.fadeProgressElement((e=this,function(){return e.uninstallProgressElement(),e.stopTrickling(),e.visible=!1,e.hiding=!1}))):void 0;var e},t.prototype.setValue=function(e){return this.value=e,this.refresh()},t.prototype.installStylesheetElement=function(){return document.head.insertBefore(this.stylesheetElement,document.head.firstChild)},t.prototype.installProgressElement=function(){return this.progressElement.style.width=0,this.progressElement.style.opacity=1,document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()},t.prototype.fadeProgressElement=function(e){return this.progressElement.style.opacity=0,setTimeout(e,1.5*n)},t.prototype.uninstallProgressElement=function(){return this.progressElement.parentNode?document.documentElement.removeChild(this.progressElement):void 0},t.prototype.startTrickling=function(){return null!=this.trickleInterval?this.trickleInterval:this.trickleInterval=setInterval(this.trickle,n)},t.prototype.stopTrickling=function(){return clearInterval(this.trickleInterval),this.trickleInterval=null},t.prototype.trickle=function(){return this.setValue(this.value+Math.random()/100)},t.prototype.refresh=function(){return requestAnimationFrame((e=this,function(){return e.progressElement.style.width=10+90*e.value+"%"}));var e},t.prototype.createStylesheetElement=function(){var e;return(e=document.createElement("style")).type="text/css",e.textContent=this.constructor.defaultCSS,e},t.prototype.createProgressElement=function(){var e;return(e=document.createElement("div")).className="turbolinks-progress-bar",e},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};t.BrowserAdapter=function(){function n(n){this.controller=n,this.showProgressBar=e(this.showProgressBar,this),this.progressBar=new t.ProgressBar}var r,o,i;return i=t.HttpRequest,r=i.NETWORK_FAILURE,o=i.TIMEOUT_FAILURE,n.prototype.visitProposedToLocationWithAction=function(e,t){return this.controller.startVisitToLocationWithAction(e,t)},n.prototype.visitStarted=function(e){return e.issueRequest(),e.changeHistory(),e.loadCachedSnapshot()},n.prototype.visitRequestStarted=function(e){return this.progressBar.setValue(0),e.hasCachedSnapshot()||"restore"!==e.action?this.showProgressBarAfterDelay():this.showProgressBar()},n.prototype.visitRequestProgressed=function(e){return this.progressBar.setValue(e.progress)},n.prototype.visitRequestCompleted=function(e){return e.loadResponse()},n.prototype.visitRequestFailedWithStatusCode=function(e,t){switch(t){case r:case o:return this.reload();default:return e.loadResponse()}},n.prototype.visitRequestFinished=function(e){return this.hideProgressBar()},n.prototype.visitCompleted=function(e){return e.followRedirect()},n.prototype.pageInvalidated=function(){return this.reload()},n.prototype.showProgressBarAfterDelay=function(){return this.progressBarTimeout=setTimeout(this.showProgressBar,this.controller.progressBarDelay)},n.prototype.showProgressBar=function(){return this.progressBar.show()},n.prototype.hideProgressBar=function(){return this.progressBar.hide(),clearTimeout(this.progressBarTimeout)},n.prototype.reload=function(){return window.location.reload()},n}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};t.History=function(){function n(t){this.delegate=t,this.onPageLoad=e(this.onPageLoad,this),this.onPopState=e(this.onPopState,this)}return n.prototype.start=function(){return this.started?void 0:(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.started=!0)},n.prototype.stop=function(){return this.started?(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1):void 0},n.prototype.push=function(e,n){return e=t.Location.wrap(e),this.update("push",e,n)},n.prototype.replace=function(e,n){return e=t.Location.wrap(e),this.update("replace",e,n)},n.prototype.onPopState=function(e){var n,r,o,i;return this.shouldHandlePopState()&&(i=null!=(r=e.state)?r.turbolinks:void 0)?(n=t.Location.wrap(window.location),o=i.restorationIdentifier,this.delegate.historyPoppedToLocationWithRestorationIdentifier(n,o)):void 0},n.prototype.onPageLoad=function(e){return t.defer(function(e){return function(){return e.pageLoaded=!0}}(this))},n.prototype.shouldHandlePopState=function(){return this.pageIsLoaded()},n.prototype.pageIsLoaded=function(){return this.pageLoaded||"complete"===document.readyState},n.prototype.update=function(e,t,n){var r;return r={turbolinks:{restorationIdentifier:n}},history[e+"State"](r,null,t)},n}()}.call(this),function(){t.HeadDetails=function(){function e(e){var t,n,r,s,a,u;for(this.elements={},r=0,a=e.length;a>r;r++)(u=e[r]).nodeType===Node.ELEMENT_NODE&&(s=u.outerHTML,(n=null!=(t=this.elements)[s]?t[s]:t[s]={type:i(u),tracked:o(u),elements:[]}).elements.push(u))}var t,n,r,o,i;return e.fromHeadElement=function(e){var t;return new this(null!=(t=null!=e?e.childNodes:void 0)?t:[])},e.prototype.hasElementWithKey=function(e){return e in this.elements},e.prototype.getTrackedElementSignature=function(){var e,t;return function(){var n,r;for(e in r=[],n=this.elements)(t=n[e].tracked)&&r.push(e);return r}.call(this).join("")},e.prototype.getScriptElementsNotInDetails=function(e){return this.getElementsMatchingTypeNotInDetails("script",e)},e.prototype.getStylesheetElementsNotInDetails=function(e){return this.getElementsMatchingTypeNotInDetails("stylesheet",e)},e.prototype.getElementsMatchingTypeNotInDetails=function(e,t){var n,r,o,i,s,a;for(r in s=[],o=this.elements)a=(i=o[r]).type,n=i.elements,a!==e||t.hasElementWithKey(r)||s.push(n[0]);return s},e.prototype.getProvisionalElements=function(){var e,t,n,r,o,i,s;for(t in n=[],r=this.elements)s=(o=r[t]).type,i=o.tracked,e=o.elements,null!=s||i?e.length>1&&n.push.apply(n,e.slice(1)):n.push.apply(n,e);return n},e.prototype.getMetaValue=function(e){var t;return null!=(t=this.findMetaElementByName(e))?t.getAttribute("content"):void 0},e.prototype.findMetaElementByName=function(e){var n,r,o,i;for(o in n=void 0,i=this.elements)r=i[o].elements,t(r[0],e)&&(n=r[0]);return n},i=function(e){return n(e)?"script":r(e)?"stylesheet":void 0},o=function(e){return"reload"===e.getAttribute("data-turbolinks-track")},n=function(e){var t;return"script"===(t=e.tagName.toLowerCase())},r=function(e){var t;return"style"===(t=e.tagName.toLowerCase())||"link"===t&&"stylesheet"===e.getAttribute("rel")},t=function(e,t){var n;return"meta"===(n=e.tagName.toLowerCase())&&e.getAttribute("name")===t},e}()}.call(this),function(){t.Snapshot=function(){function e(e,t){this.headDetails=e,this.bodyElement=t}return e.wrap=function(e){return e instanceof this?e:"string"==typeof e?this.fromHTMLString(e):this.fromHTMLElement(e)},e.fromHTMLString=function(e){var t;return(t=document.createElement("html")).innerHTML=e,this.fromHTMLElement(t)},e.fromHTMLElement=function(e){var n,r,o,i;return o=e.querySelector("head"),n=null!=(i=e.querySelector("body"))?i:document.createElement("body"),new this(r=t.HeadDetails.fromHeadElement(o),n)},e.prototype.clone=function(){return new this.constructor(this.headDetails,this.bodyElement.cloneNode(!0))},e.prototype.getRootLocation=function(){var e,n;return n=null!=(e=this.getSetting("root"))?e:"/",new t.Location(n)},e.prototype.getCacheControlValue=function(){return this.getSetting("cache-control")},e.prototype.getElementForAnchor=function(e){try{return this.bodyElement.querySelector("[id='"+e+"'], a[name='"+e+"']")}catch(t){}},e.prototype.getPermanentElements=function(){return this.bodyElement.querySelectorAll("[id][data-turbolinks-permanent]")},e.prototype.getPermanentElementById=function(e){return this.bodyElement.querySelector("#"+e+"[data-turbolinks-permanent]")},e.prototype.getPermanentElementsPresentInSnapshot=function(e){var t,n,r,o,i;for(i=[],n=0,r=(o=this.getPermanentElements()).length;r>n;n++)t=o[n],e.getPermanentElementById(t.id)&&i.push(t);return i},e.prototype.findFirstAutofocusableElement=function(){return this.bodyElement.querySelector("[autofocus]")},e.prototype.hasAnchor=function(e){return null!=this.getElementForAnchor(e)},e.prototype.isPreviewable=function(){return"no-preview"!==this.getCacheControlValue()},e.prototype.isCacheable=function(){return"no-cache"!==this.getCacheControlValue()},e.prototype.isVisitable=function(){return"reload"!==this.getSetting("visit-control")},e.prototype.getSetting=function(e){return this.headDetails.getMetaValue("turbolinks-"+e)},e}()}.call(this),function(){var e=[].slice;t.Renderer=function(){function t(){}var n;return t.render=function(){var t,n,r,o;return r=arguments[0],n=arguments[1],(o=function(e,t,n){n.prototype=e.prototype;var r=new n,o=e.apply(r,t);return Object(o)===o?o:r}(this,t=3<=arguments.length?e.call(arguments,2):[],function(){})).delegate=r,o.render(n),o},t.prototype.renderView=function(e){return this.delegate.viewWillRender(this.newBody),e(),this.delegate.viewRendered(this.newBody)},t.prototype.invalidateView=function(){return this.delegate.viewInvalidated()},t.prototype.createScriptElement=function(e){var t;return"false"===e.getAttribute("data-turbolinks-eval")?e:((t=document.createElement("script")).textContent=e.textContent,t.async=!1,n(t,e),t)},n=function(e,t){var n,r,o,i,s,a,u;for(a=[],n=0,r=(i=t.attributes).length;r>n;n++)o=(s=i[n]).name,u=s.value,a.push(e.setAttribute(o,u));return a},t}()}.call(this),function(){var e,n,r=function(e,t){function n(){this.constructor=e}for(var r in t)o.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},o={}.hasOwnProperty;t.SnapshotRenderer=function(t){function o(e,t,n){this.currentSnapshot=e,this.newSnapshot=t,this.isPreview=n,this.currentHeadDetails=this.currentSnapshot.headDetails,this.newHeadDetails=this.newSnapshot.headDetails,this.currentBody=this.currentSnapshot.bodyElement,this.newBody=this.newSnapshot.bodyElement}return r(o,t),o.prototype.render=function(e){return this.shouldRender()?(this.mergeHead(),this.renderView((t=this,function(){return t.replaceBody(),t.isPreview||t.focusFirstAutofocusableElement(),e()}))):this.invalidateView();var t},o.prototype.mergeHead=function(){return this.copyNewHeadStylesheetElements(),this.copyNewHeadScriptElements(),this.removeCurrentHeadProvisionalElements(),this.copyNewHeadProvisionalElements()},o.prototype.replaceBody=function(){var e;return e=this.relocateCurrentBodyPermanentElements(),this.activateNewBodyScriptElements(),this.assignNewBody(),this.replacePlaceholderElementsWithClonedPermanentElements(e)},o.prototype.shouldRender=function(){return this.newSnapshot.isVisitable()&&this.trackedElementsAreIdentical()},o.prototype.trackedElementsAreIdentical=function(){return this.currentHeadDetails.getTrackedElementSignature()===this.newHeadDetails.getTrackedElementSignature()},o.prototype.copyNewHeadStylesheetElements=function(){var e,t,n,r,o;for(o=[],t=0,n=(r=this.getNewHeadStylesheetElements()).length;n>t;t++)e=r[t],o.push(document.head.appendChild(e));return o},o.prototype.copyNewHeadScriptElements=function(){var e,t,n,r,o;for(o=[],t=0,n=(r=this.getNewHeadScriptElements()).length;n>t;t++)e=r[t],o.push(document.head.appendChild(this.createScriptElement(e)));return o},o.prototype.removeCurrentHeadProvisionalElements=function(){var e,t,n,r,o;for(o=[],t=0,n=(r=this.getCurrentHeadProvisionalElements()).length;n>t;t++)e=r[t],o.push(document.head.removeChild(e));return o},o.prototype.copyNewHeadProvisionalElements=function(){var e,t,n,r,o;for(o=[],t=0,n=(r=this.getNewHeadProvisionalElements()).length;n>t;t++)e=r[t],o.push(document.head.appendChild(e));return o},o.prototype.relocateCurrentBodyPermanentElements=function(){var t,r,o,i,s,a,u;for(u=[],t=0,r=(a=this.getCurrentBodyPermanentElements()).length;r>t;t++)i=a[t],s=e(i),o=this.newSnapshot.getPermanentElementById(i.id),n(i,s.element),n(o,i),u.push(s);return u},o.prototype.replacePlaceholderElementsWithClonedPermanentElements=function(e){var t,r,o,i,s,a,u;for(u=[],o=0,i=e.length;i>o;o++)r=(a=e[o]).element,t=(s=a.permanentElement).cloneNode(!0),u.push(n(r,t));return u},o.prototype.activateNewBodyScriptElements=function(){var e,t,r,o,i,s;for(s=[],t=0,o=(i=this.getNewBodyScriptElements()).length;o>t;t++)r=i[t],e=this.createScriptElement(r),s.push(n(r,e));return s},o.prototype.assignNewBody=function(){return document.body=this.newBody},o.prototype.focusFirstAutofocusableElement=function(){var e;return null!=(e=this.newSnapshot.findFirstAutofocusableElement())?e.focus():void 0},o.prototype.getNewHeadStylesheetElements=function(){return this.newHeadDetails.getStylesheetElementsNotInDetails(this.currentHeadDetails)},o.prototype.getNewHeadScriptElements=function(){return this.newHeadDetails.getScriptElementsNotInDetails(this.currentHeadDetails)},o.prototype.getCurrentHeadProvisionalElements=function(){return this.currentHeadDetails.getProvisionalElements()},o.prototype.getNewHeadProvisionalElements=function(){return this.newHeadDetails.getProvisionalElements()},o.prototype.getCurrentBodyPermanentElements=function(){return this.currentSnapshot.getPermanentElementsPresentInSnapshot(this.newSnapshot)},o.prototype.getNewBodyScriptElements=function(){return this.newBody.querySelectorAll("script")},o}(t.Renderer),e=function(e){var t;return(t=document.createElement("meta")).setAttribute("name","turbolinks-permanent-placeholder"),t.setAttribute("content",e.id),{element:t,permanentElement:e}},n=function(e,t){var n;return(n=e.parentNode)?n.replaceChild(t,e):void 0}}.call(this),function(){var e=function(e,t){function r(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;t.ErrorRenderer=function(t){function n(e){var t;(t=document.createElement("html")).innerHTML=e,this.newHead=t.querySelector("head"),this.newBody=t.querySelector("body")}return e(n,t),n.prototype.render=function(e){return this.renderView((t=this,function(){return t.replaceHeadAndBody(),t.activateBodyScriptElements(),e()}));var t},n.prototype.replaceHeadAndBody=function(){var e,t;return t=document.head,e=document.body,t.parentNode.replaceChild(this.newHead,t),e.parentNode.replaceChild(this.newBody,e)},n.prototype.activateBodyScriptElements=function(){var e,t,n,r,o,i;for(i=[],t=0,n=(r=this.getScriptElements()).length;n>t;t++)o=r[t],e=this.createScriptElement(o),i.push(o.parentNode.replaceChild(e,o));return i},n.prototype.getScriptElements=function(){return document.documentElement.querySelectorAll("script")},n}(t.Renderer)}.call(this),function(){t.View=function(){function e(e){this.delegate=e,this.htmlElement=document.documentElement}return e.prototype.getRootLocation=function(){return this.getSnapshot().getRootLocation()},e.prototype.getElementForAnchor=function(e){return this.getSnapshot().getElementForAnchor(e)},e.prototype.getSnapshot=function(){return t.Snapshot.fromHTMLElement(this.htmlElement)},e.prototype.render=function(e,t){var n,r,o;return o=e.snapshot,n=e.error,r=e.isPreview,this.markAsPreview(r),null!=o?this.renderSnapshot(o,r,t):this.renderError(n,t)},e.prototype.markAsPreview=function(e){return e?this.htmlElement.setAttribute("data-turbolinks-preview",""):this.htmlElement.removeAttribute("data-turbolinks-preview")},e.prototype.renderSnapshot=function(e,n,r){return t.SnapshotRenderer.render(this.delegate,r,this.getSnapshot(),t.Snapshot.wrap(e),n)},e.prototype.renderError=function(e,n){return t.ErrorRenderer.render(this.delegate,n,e)},e}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};t.ScrollManager=function(){function n(n){this.delegate=n,this.onScroll=e(this.onScroll,this),this.onScroll=t.throttle(this.onScroll)}return n.prototype.start=function(){return this.started?void 0:(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)},n.prototype.stop=function(){return this.started?(removeEventListener("scroll",this.onScroll,!1),this.started=!1):void 0},n.prototype.scrollToElement=function(e){return e.scrollIntoView()},n.prototype.scrollToPosition=function(e){var t,n;return t=e.x,n=e.y,window.scrollTo(t,n)},n.prototype.onScroll=function(e){return this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},n.prototype.updatePosition=function(e){var t;return this.position=e,null!=(t=this.delegate)?t.scrollPositionChanged(this.position):void 0},n}()}.call(this),function(){t.SnapshotCache=function(){function e(e){this.size=e,this.keys=[],this.snapshots={}}var n;return e.prototype.has=function(e){var t;return(t=n(e))in this.snapshots},e.prototype.get=function(e){var t;if(this.has(e))return t=this.read(e),this.touch(e),t},e.prototype.put=function(e,t){return this.write(e,t),this.touch(e),t},e.prototype.read=function(e){var t;return t=n(e),this.snapshots[t]},e.prototype.write=function(e,t){var r;return r=n(e),this.snapshots[r]=t},e.prototype.touch=function(e){var t,r;return r=n(e),(t=this.keys.indexOf(r))>-1&&this.keys.splice(t,1),this.keys.unshift(r),this.trim()},e.prototype.trim=function(){var e,t,n,r,o;for(o=[],e=0,n=(r=this.keys.splice(this.size)).length;n>e;e++)t=r[e],o.push(delete this.snapshots[t]);return o},n=function(e){return t.Location.wrap(e).toCacheKey()},e}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};t.Visit=function(){function n(n,r,o){this.controller=n,this.action=o,this.performScroll=e(this.performScroll,this),this.identifier=t.uuid(),this.location=t.Location.wrap(r),this.adapter=this.controller.adapter,this.state="initialized",this.timingMetrics={}}var r;return n.prototype.start=function(){return"initialized"===this.state?(this.recordTimingMetric("visitStart"),this.state="started",this.adapter.visitStarted(this)):void 0},n.prototype.cancel=function(){var e;return"started"===this.state?(null!=(e=this.request)&&e.cancel(),this.cancelRender(),this.state="canceled"):void 0},n.prototype.complete=function(){var e;return"started"===this.state?(this.recordTimingMetric("visitEnd"),this.state="completed","function"==typeof(e=this.adapter).visitCompleted&&e.visitCompleted(this),this.controller.visitCompleted(this)):void 0},n.prototype.fail=function(){var e;return"started"===this.state?(this.state="failed","function"==typeof(e=this.adapter).visitFailed?e.visitFailed(this):void 0):void 0},n.prototype.changeHistory=function(){var e,t;return this.historyChanged?void 0:(e=this.location.isEqualTo(this.referrer)?"replace":this.action,t=r(e),this.controller[t](this.location,this.restorationIdentifier),this.historyChanged=!0)},n.prototype.issueRequest=function(){return this.shouldIssueRequest()&&null==this.request?(this.progress=0,this.request=new t.HttpRequest(this,this.location,this.referrer),this.request.send()):void 0},n.prototype.getCachedSnapshot=function(){var e;return!(e=this.controller.getCachedSnapshotForLocation(this.location))||null!=this.location.anchor&&!e.hasAnchor(this.location.anchor)||"restore"!==this.action&&!e.isPreviewable()?void 0:e},n.prototype.hasCachedSnapshot=function(){return null!=this.getCachedSnapshot()},n.prototype.loadCachedSnapshot=function(){var e,t;return(t=this.getCachedSnapshot())?(e=this.shouldIssueRequest(),this.render(function(){var n;return this.cacheSnapshot(),this.controller.render({snapshot:t,isPreview:e},this.performScroll),"function"==typeof(n=this.adapter).visitRendered&&n.visitRendered(this),e?void 0:this.complete()})):void 0},n.prototype.loadResponse=function(){return null!=this.response?this.render(function(){var e,t;return this.cacheSnapshot(),this.request.failed?(this.controller.render({error:this.response},this.performScroll),"function"==typeof(e=this.adapter).visitRendered&&e.visitRendered(this),this.fail()):(this.controller.render({snapshot:this.response},this.performScroll),"function"==typeof(t=this.adapter).visitRendered&&t.visitRendered(this),this.complete())}):void 0},n.prototype.followRedirect=function(){return this.redirectedToLocation&&!this.followedRedirect?(this.location=this.redirectedToLocation,this.controller.replaceHistoryWithLocationAndRestorationIdentifier(this.redirectedToLocation,this.restorationIdentifier),this.followedRedirect=!0):void 0},n.prototype.requestStarted=function(){var e;return this.recordTimingMetric("requestStart"),"function"==typeof(e=this.adapter).visitRequestStarted?e.visitRequestStarted(this):void 0},n.prototype.requestProgressed=function(e){var t;return this.progress=e,"function"==typeof(t=this.adapter).visitRequestProgressed?t.visitRequestProgressed(this):void 0},n.prototype.requestCompletedWithResponse=function(e,n){return this.response=e,null!=n&&(this.redirectedToLocation=t.Location.wrap(n)),this.adapter.visitRequestCompleted(this)},n.prototype.requestFailedWithStatusCode=function(e,t){return this.response=t,this.adapter.visitRequestFailedWithStatusCode(this,e)},n.prototype.requestFinished=function(){var e;return this.recordTimingMetric("requestEnd"),"function"==typeof(e=this.adapter).visitRequestFinished?e.visitRequestFinished(this):void 0},n.prototype.performScroll=function(){return this.scrolled?void 0:("restore"===this.action?this.scrollToRestoredPosition()||this.scrollToTop():this.scrollToAnchor()||this.scrollToTop(),this.scrolled=!0)},n.prototype.scrollToRestoredPosition=function(){var e,t;return null!=(e=null!=(t=this.restorationData)?t.scrollPosition:void 0)?(this.controller.scrollToPosition(e),!0):void 0},n.prototype.scrollToAnchor=function(){return null!=this.location.anchor?(this.controller.scrollToAnchor(this.location.anchor),!0):void 0},n.prototype.scrollToTop=function(){return this.controller.scrollToPosition({x:0,y:0})},n.prototype.recordTimingMetric=function(e){var t;return null!=(t=this.timingMetrics)[e]?t[e]:t[e]=(new Date).getTime()},n.prototype.getTimingMetrics=function(){return t.copyObject(this.timingMetrics)},r=function(e){switch(e){case"replace":return"replaceHistoryWithLocationAndRestorationIdentifier";case"advance":case"restore":return"pushHistoryWithLocationAndRestorationIdentifier"}},n.prototype.shouldIssueRequest=function(){return"restore"!==this.action||!this.hasCachedSnapshot()},n.prototype.cacheSnapshot=function(){return this.snapshotCached?void 0:(this.controller.cacheSnapshot(),this.snapshotCached=!0)},n.prototype.render=function(e){return this.cancelRender(),this.frame=requestAnimationFrame((t=this,function(){return t.frame=null,e.call(t)}));var t},n.prototype.cancelRender=function(){return this.frame?cancelAnimationFrame(this.frame):void 0},n}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};t.Controller=function(){function n(){this.clickBubbled=e(this.clickBubbled,this),this.clickCaptured=e(this.clickCaptured,this),this.pageLoaded=e(this.pageLoaded,this),this.history=new t.History(this),this.view=new t.View(this),this.scrollManager=new t.ScrollManager(this),this.restorationData={},this.clearCache(),this.setProgressBarDelay(500)}return n.prototype.start=function(){return t.supported&&!this.started?(addEventListener("click",this.clickCaptured,!0),addEventListener("DOMContentLoaded",this.pageLoaded,!1),this.scrollManager.start(),this.startHistory(),this.started=!0,this.enabled=!0):void 0},n.prototype.disable=function(){return this.enabled=!1},n.prototype.stop=function(){return this.started?(removeEventListener("click",this.clickCaptured,!0),removeEventListener("DOMContentLoaded",this.pageLoaded,!1),this.scrollManager.stop(),this.stopHistory(),this.started=!1):void 0},n.prototype.clearCache=function(){return this.cache=new t.SnapshotCache(10)},n.prototype.visit=function(e,n){var r,o;return null==n&&(n={}),e=t.Location.wrap(e),this.applicationAllowsVisitingLocation(e)?this.locationIsVisitable(e)?(r=null!=(o=n.action)?o:"advance",this.adapter.visitProposedToLocationWithAction(e,r)):window.location=e:void 0},n.prototype.startVisitToLocationWithAction=function(e,n,r){var o;return t.supported?(o=this.getRestorationDataForIdentifier(r),this.startVisit(e,n,{restorationData:o})):window.location=e},n.prototype.setProgressBarDelay=function(e){return this.progressBarDelay=e},n.prototype.startHistory=function(){return this.location=t.Location.wrap(window.location),this.restorationIdentifier=t.uuid(),this.history.start(),this.history.replace(this.location,this.restorationIdentifier)},n.prototype.stopHistory=function(){return this.history.stop()},n.prototype.pushHistoryWithLocationAndRestorationIdentifier=function(e,n){return this.restorationIdentifier=n,this.location=t.Location.wrap(e),this.history.push(this.location,this.restorationIdentifier)},n.prototype.replaceHistoryWithLocationAndRestorationIdentifier=function(e,n){return this.restorationIdentifier=n,this.location=t.Location.wrap(e),this.history.replace(this.location,this.restorationIdentifier)},n.prototype.historyPoppedToLocationWithRestorationIdentifier=function(e,n){var r;return this.restorationIdentifier=n,this.enabled?(r=this.getRestorationDataForIdentifier(this.restorationIdentifier),this.startVisit(e,"restore",{restorationIdentifier:this.restorationIdentifier,restorationData:r,historyChanged:!0}),this.location=t.Location.wrap(e)):this.adapter.pageInvalidated()},n.prototype.getCachedSnapshotForLocation=function(e){var t;return null!=(t=this.cache.get(e))?t.clone():void 0},n.prototype.shouldCacheSnapshot=function(){return this.view.getSnapshot().isCacheable()},n.prototype.cacheSnapshot=function(){var e,n;return this.shouldCacheSnapshot()?(this.notifyApplicationBeforeCachingSnapshot(),n=this.view.getSnapshot(),e=this.lastRenderedLocation,t.defer(function(t){return function(){return t.cache.put(e,n.clone())}}(this))):void 0},n.prototype.scrollToAnchor=function(e){var t;return(t=this.view.getElementForAnchor(e))?this.scrollToElement(t):this.scrollToPosition({x:0,y:0})},n.prototype.scrollToElement=function(e){return this.scrollManager.scrollToElement(e)},n.prototype.scrollToPosition=function(e){return this.scrollManager.scrollToPosition(e)},n.prototype.scrollPositionChanged=function(e){var t;return(t=this.getCurrentRestorationData()).scrollPosition=e},n.prototype.render=function(e,t){return this.view.render(e,t)},n.prototype.viewInvalidated=function(){return this.adapter.pageInvalidated()},n.prototype.viewWillRender=function(e){return this.notifyApplicationBeforeRender(e)},n.prototype.viewRendered=function(){return this.lastRenderedLocation=this.currentVisit.location,this.notifyApplicationAfterRender()},n.prototype.pageLoaded=function(){return this.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()},n.prototype.clickCaptured=function(){return removeEventListener("click",this.clickBubbled,!1),addEventListener("click",this.clickBubbled,!1)},n.prototype.clickBubbled=function(e){var t,n,r;return this.enabled&&this.clickEventIsSignificant(e)&&(n=this.getVisitableLinkForNode(e.target))&&(r=this.getVisitableLocationForLink(n))&&this.applicationAllowsFollowingLinkToLocation(n,r)?(e.preventDefault(),t=this.getActionForLink(n),this.visit(r,{action:t})):void 0},n.prototype.applicationAllowsFollowingLinkToLocation=function(e,t){var n;return!(n=this.notifyApplicationAfterClickingLinkToLocation(e,t)).defaultPrevented},n.prototype.applicationAllowsVisitingLocation=function(e){var t;return!(t=this.notifyApplicationBeforeVisitingLocation(e)).defaultPrevented},n.prototype.notifyApplicationAfterClickingLinkToLocation=function(e,n){return t.dispatch("turbolinks:click",{target:e,data:{url:n.absoluteURL},cancelable:!0})},n.prototype.notifyApplicationBeforeVisitingLocation=function(e){return t.dispatch("turbolinks:before-visit",{data:{url:e.absoluteURL},cancelable:!0})},n.prototype.notifyApplicationAfterVisitingLocation=function(e){return t.dispatch("turbolinks:visit",{data:{url:e.absoluteURL}})},n.prototype.notifyApplicationBeforeCachingSnapshot=function(){return t.dispatch("turbolinks:before-cache")},n.prototype.notifyApplicationBeforeRender=function(e){return t.dispatch("turbolinks:before-render",{data:{newBody:e}})},n.prototype.notifyApplicationAfterRender=function(){return t.dispatch("turbolinks:render")},n.prototype.notifyApplicationAfterPageLoad=function(e){return null==e&&(e={}),t.dispatch("turbolinks:load",{data:{url:this.location.absoluteURL,timing:e}})},
n.prototype.startVisit=function(e,t,n){var r;return null!=(r=this.currentVisit)&&r.cancel(),this.currentVisit=this.createVisit(e,t,n),this.currentVisit.start(),this.notifyApplicationAfterVisitingLocation(e)},n.prototype.createVisit=function(e,n,r){var o,i,s,a,u;return a=(i=null!=r?r:{}).restorationIdentifier,s=i.restorationData,o=i.historyChanged,(u=new t.Visit(this,e,n)).restorationIdentifier=null!=a?a:t.uuid(),u.restorationData=t.copyObject(s),u.historyChanged=o,u.referrer=this.location,u},n.prototype.visitCompleted=function(e){return this.notifyApplicationAfterPageLoad(e.getTimingMetrics())},n.prototype.clickEventIsSignificant=function(e){return!(e.defaultPrevented||e.target.isContentEditable||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)},n.prototype.getVisitableLinkForNode=function(e){return this.nodeIsVisitable(e)?t.closest(e,"a[href]:not([target]):not([download])"):void 0},n.prototype.getVisitableLocationForLink=function(e){var n;return n=new t.Location(e.getAttribute("href")),this.locationIsVisitable(n)?n:void 0},n.prototype.getActionForLink=function(e){var t;return null!=(t=e.getAttribute("data-turbolinks-action"))?t:"advance"},n.prototype.nodeIsVisitable=function(e){var n;return!(n=t.closest(e,"[data-turbolinks]"))||"false"!==n.getAttribute("data-turbolinks")},n.prototype.locationIsVisitable=function(e){return e.isPrefixedBy(this.view.getRootLocation())&&e.isHTML()},n.prototype.getCurrentRestorationData=function(){return this.getRestorationDataForIdentifier(this.restorationIdentifier)},n.prototype.getRestorationDataForIdentifier=function(e){var t;return null!=(t=this.restorationData)[e]?t[e]:t[e]={}},n}()}.call(this),function(){!function(){var e,t;if((e=t=document.currentScript)&&!t.hasAttribute("data-turbolinks-suppress-warning"))for(;e=e.parentNode;)if(e===document.body)return console.warn("You are loading Turbolinks from a <script> element inside the <body> element. This is probably not what you meant to do!\n\nLoad your application\u2019s JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.\n\nFor more information, see: https://github.com/turbolinks/turbolinks#working-with-script-elements\n\n\u2014\u2014\nSuppress this warning by adding a `data-turbolinks-suppress-warning` attribute to: %s",t.outerHTML)}()}.call(this),function(){var e,n,r;t.start=function(){return n()?(null==t.controller&&(t.controller=e()),t.controller.start()):void 0},n=function(){return null==window.Turbolinks&&(window.Turbolinks=t),r()},e=function(){var e;return(e=new t.Controller).adapter=new t.BrowserAdapter(e),e},(r=function(){return window.Turbolinks===t})()&&t.start()}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd&&define(t)}.call(this),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).IMask=t()}(this,function(){"use strict";function e(e,t){return e(t={exports:{}},t.exports),t.exports}function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){i(e,t,n[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function n(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){if(null==e)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],t.indexOf(o)>=0||(n[o]=e[o]);return n}function h(e,t){if(null==e)return{};var n=d(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?p(e):t}function m(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}function g(e,t,n){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function r(e,t,n){var r=m(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function y(e,t,n,r){return(y="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function o(e,t,n,r){var o=m(e,t),s;if(o){if((s=Object.getOwnPropertyDescriptor(o,t)).set)return s.set.call(r,n),!0;if(!s.writable)return!1}if(s=Object.getOwnPropertyDescriptor(r,t)){if(!s.writable)return!1;s.value=n,Object.defineProperty(r,t,s)}else i(r,t,n);return!0})(e,t,n,r)}function v(e,t,n,r,o){var i;if(!y(e,t,n,r||e)&&o)throw new Error("failed to set property");return n}function w(e,t){return b(e)||k(e,t)||S()}function b(e){if(Array.isArray(e))return e}function k(e,t){var n=[],r=!0,o=!1,i=undefined;try{for(var s=e[Symbol.iterator](),a;!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){o=!0,i=u}finally{try{r||null==s["return"]||s["return"]()}finally{if(o)throw i}}return n}function S(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _(e){return"string"==typeof e||e instanceof String}function E(e){switch(e){case kt.LEFT:return kt.FORCE_LEFT;case kt.RIGHT:return kt.FORCE_RIGHT;default:return e}}function A(e){return e.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}function C(e,n){if(n===e)return!0;var r=Array.isArray(n),o=Array.isArray(e),i;if(r&&o){if(n.length!=e.length)return!1;for(i=0;i<n.length;i++)if(!C(n[i],e[i]))return!1;return!0}if(r!=o)return!1;if(n&&e&&"object"===t(n)&&"object"===t(e)){var s=n instanceof Date,a=e instanceof Date;if(s&&a)return n.getTime()==e.getTime();if(s!=a)return!1;var u=n instanceof RegExp,l=e instanceof RegExp;if(u&&l)return n.toString()==e.toString();if(u!=l)return!1;var c=Object.keys(n);for(i=0;i<c.length;i++)if(!Object.prototype.hasOwnProperty.call(e,c[i]))return!1;for(i=0;i<c.length;i++)if(!C(e[c[i]],n[c[i]]))return!1;return!0}return!(!n||!e||"function"!=typeof n||"function"!=typeof e)&&n.toString()===e.toString()}function L(e){if(null==e)throw new Error("mask property should be defined");return e instanceof RegExp?St.IMask.MaskedRegExp:_(e)?St.IMask.MaskedPattern:e instanceof Date||e===Date?St.IMask.MaskedDate:e instanceof Number||"number"==typeof e||e===Number?St.IMask.MaskedNumber:Array.isArray(e)||e===Array?St.IMask.MaskedDynamic:e.prototype instanceof St.IMask.Masked?e:e instanceof Function?St.IMask.MaskedFunction:(console.warn("Mask not found for mask",e),St.IMask.Masked)}function M(e){var t=(e=a({},e)).mask,n;return t instanceof St.IMask.Masked?t:new(L(t))(e)}function T(e){if(!e)return!1;var t=e.value;return!t||e.nearestInputPos(0,kt.NONE)!==t.length}function q(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return new It(e,t)}var x="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},P="object",R=function(e){return e&&e.Math==Math&&e},F=R(typeof globalThis==P&&globalThis)||R(typeof window==P&&window)||R(typeof self==P&&self)||R(typeof x==P&&x)||Function("return this")(),D=function(e){try{return!!e()}catch(t){return!0}},I=!D(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),B={}.propertyIsEnumerable,O=Object.getOwnPropertyDescriptor,N,H,j={f:O&&!B.call({1:2},1)?function Ut(e){var t=O(this,e);return!!t&&t.enumerable}:B},U=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},V={}.toString,Q=function(e){return V.call(e).slice(8,-1)},W="".split,z=D(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==Q(e)?W.call(e,""):Object(e)}:Object,G=function(e){if(e==undefined)throw TypeError("Can't call method on "+e);return e},Y=function(e){return z(G(e))},$=function(e){return"object"==typeof e?null!==e:"function"==typeof e},K=function(e,t){if(!$(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!$(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!$(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!$(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},J={}.hasOwnProperty,X=function(e,t){return J.call(e,t)},Z=F.document,ee=$(Z)&&$(Z.createElement),te=function(e){return ee?Z.createElement(e):{}},ne=!I&&!D(function(){return 7!=Object.defineProperty(te("div"),"a",{get:function(){return 7}}).a}),re=Object.getOwnPropertyDescriptor,oe,ie={f:I?re:function Vt(e,t){if(e=Y(e),t=K(t,!0),ne)try{return re(e,t)}catch(n){}if(X(e,t))return U(!j.f.call(e,t),e[t])}},se=function(e){if(!$(e))throw TypeError(String(e)+" is not an object");return e},ae=Object.defineProperty,ue,le={f:I?ae:function Qt(e,t,n){if(se(e),t=K(t,!0),se(n),ne)try{return ae(e,t,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},ce=I?function(e,t,n){return le.f(e,t,U(1,n))}:function(e,t,n){return e[t]=n,e},de=function(e,t){try{ce(F,e,t)}catch(n){F[e]=t}return t},he=e(function(e){var t="__core-js_shared__",n=F[t]||de(t,{});(e.exports=function(e,t){return n[e]||(n[e]=t!==undefined?t:{})})("versions",[]).push({version:"3.1.3",mode:"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})}),pe=he("native-function-to-string",Function.toString),fe=F.WeakMap,me="function"==typeof fe&&/native code/.test(pe.call(fe)),ge=0,ye=Math.random(),ve=function(e){return"Symbol("+String(e===undefined?"":e)+")_"+(++ge+ye).toString(36)},we=he("keys"),be=function(e){return we[e]||(we[e]=ve(e))},ke={},Se=F.WeakMap,_e,Ee,Ae,Ce=function(e){return Ae(e)?Ee(e):_e(e,{})},Le=function(e){return function(t){var n;if(!$(t)||(n=Ee(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}};if(me){var Me=new Se,Te=Me.get,qe=Me.has,xe=Me.set;_e=function(e,t){return xe.call(Me,e,t),t},Ee=function(e){return Te.call(Me,e)||{}},Ae=function(e){return qe.call(Me,e)}}else{var Pe=be("state");ke[Pe]=!0,_e=function(e,t){return ce(e,Pe,t),t},Ee=function(e){return X(e,Pe)?e[Pe]:{}},Ae=function(e){return X(e,Pe)}}var Re={set:_e,get:Ee,has:Ae,enforce:Ce,getterFor:Le},Fe=e(function(e){var t=Re.get,n=Re.enforce,r=String(pe).split("toString");he("inspectSource",function(e){return pe.call(e)}),(e.exports=function(e,t,o,i){var s=!!i&&!!i.unsafe,a=!!i&&!!i.enumerable,u=!!i&&!!i.noTargetGet;"function"==typeof o&&("string"!=typeof t||X(o,"name")||ce(o,"name",t),n(o).source=r.join("string"==typeof t?t:"")),e!==F?(s?!u&&e[t]&&(a=!0):delete e[t],a?e[t]=o:ce(e,t,o)):a?e[t]=o:de(t,o)})(Function.prototype,"toString",function o(){return"function"==typeof this&&t(this).source||pe.call(this)})}),De=F,Ie=function(e){return"function"==typeof e?e:undefined},Be=function(e,t){return arguments.length<2?Ie(De[e])||Ie(F[e]):De[e]&&De[e][t]||F[e]&&F[e][t]},Oe=Math.ceil,Ne=Math.floor,He=function(e){return isNaN(e=+e)?0:(e>0?Ne:Oe)(e)},je=Math.min,Ue=function(e){return e>0?je(He(e),9007199254740991):0},Ve=Math.max,Qe=Math.min,We=function(e,t){var n=He(e);return n<0?Ve(n+t,0):Qe(n,t)},ze=function(e){return function(t,n,r){var o=Y(t),i=Ue(o.length),s=We(r,i),a;if(e&&n!=n){for(;i>s;)if((a=o[s++])!=a)return!0}else for(;i>s;s++)if((e||s in o)&&o[s]===n)return e||s||0;return!e&&-1}},Ge,Ye={includes:ze(!0),indexOf:ze(!1)}.indexOf,$e=function(e,t){var n=Y(e),r=0,o=[],i;for(i in n)!X(ke,i)&&X(n,i)&&o.push(i);for(;t.length>r;)X(n,i=t[r++])&&(~Ye(o,i)||o.push(i));return o},Ke,Je=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"].concat("length","prototype"),Xe,Ze={f:Object.getOwnPropertyNames||function Wt(e){return $e(e,Je)}},et,tt={f:Object.getOwnPropertySymbols},nt=Be("Reflect","ownKeys")||function zt(e){var t=Ze.f(se(e)),n=tt.f;return n?t.concat(n(e)):t},rt=function(e,t){for(var n=nt(t),r=le.f,o=ie.f,i=0;i<n.length;i++){var s=n[i];X(e,s)||r(e,s,o(t,s))}},ot=/#|\.prototype\./,it=function(e,t){var n=at[st(e)];return n==lt||n!=ut&&("function"==typeof t?D(t):!!t)},st=it.normalize=function(e){return String(e).replace(ot,".").toLowerCase()},at=it.data={},ut=it.NATIVE="N",lt=it.POLYFILL="P",ct=it,dt=ie.f,ht=function(e,t){var n=e.target,r=e.global,o=e.stat,i,s,a,u,l,c;if(s=r?F:o?F[n]||de(n,{}):(F[n]||{}).prototype)for(a in t){if(l=t[a],u=e.noTargetGet?(c=dt(s,a))&&c.value:s[a],!(i=ct(r?a:n+(o?".":"#")+a,e.forced))&&u!==undefined){if(typeof l==typeof u)continue;rt(l,u)}(e.sham||u&&u.sham)&&ce(l,"sham",!0),Fe(s,a,l,e)}},pt="".repeat||function Gt(e){var t=String(G(this)),n="",r=He(e);if(r<0||r==Infinity)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n},ft=Math.ceil,mt=function(e){return function(t,n,r){var o=String(G(t)),i=o.length,s=r===undefined?" ":String(r),a=Ue(n),u,l;return a<=i||""==s?o:(u=a-i,(l=pt.call(s,ft(u/s.length))).length>u&&(l=l.slice(0,u)),e?o+l:l+o)}},gt={start:mt(!1),end:mt(!0)},yt=Be("navigator","userAgent")||"",vt=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(yt),wt=gt.end;ht({target:"String",proto:!0,forced:vt},{padEnd:function Yt(e){return wt(this,e,arguments.length>1?arguments[1]:undefined)}});var bt=gt.start;ht({target:"String",proto:!0,forced:vt},{padStart:function $t(e){return bt(this,e,arguments.length>1?arguments[1]:undefined)}}),ht({target:"String",proto:!0},{repeat:pt});var kt={NONE:"NONE",LEFT:"LEFT",FORCE_LEFT:"FORCE_LEFT",RIGHT:"RIGHT",FORCE_RIGHT:"FORCE_RIGHT"},St="undefined"!=typeof window&&window||"undefined"!=typeof global&&global.global===global&&global||"undefined"!=typeof self&&self.self===self&&self||{},_t=function(){function e(t,r,o,i){for(n(this,e),this.value=t,this.cursorPos=r,this.oldValue=o,this.oldSelection=i;this.value.slice(0,this.startChangePos)!==this.oldValue.slice(0,this.startChangePos);)--this.oldSelection.start}return o(e,[{key:"startChangePos",get:function t(){return Math.min(this.cursorPos,this.oldSelection.start)}},{key:"insertedCount",get:function r(){return this.cursorPos-this.startChangePos}},{key:"inserted",get:function i(){return this.value.substr(this.startChangePos,this.insertedCount)}},{key:"removedCount",get:function s(){return Math.max(this.oldSelection.end-this.startChangePos||this.oldValue.length-this.value.length,0)}},{key:"removed",get:function a(){return this.oldValue.substr(this.startChangePos,this.removedCount)}},{key:"head",get:function u(){return this.value.substring(0,this.startChangePos)}},{key:"tail",get:function l(){return this.value.substring(this.startChangePos+this.insertedCount)}},{key:"removeDirection",get:function c(){return!this.removedCount||this.insertedCount?kt.NONE:this.oldSelection.end===this.cursorPos||this.oldSelection.start===this.cursorPos?kt.RIGHT:kt.LEFT}}]),e}(),Et=function(){function e(t){n(this,e),s(this,{inserted:"",rawInserted:"",skip:!1,tailShift:0},t)}return o(e,[{key:"aggregate",value:function t(e){return this.rawInserted+=e.rawInserted,this.skip=this.skip||e.skip,this.inserted+=e.inserted,this.tailShift+=e.tailShift,this}},{key:"offset",get:function r(){return this.tailShift+this.inserted.length}}]),e}(),At=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"",r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,o=arguments.length>2?arguments[2]:undefined;n(this,e),this.value=t,this.from=r,this.stop=o}return o(e,[{key:"toString",value:function t(){return this.value}},{key:"extend",value:function r(e){this.value+=String(e)}},{key:"appendTo",value:function i(e){return e.append(this.toString(),{tail:!0}).aggregate(e._appendPlaceholder())}},{key:"shiftBefore",value:function a(e){if(this.from>=e||!this.value.length)return"";var t=this.value[0];return this.value=this.value.slice(1),t}},{key:"state",get:function u(){return{value:this.value,from:this.from,stop:this.stop}},set:function l(e){s(this,e)}}]),e}(),Ct=function(){function e(t){n(this,e),this._value="",this._update(t),this.isInitialized=!0}return o(e,[{key:"updateOptions",value:function t(e){Object.keys(e).length&&this.withValueRefresh(this._update.bind(this,e))}},{key:"_update",value:function r(e){s(this,e)}},{key:"reset",value:function i(){this._value=""}},{key:"resolve",value:function a(e){return this.reset(),this.append(e,{input:!0},""),this.doCommit(),this.value}},{key:"nearestInputPos",value:function u(e,t){return e}},{key:"extractInput",value:function l(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.value.length;return this.value.slice(e,t)}},{key:"extractTail",value:function c(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.value.length;return new At(this.extractInput(e,t),e)}},{key:"appendTail",value:function d(e){return _(e)&&(e=new At(String(e))),e.appendTo(this)}},{key:"_appendCharRaw",value:function h(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return(e=this.doPrepare(e,t))?(this._value+=e,new Et({inserted:e,rawInserted:e})):new Et}},{key:"_appendChar",value:function p(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=arguments.length>2?arguments[2]:undefined,r=this.state,o=this._appendCharRaw(e,t);if(o.inserted){var i,s=!1!==this.doValidate(t);if(s&&null!=n){var a=this.state;this.overwrite&&(i=n.state,n.shiftBefore(this.value.length));var u=this.appendTail(n);(s=u.rawInserted===n.toString())&&u.inserted&&(this.state=a)}s||(o.rawInserted=o.inserted="",this.state=r,n&&i&&(n.state=i))}return o}},{key:"_appendPlaceholder",value:function f(){return new Et}},{key:"append",value:function m(e,t,n){if(!_(e))throw new Error("value should be string");var r=new Et,o=_(n)?new At(String(n)):n;t.tail&&(t._beforeTailState=this.state);for(var i=0;i<e.length;++i)r.aggregate(this._appendChar(e[i],t,o));return null!=o&&(r.tailShift+=this.appendTail(o).tailShift),r}},{key:"remove",value:function g(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.value.length;return this._value=this.value.slice(0,e)+this.value.slice(t),new Et}},{key:"withValueRefresh",value:function y(e){if(this._refreshing||!this.isInitialized)return e();this._refreshing=!0;var t=this.unmaskedValue,n=this.value,r=e();return this.resolve(n)!==n&&(this.unmaskedValue=t),delete this._refreshing,r}},{key:"doPrepare",value:function v(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return this.prepare?this.prepare(e,this,t):e}},{key:"doValidate",value:function w(e){return(!this.validate||this.validate(this.value,this,e))&&(!this.parent||this.parent.doValidate(e))}},{key:"doCommit",value:function b(){this.commit&&this.commit(this.value,this)}},{key:"splice",value:function k(e,t,n,r){var o=e+t,i=this.extractTail(o),s=this.nearestInputPos(e,r),a;return new Et({tailShift:s-e}).aggregate(this.remove(s)).aggregate(this.append(n,{input:!0},i))}},{key:"state",get:function S(){return{_value:this.value}},set:function E(e){this._value=e._value}},{key:"value",get:function A(){return this._value},set:function C(e){this.resolve(e)}},{key:"unmaskedValue",get:function L(){return this.value},set:function M(e){this.reset(),this.append(e,{},""),this.doCommit()}},{key:"typedValue",get:function T(){return this.unmaskedValue},set:function q(e){this.unmaskedValue=e}},{key:"rawInputValue",get:function x(){return this.extractInput(0,this.value.length,{raw:!0})},set:function P(e){this.reset(),this.append(e,{raw:!0},""),this.doCommit()}},{key:"isComplete",get:function R(){return!0}}]),e}(),Lt={0:/\d/,a:/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,"*":/./},Mt=function(){function e(t){n(this,e);var r=t.mask,o=h(t,["mask"]);this.masked=M({mask:r}),s(this,o)}return o(e,[{key:"reset",value:function t(){this._isFilled=!1,this.masked.reset()}},{key:"remove",value:function r(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.value.length;return 0===e&&t>=1?(this._isFilled=!1,this.masked.remove(e,t)):new Et}},{key:"_appendChar",value:function i(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(this._isFilled)return new Et;var n=this.masked.state,r=this.masked._appendChar(e,t);return r.inserted&&!1===this.doValidate(t)&&(r.inserted=r.rawInserted="",this.masked.state=n),r.inserted||this.isOptional||this.lazy||t.input||(r.inserted=this.placeholderChar),r.skip=!r.inserted&&!this.isOptional,this._isFilled=Boolean(r.inserted),r}},{key:"append",value:function a(){var e;return(e=this.masked).append.apply(e,arguments)}},{key:"_appendPlaceholder",value:function u(){var e=new Et;return this._isFilled||this.isOptional?e:(this._isFilled=!0,e.inserted=this.placeholderChar,e)}},{key:"extractTail",value:function l(){var e;return(e=this.masked).extractTail.apply(e,arguments)}},{key:"appendTail",value:function c(){var e;return(e=this.masked).appendTail.apply(e,arguments)}},{key:"extractInput",value:function d(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.value.length,n=arguments.length>2?arguments[2]:undefined;return this.masked.extractInput(e,t,n)}},{key:"nearestInputPos",value:function p(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:kt.NONE,n=0,r=this.value.length,o=Math.min(Math.max(e,n),r);switch(t){case kt.LEFT:case kt.FORCE_LEFT:return this.isComplete?o:n;case kt.RIGHT:case kt.FORCE_RIGHT:return this.isComplete?o:r;case kt.NONE:default:return o}}},{key:"doValidate",value:function f(){var e,t;return(e=this.masked).doValidate.apply(e,arguments)&&(!this.parent||(t=this.parent).doValidate.apply(t,arguments))}},{key:"doCommit",value:function m(){this.masked.doCommit()}},{key:"value",get:function g(){return this.masked.value||(this._isFilled&&!this.isOptional?this.placeholderChar:"")}},{key:"unmaskedValue",get:function y(){return this.masked.unmaskedValue}},{key:"isComplete",get:function v(){return Boolean(this.masked.value)||this.isOptional}},{key:"state",get:function w(){return{masked:this.masked.state,_isFilled:this._isFilled}},set:function b(e){this.masked.state=e.masked,this._isFilled=e._isFilled}}]),e}(),Tt=function(){function e(t){n(this,e),s(this,t),this._value=""}return o(e,[{key:"reset",value:function t(){this._isRawInput=!1,this._value=""}},{key:"remove",value:function r(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this._value.length;return this._value=this._value.slice(0,e)+this._value.slice(t),this._value||(this._isRawInput=!1),new Et}},{key:"nearestInputPos",value:function i(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:kt.NONE,n=0,r=this._value.length;switch(t){case kt.LEFT:case kt.FORCE_LEFT:return n;case kt.NONE:case kt.RIGHT:case kt.FORCE_RIGHT:default:return r}}},{key:"extractInput",value:function a(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this._value.length,n;return(arguments.length>2&&arguments[2]!==undefined?arguments[2]:{}).raw&&this._isRawInput&&this._value.slice(e,t)||""}},{key:"_appendChar",value:function u(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=new Et;if(this._value)return n;var r,o=this.char===e[0]&&(this.isUnmasking||t.input||t.raw)&&!t.tail;return o&&(n.rawInserted=this.char),this._value=n.inserted=this.char,this._isRawInput=o&&(t.raw||t.input),n}},{key:"_appendPlaceholder",value:function l(){var e=new Et;return this._value?e:(this._value=e.inserted=this.char,e)}},{key:"extractTail",value:function c(){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.value.length;return new At("")}},{key:"appendTail",value:function d(e){return _(e)&&(e=new At(String(e))),e.appendTo(this)}},{key:"append",value:function h(e,t,n){var r=this._appendChar(e,t);return null!=n&&(r.tailShift+=this.appendTail(n).tailShift),r}},{key:"doCommit",value:function p(){}},{key:"value",get:function f(){return this._value}},{key:"unmaskedValue",get:function m(){return this.isUnmasking?this.value:""}},{key:"isComplete",get:function g(){return!0}},{key:"state",get:function y(){return{_value:this._value,_isRawInput:this._isRawInput}},set:function v(e){s(this,e)}}]),e}(),qt=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[],r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;n(this,e),this.chunks=t,this.from=r}return o(e,[{key:"toString",value:function t(){return this.chunks.map(String).join("")}},{key:"extend",value:function r(t){if(String(t)){_(t)&&(t=new At(String(t)));var n=this.chunks[this.chunks.length-1],r=n&&(n.stop===t.stop||null==t.stop)&&t.from===n.from+n.toString().length;if(t instanceof At)r?n.extend(t.toString()):this.chunks.push(t);else if(t instanceof e){if(null==t.stop)for(var o;t.chunks.length&&null==t.chunks[0].stop;)(o=t.chunks.shift()).from+=t.from,this.extend(o);t.toString()&&(t.stop=t.blockIndex,this.chunks.push(t))}}}},{key:"appendTo",value:function i(t){var n;if(!(t instanceof St.IMask.MaskedPattern))return new At(this.toString()).appendTo(t);for(var r=new Et,o=0;o<this.chunks.length&&!r.skip;++o){var i=this.chunks[o],s=t._mapPosToBlock(t.value.length),a=i.stop,u=void 0;if(a&&(!s||s.index<=a)&&((i instanceof e||t._stops.indexOf(a)>=0)&&r.aggregate(t._appendPlaceholder(a)),u=i instanceof e&&t._blocks[a]),u){var l=u.appendTail(i);l.skip=!1,r.aggregate(l),t._value+=l.inserted;var c=i.toString().slice(l.rawInserted.length);c&&r.aggregate(t.append(c,{tail:!0}))}else r.aggregate(t.append(i.toString(),{tail:!0}))}return r}},{key:"shiftBefore",value:function a(e){if(this.from>=e||!this.chunks.length)return"";for(var t=e-this.from,n=0;n<this.chunks.length;){var r=this.chunks[n],o=r.shiftBefore(t);if(r.toString()){if(!o)break;++n}else this.chunks.splice(n,1);if(o)return o}return""}},{key:"state",get:function u(){return{chunks:this.chunks.map(function(e){return e.state}),from:this.from,stop:this.stop,blockIndex:this.blockIndex}},set:function l(t){var n=t.chunks,r;s(this,h(t,["chunks"])),this.chunks=n.map(function(t){var n="chunks"in t?new e:new At;return n.state=t,n})}}]),e}(),xt=function(e){function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return n(this,t),e.definitions=s({},Lt,e.definitions),f(this,l(t).call(this,a({},t.DEFAULTS,{},e)))}return u(t,e),o(t,[{key:"_update",value:function r(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};e.definitions=s({},this.definitions,e.definitions),g(l(t.prototype),"_update",this).call(this,e),this._rebuildMask()}},{key:"_rebuildMask",value:function i(){var e=this,n=this.definitions;this._blocks=[],this._stops=[],this._maskedBlocks={};var r=this.mask;if(r&&n)for(var o=!1,i=!1,s=0;s<r.length;++s){var u;if(this.blocks)if("continue"===function(){var t=r.slice(s),n=Object.keys(e.blocks).filter(function(e){return 0===t.indexOf(e)});n.sort(function(e,t){return t.length-e.length});var o=n[0];if(o){var i=M(a({parent:e,lazy:e.lazy,placeholderChar:e.placeholderChar},e.blocks[o]))
;return i&&(e._blocks.push(i),e._maskedBlocks[o]||(e._maskedBlocks[o]=[]),e._maskedBlocks[o].push(e._blocks.length-1)),s+=o.length-1,"continue"}}())continue;var l=r[s],c=l in n;if(l!==t.STOP_CHAR)if("{"!==l&&"}"!==l)if("["!==l&&"]"!==l){if(l===t.ESCAPE_CHAR){if(!(l=r[++s]))break;c=!1}var d=c?new Mt({parent:this,lazy:this.lazy,placeholderChar:this.placeholderChar,mask:n[l],isOptional:i}):new Tt({char:l,isUnmasking:o});this._blocks.push(d)}else i=!i;else o=!o;else this._stops.push(this._blocks.length)}}},{key:"reset",value:function c(){g(l(t.prototype),"reset",this).call(this),this._blocks.forEach(function(e){return e.reset()})}},{key:"doCommit",value:function d(){this._blocks.forEach(function(e){return e.doCommit()}),g(l(t.prototype),"doCommit",this).call(this)}},{key:"appendTail",value:function p(e){return g(l(t.prototype),"appendTail",this).call(this,e).aggregate(this._appendPlaceholder())}},{key:"_appendCharRaw",value:function m(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};e=this.doPrepare(e,t);var n=this._mapPosToBlock(this.value.length),r=new Et;if(!n)return r;for(var o=n.index;;++o){var i=this._blocks[o];if(!i)break;var s=i._appendChar(e,t),a=s.skip;if(r.aggregate(s),a||s.rawInserted)break}return r}},{key:"extractTail",value:function y(){var e=this,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.value.length,r=new qt;return t===n?r:(this._forEachBlocksInRange(t,n,function(t,n,o,i){var s=t.extractTail(o,i);s.stop=e._findStopBefore(n),s.from=e._blockStartPos(n),s instanceof qt&&(s.blockIndex=n),r.extend(s)}),r)}},{key:"extractInput",value:function w(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.value.length,n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(e===t)return"";var r="";return this._forEachBlocksInRange(e,t,function(e,t,o,i){r+=e.extractInput(o,i,n)}),r}},{key:"_findStopBefore",value:function b(e){for(var t,n=0;n<this._stops.length;++n){var r=this._stops[n];if(!(r<=e))break;t=r}return t}},{key:"_appendPlaceholder",value:function k(e){var t=this,n=new Et;if(this.lazy&&null==e)return n;var r=this._mapPosToBlock(this.value.length);if(!r)return n;var o=r.index,i=null!=e?e:this._blocks.length;return this._blocks.slice(o,i).forEach(function(r){if(!r.lazy||null!=e){var o=null!=r._blocks?[r._blocks.length]:[],i=r._appendPlaceholder.apply(r,o);t._value+=i.inserted,n.aggregate(i)}}),n}},{key:"_mapPosToBlock",value:function S(e){for(var t="",n=0;n<this._blocks.length;++n){var r=this._blocks[n],o=t.length;if(e<=(t+=r.value).length)return{index:n,offset:e-o}}}},{key:"_blockStartPos",value:function _(e){return this._blocks.slice(0,e).reduce(function(e,t){return e+t.value.length},0)}},{key:"_forEachBlocksInRange",value:function A(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.value.length,n=arguments.length>2?arguments[2]:undefined,r=this._mapPosToBlock(e);if(r){var o=this._mapPosToBlock(t),i=o&&r.index===o.index,s=r.offset,a=o&&i?o.offset:this._blocks[r.index].value.length;if(n(this._blocks[r.index],r.index,s,a),o&&!i){for(var u=r.index+1;u<o.index;++u)n(this._blocks[u],u,0,this._blocks[u].value.length);n(this._blocks[o.index],o.index,0,o.offset)}}}},{key:"remove",value:function C(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.value.length,r=g(l(t.prototype),"remove",this).call(this,e,n);return this._forEachBlocksInRange(e,n,function(e,t,n,o){r.aggregate(e.remove(n,o))}),r}},{key:"nearestInputPos",value:function L(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:kt.NONE,n=this._mapPosToBlock(e)||{index:0,offset:0},r=n.offset,o=n.index,i=this._blocks[o];if(!i)return e;var s=r;0!==s&&s<i.value.length&&(s=i.nearestInputPos(r,E(t)));var a=s===i.value.length,u;if(!(0===s)&&!a)return this._blockStartPos(o)+s;var l=a?o+1:o;if(t===kt.NONE){if(l>0){var c=l-1,d=this._blocks[c],h=d.nearestInputPos(0,kt.NONE);if(!d.value.length||h!==d.value.length)return this._blockStartPos(l)}for(var p,f=l;f<this._blocks.length;++f){var m=this._blocks[f],g=m.nearestInputPos(0,kt.NONE);if(g!==m.value.length)return this._blockStartPos(f)+g}for(var y=l-1;y>=0;--y){var v=this._blocks[y],w=v.nearestInputPos(0,kt.NONE);if(!v.value.length||w!==v.value.length)return this._blockStartPos(y)+v.value.length}return e}if(t===kt.LEFT||t===kt.FORCE_LEFT){for(var b,k=l;k<this._blocks.length;++k)if(this._blocks[k].value){b=k;break}if(null!=b){var S=this._blocks[b],_=S.nearestInputPos(0,kt.RIGHT);if(0===_&&S.unmaskedValue.length)return this._blockStartPos(b)+_}for(var A=-1,C,L=l-1;L>=0;--L){var M=this._blocks[L],q=M.nearestInputPos(M.value.length,kt.FORCE_LEFT);if(M.value&&0===q||(C=L),0!==q){if(q!==M.value.length)return this._blockStartPos(L)+q;A=L;break}}if(t===kt.LEFT)for(var x=A+1;x<=Math.min(l,this._blocks.length-1);++x){var P=this._blocks[x],R=P.nearestInputPos(0,kt.NONE),F=this._blockStartPos(x)+R;if(F>e)break;if(R!==P.value.length)return F}if(A>=0)return this._blockStartPos(A)+this._blocks[A].value.length;if(t===kt.FORCE_LEFT||this.lazy&&!this.extractInput()&&!T(this._blocks[l]))return 0;if(null!=C)return this._blockStartPos(C);for(var D=l;D<this._blocks.length;++D){var I=this._blocks[D],B=I.nearestInputPos(0,kt.NONE);if(!I.value.length||B!==I.value.length)return this._blockStartPos(D)+B}return 0}if(t===kt.RIGHT||t===kt.FORCE_RIGHT){for(var O,N,H=l;H<this._blocks.length;++H){var j=this._blocks[H],U=j.nearestInputPos(0,kt.NONE);if(U!==j.value.length){N=this._blockStartPos(H)+U,O=H;break}}if(null!=O&&null!=N){for(var V=O;V<this._blocks.length;++V){var Q=this._blocks[V],W=Q.nearestInputPos(0,kt.FORCE_RIGHT);if(W!==Q.value.length)return this._blockStartPos(V)+W}return t===kt.FORCE_RIGHT?this.value.length:N}for(var z=Math.min(l,this._blocks.length-1);z>=0;--z){var G=this._blocks[z],Y=G.nearestInputPos(G.value.length,kt.LEFT);if(0!==Y){var $=this._blockStartPos(z)+Y;if($>=e)return $;break}}}return e}},{key:"maskedBlock",value:function q(e){return this.maskedBlocks(e)[0]}},{key:"maskedBlocks",value:function x(e){var t=this,n=this._maskedBlocks[e];return n?n.map(function(e){return t._blocks[e]}):[]}},{key:"state",get:function P(){return a({},g(l(t.prototype),"state",this),{_blocks:this._blocks.map(function(e){return e.state})})},set:function R(e){var n=e._blocks,r=h(e,["_blocks"]);this._blocks.forEach(function(e,t){return e.state=n[t]}),v(l(t.prototype),"state",r,this,!0)}},{key:"isComplete",get:function F(){return this._blocks.every(function(e){return e.isComplete})}},{key:"unmaskedValue",get:function D(){return this._blocks.reduce(function(e,t){return e+t.unmaskedValue},"")},set:function I(e){v(l(t.prototype),"unmaskedValue",e,this,!0)}},{key:"value",get:function B(){return this._blocks.reduce(function(e,t){return e+t.value},"")},set:function O(e){v(l(t.prototype),"value",e,this,!0)}}]),t}(Ct);xt.DEFAULTS={lazy:!0,placeholderChar:"_"},xt.STOP_CHAR="`",xt.ESCAPE_CHAR="\\",xt.InputDefinition=Mt,xt.FixedDefinition=Tt;var Pt=function(e){function t(){return n(this,t),f(this,l(t).apply(this,arguments))}return u(t,e),o(t,[{key:"_update",value:function r(e){e=a({to:this.to||0,from:this.from||0},e);var n=String(e.to).length;null!=e.maxLength&&(n=Math.max(n,e.maxLength)),e.maxLength=n;for(var r=String(e.from).padStart(n,"0"),o=String(e.to).padStart(n,"0"),i=0;i<o.length&&o[i]===r[i];)++i;e.mask=o.slice(0,i).replace(/0/g,"\\0")+"0".repeat(n-i),g(l(t.prototype),"_update",this).call(this,e)}},{key:"boundaries",value:function i(e){var t="",n="",r,o=w(e.match(/^(\D*)(\d*)(\D*)/)||[],3),i=o[1],s=o[2];return s&&(t="0".repeat(i.length)+s,n="9".repeat(i.length)+s),[t=t.padEnd(this.maxLength,"0"),n=n.padEnd(this.maxLength,"9")]}},{key:"doPrepare",value:function s(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(e=g(l(t.prototype),"doPrepare",this).call(this,e,n).replace(/\D/g,""),!this.autofix)return e;for(var r=String(this.from).padStart(this.maxLength,"0"),o=String(this.to).padStart(this.maxLength,"0"),i=this.value,s="",a=0;a<e.length;++a){var u=i+s+e[a],c,d=w(this.boundaries(u),2),h=d[0],p=d[1];Number(p)<this.from?s+=r[u.length-1]:Number(h)>this.to?s+=o[u.length-1]:s+=e[a]}return s}},{key:"doValidate",value:function c(){var e,n=this.value,r;if(-1===n.search(/[^0]/)&&n.length<=this._matchFrom)return!0;for(var o,i=w(this.boundaries(n),2),s=i[0],a=i[1],u=arguments.length,c=new Array(u),d=0;d<u;d++)c[d]=arguments[d];return this.from<=Number(a)&&Number(s)<=this.to&&(e=g(l(t.prototype),"doValidate",this)).call.apply(e,[this].concat(c))}},{key:"_matchFrom",get:function d(){return this.maxLength-String(this.from).length}},{key:"isComplete",get:function h(){return g(l(t.prototype),"isComplete",this)&&Boolean(this.value)}}]),t}(xt),Rt=function(e){function t(e){return n(this,t),f(this,l(t).call(this,a({},t.DEFAULTS,{},e)))}return u(t,e),o(t,[{key:"_update",value:function r(e){e.mask===Date&&delete e.mask,e.pattern&&(e.mask=e.pattern);var n=e.blocks;e.blocks=s({},t.GET_DEFAULT_BLOCKS()),e.min&&(e.blocks.Y.from=e.min.getFullYear()),e.max&&(e.blocks.Y.to=e.max.getFullYear()),e.min&&e.max&&e.blocks.Y.from===e.blocks.Y.to&&(e.blocks.m.from=e.min.getMonth()+1,e.blocks.m.to=e.max.getMonth()+1,e.blocks.m.from===e.blocks.m.to&&(e.blocks.d.from=e.min.getDate(),e.blocks.d.to=e.max.getDate())),s(e.blocks,n),Object.keys(e.blocks).forEach(function(t){var n=e.blocks[t];"autofix"in n||(n.autofix=e.autofix)}),g(l(t.prototype),"_update",this).call(this,e)}},{key:"doValidate",value:function i(){for(var e,n=this.date,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=g(l(t.prototype),"doValidate",this)).call.apply(e,[this].concat(o))&&(!this.isComplete||this.isDateExist(this.value)&&null!=n&&(null==this.min||this.min<=n)&&(null==this.max||n<=this.max))}},{key:"isDateExist",value:function c(e){return this.format(this.parse(e))===e}},{key:"date",get:function d(){return this.isComplete?this.parse(this.value):null},set:function h(e){this.value=this.format(e)}},{key:"typedValue",get:function p(){return this.date},set:function m(e){this.date=e}}]),t}(xt);Rt.DEFAULTS={pattern:"d{.}`m{.}`Y",format:function Kt(e){var t,n,r;return[String(e.getDate()).padStart(2,"0"),String(e.getMonth()+1).padStart(2,"0"),e.getFullYear()].join(".")},parse:function Jt(e){var t,n=w(e.split("."),3),r=n[0],o=n[1],i=n[2];return new Date(i,o-1,r)}},Rt.GET_DEFAULT_BLOCKS=function(){return{d:{mask:Pt,from:1,to:31,maxLength:2},m:{mask:Pt,from:1,to:12,maxLength:2},Y:{mask:Pt,from:1900,to:9999}}};var Ft=function(){function e(){n(this,e)}return o(e,[{key:"select",value:function t(e,n){if(null!=e&&null!=n&&(e!==this.selectionStart||n!==this.selectionEnd))try{this._unsafeSelect(e,n)}catch(r){}}},{key:"_unsafeSelect",value:function r(e,t){}},{key:"bindEvents",value:function i(e){}},{key:"unbindEvents",value:function s(){}},{key:"selectionStart",get:function a(){var e;try{e=this._unsafeSelectionStart}catch(t){}return null!=e?e:this.value.length}},{key:"selectionEnd",get:function u(){var e;try{e=this._unsafeSelectionEnd}catch(t){}return null!=e?e:this.value.length}},{key:"isActive",get:function l(){return!1}}]),e}(),Dt=function(e){function t(e){var r;return n(this,t),(r=f(this,l(t).call(this))).input=e,r._handlers={},r}return u(t,e),o(t,[{key:"_unsafeSelect",value:function r(e,t){this.input.setSelectionRange(e,t)}},{key:"bindEvents",value:function i(e){var n=this;Object.keys(e).forEach(function(r){return n._toggleEventHandler(t.EVENTS_MAP[r],e[r])})}},{key:"unbindEvents",value:function s(){var e=this;Object.keys(this._handlers).forEach(function(t){return e._toggleEventHandler(t)})}},{key:"_toggleEventHandler",value:function a(e,t){this._handlers[e]&&(this.input.removeEventListener(e,this._handlers[e]),delete this._handlers[e]),t&&(this.input.addEventListener(e,t),this._handlers[e]=t)}},{key:"isActive",get:function c(){return this.input===document.activeElement}},{key:"_unsafeSelectionStart",get:function d(){return this.input.selectionStart}},{key:"_unsafeSelectionEnd",get:function h(){return this.input.selectionEnd}},{key:"value",get:function p(){return this.input.value},set:function m(e){this.input.value=e}}]),t}(Ft);Dt.EVENTS_MAP={selectionChange:"keydown",input:"input",drop:"drop",click:"click",focus:"focus",commit:"blur"};var It=function(){function e(t,r){n(this,e),this.el=t instanceof Ft?t:new Dt(t),this.masked=M(r),this._listeners={},this._value="",this._unmaskedValue="",this._saveSelection=this._saveSelection.bind(this),this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this),this._onDrop=this._onDrop.bind(this),this._onFocus=this._onFocus.bind(this),this.alignCursor=this.alignCursor.bind(this),this.alignCursorFriendly=this.alignCursorFriendly.bind(this),this._bindEvents(),this.updateValue(),this._onChange()}return o(e,[{key:"_bindEvents",value:function t(){this.el.bindEvents({selectionChange:this._saveSelection,input:this._onInput,drop:this._onDrop,click:this.alignCursorFriendly,focus:this._onFocus,commit:this._onChange})}},{key:"_unbindEvents",value:function r(){this.el.unbindEvents()}},{key:"_fireEvent",value:function i(e){var t=this._listeners[e];t&&t.forEach(function(e){return e()})}},{key:"_saveSelection",value:function s(){this.value!==this.el.value&&console.warn("Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly."),this._selection={start:this.selectionStart,end:this.cursorPos}}},{key:"updateValue",value:function a(){this.masked.value=this.el.value,this._value=this.masked.value}},{key:"updateControl",value:function u(){var e=this.masked.unmaskedValue,t=this.masked.value,n=this.unmaskedValue!==e||this.value!==t;this._unmaskedValue=e,this._value=t,this.el.value!==t&&(this.el.value=t),n&&this._fireChangeEvents()}},{key:"updateOptions",value:function l(e){var t=e.mask,n=h(e,["mask"]);this.mask=t,C(this.masked,n)||this.masked.updateOptions(n),this.updateControl()}},{key:"updateCursor",value:function c(e){null!=e&&(this.cursorPos=e,this._delayUpdateCursor(e))}},{key:"_delayUpdateCursor",value:function d(e){var t=this;this._abortUpdateCursor(),this._changingCursorPos=e,this._cursorChanging=setTimeout(function(){t.el&&(t.cursorPos=t._changingCursorPos,t._abortUpdateCursor())},10)}},{key:"_fireChangeEvents",value:function p(){this._fireEvent("accept"),this.masked.isComplete&&this._fireEvent("complete")}},{key:"_abortUpdateCursor",value:function f(){this._cursorChanging&&(clearTimeout(this._cursorChanging),delete this._cursorChanging)}},{key:"alignCursor",value:function m(){this.cursorPos=this.masked.nearestInputPos(this.cursorPos,kt.LEFT)}},{key:"alignCursorFriendly",value:function g(){this.selectionStart===this.cursorPos&&this.alignCursor()}},{key:"on",value:function y(e,t){return this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t),this}},{key:"off",value:function v(e,t){if(!this._listeners[e])return this;if(!t)return delete this._listeners[e],this;var n=this._listeners[e].indexOf(t);return n>=0&&this._listeners[e].splice(n,1),this}},{key:"_onInput",value:function w(){if(this._abortUpdateCursor(),!this._selection)return this.updateValue();var e=new _t(this.el.value,this.cursorPos,this.value,this._selection),t=this.masked.rawInputValue,n=this.masked.splice(e.startChangePos,e.removed.length,e.inserted,e.removeDirection).offset,r=t===this.masked.rawInputValue?e.removeDirection:kt.NONE,o=this.masked.nearestInputPos(e.startChangePos+n,r);this.updateControl(),this.updateCursor(o)}},{key:"_onChange",value:function b(){this.value!==this.el.value&&this.updateValue(),this.masked.doCommit(),this.updateControl(),this._saveSelection()}},{key:"_onDrop",value:function k(e){e.preventDefault(),e.stopPropagation()}},{key:"_onFocus",value:function S(e){this.selectionStart===this.cursorPos&&(this._selection&&(this.cursorPos=this._selection.end),this.alignCursorFriendly())}},{key:"destroy",value:function _(){this._unbindEvents(),this._listeners.length=0,delete this.el}},{key:"mask",get:function E(){return this.masked.mask},set:function A(e){if(!(null==e||e===this.masked.mask||e===Date&&this.masked instanceof Rt))if(this.masked.constructor!==L(e)){var t=M({mask:e});t.unmaskedValue=this.masked.unmaskedValue,this.masked=t}else this.masked.updateOptions({mask:e})}},{key:"value",get:function T(){return this._value},set:function q(e){this.masked.value=e,this.updateControl(),this.alignCursor()}},{key:"unmaskedValue",get:function x(){return this._unmaskedValue},set:function P(e){this.masked.unmaskedValue=e,this.updateControl(),this.alignCursor()}},{key:"typedValue",get:function R(){return this.masked.typedValue},set:function F(e){this.masked.typedValue=e,this.updateControl(),this.alignCursor()}},{key:"selectionStart",get:function D(){return this._cursorChanging?this._changingCursorPos:this.el.selectionStart}},{key:"cursorPos",get:function I(){return this._cursorChanging?this._changingCursorPos:this.el.selectionEnd},set:function B(e){this.el.isActive&&(this.el.select(e,e),this._saveSelection())}}]),e}(),Bt=function(e){function t(){return n(this,t),f(this,l(t).apply(this,arguments))}return u(t,e),o(t,[{key:"_update",value:function r(e){e["enum"]&&(e.mask="*".repeat(e["enum"][0].length)),g(l(t.prototype),"_update",this).call(this,e)}},{key:"doValidate",value:function i(){for(var e=this,n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return this["enum"].some(function(t){return t.indexOf(e.unmaskedValue)>=0})&&(n=g(l(t.prototype),"doValidate",this)).call.apply(n,[this].concat(o))}}]),t}(xt),Ot=function(e){function t(e){return n(this,t),f(this,l(t).call(this,a({},t.DEFAULTS,{},e)))}return u(t,e),o(t,[{key:"_update",value:function r(e){g(l(t.prototype),"_update",this).call(this,e),this._updateRegExps()}},{key:"_updateRegExps",value:function i(){var e="^"+(this.allowNegative?"[+|\\-]?":""),t="(0|([1-9]+\\d*))?",n="\\d*",r=(this.scale?"("+A(this.radix)+"\\d{0,"+this.scale+"})?":"")+"$";this._numberRegExpInput=new RegExp(e+t+r),this._numberRegExp=new RegExp(e+n+r),this._mapToRadixRegExp=new RegExp("["+this.mapToRadix.map(A).join("")+"]","g"),this._thousandsSeparatorRegExp=new RegExp(A(this.thousandsSeparator),"g")}},{key:"_removeThousandsSeparators",value:function s(e){return e.replace(this._thousandsSeparatorRegExp,"")}},{key:"_insertThousandsSeparators",value:function c(e){var t=e.split(this.radix);return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,this.thousandsSeparator),t.join(this.radix)}},{key:"doPrepare",value:function d(e){for(var n,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return(n=g(l(t.prototype),"doPrepare",this)).call.apply(n,[this,this._removeThousandsSeparators(e.replace(this._mapToRadixRegExp,this.radix))].concat(o))}},{key:"_separatorsCount",value:function h(e){for(var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],n=0,r=0;r<e;++r)this._value.indexOf(this.thousandsSeparator,r)===r&&(++n,t&&(e+=this.thousandsSeparator.length));return n}},{key:"_separatorsCountFromSlice",value:function p(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this._value;return this._separatorsCount(this._removeThousandsSeparators(e).length,!0)}},{key:"extractInput",value:function m(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.value.length,r=arguments.length>2?arguments[2]:undefined,o,i=w(this._adjustRangeWithSeparators(e,n),2);return e=i[0],n=i[1],this._removeThousandsSeparators(g(l(t.prototype),"extractInput",this).call(this,e,n,r))}},{key:"_appendCharRaw",value:function y(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!this.thousandsSeparator)return g(l(t.prototype),"_appendCharRaw",this).call(this,e,n);var r=n.tail&&n._beforeTailState?n._beforeTailState._value:this._value,o=this._separatorsCountFromSlice(r);this._value=this._removeThousandsSeparators(this.value);var i=g(l(t.prototype),"_appendCharRaw",this).call(this,e,n);this._value=this._insertThousandsSeparators(this._value);var s=n.tail&&n._beforeTailState?n._beforeTailState._value:this._value,a=this._separatorsCountFromSlice(s);return i.tailShift+=(a-o)*this.thousandsSeparator.length,i}},{key:"_findSeparatorAround",value:function b(e){if(this.thousandsSeparator){var t=e-this.thousandsSeparator.length+1,n=this.value.indexOf(this.thousandsSeparator,t);if(n<=e)return n}return-1}},{key:"_adjustRangeWithSeparators",value:function k(e,t){var n=this._findSeparatorAround(e);n>=0&&(e=n);var r=this._findSeparatorAround(t);return r>=0&&(t=r+this.thousandsSeparator.length),[e,t]}},{key:"remove",value:function S(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0,t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.value.length,n,r=w(this._adjustRangeWithSeparators(e,t),2);e=r[0],t=r[1];var o=this.value.slice(0,e),i=this.value.slice(t),s=this._separatorsCount(o.length);this._value=this._insertThousandsSeparators(this._removeThousandsSeparators(o+i));var a=this._separatorsCountFromSlice(o);return new Et({tailShift:(a-s)*this.thousandsSeparator.length})}},{key:"nearestInputPos",value:function _(e,t){if(!this.thousandsSeparator)return e;switch(t){case kt.NONE:case kt.LEFT:case kt.FORCE_LEFT:var n=this._findSeparatorAround(e-1);if(n>=0){var r=n+this.thousandsSeparator.length;if(e<r||this.value.length<=r||t===kt.FORCE_LEFT)return n}break;case kt.RIGHT:case kt.FORCE_RIGHT:var o=this._findSeparatorAround(e);if(o>=0)return o+this.thousandsSeparator.length}return e}},{key:"doValidate",value:function E(e){var n,r=(e.input?this._numberRegExpInput:this._numberRegExp).test(this._removeThousandsSeparators(this.value));if(r){var o=this.number;r=r&&!isNaN(o)&&(null==this.min||this.min>=0||this.min<=this.number)&&(null==this.max||this.max<=0||this.number<=this.max)}return r&&g(l(t.prototype),"doValidate",this).call(this,e)}},{key:"doCommit",value:function C(){if(this.value){var e=this.number,n=e;null!=this.min&&(n=Math.max(n,this.min)),null!=this.max&&(n=Math.min(n,this.max)),n!==e&&(this.unmaskedValue=String(n));var r=this.value;this.normalizeZeros&&(r=this._normalizeZeros(r)),this.padFractionalZeros&&(r=this._padFractionalZeros(r)),this._value=r}g(l(t.prototype),"doCommit",this).call(this)}},{key:"_normalizeZeros",value:function L(e){var t=this._removeThousandsSeparators(e).split(this.radix);return t[0]=t[0].replace(/^(\D*)(0*)(\d*)/,function(e,t,n,r){return t+r}),e.length&&!/\d$/.test(t[0])&&(t[0]=t[0]+"0"),t.length>1&&(t[1]=t[1].replace(/0*$/,""),t[1].length||(t.length=1)),this._insertThousandsSeparators(t.join(this.radix))}},{key:"_padFractionalZeros",value:function M(e){if(!e)return e;var t=e.split(this.radix);return t.length<2&&t.push(""),t[1]=t[1].padEnd(this.scale,"0"),t.join(this.radix)}},{key:"unmaskedValue",get:function T(){return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix,".")},set:function q(e){v(l(t.prototype),"unmaskedValue",e.replace(".",this.radix),this,!0)}},{key:"number",get:function x(){return Number(this.unmaskedValue)},set:function P(e){this.unmaskedValue=String(e)}},{key:"typedValue",get:function R(){return this.number},set:function F(e){this.number=e}},{key:"allowNegative",get:function D(){return this.signed||null!=this.min&&this.min<0||null!=this.max&&this.max<0}}]),t}(Ct);Ot.DEFAULTS={radix:",",thousandsSeparator:"",mapToRadix:["."],scale:2,signed:!1,normalizeZeros:!0,padFractionalZeros:!1};var Nt=function(e){function t(){return n(this,t),f(this,l(t).apply(this,arguments))}return u(t,e),o(t,[{key:"_update",value:function r(e){e.mask&&(e.validate=function(t){return t.search(e.mask)>=0}),g(l(t.prototype),"_update",this).call(this,e)}}]),t}(Ct),Ht=function(e){function t(){return n(this,t),f(this,l(t).apply(this,arguments))}return u(t,e),o(t,[{key:"_update",value:function r(e){e.mask&&(e.validate=e.mask),g(l(t.prototype),"_update",this).call(this,e)}}]),t}(Ct),jt=function(e){function t(e){var r;return n(this,t),(r=f(this,l(t).call(this,a({},t.DEFAULTS,{},e)))).currentMask=null,r}return u(t,e),o(t,[{key:"_update",value:function r(e){g(l(t.prototype),"_update",this).call(this,e),"mask"in e&&(this.compiledMasks=Array.isArray(e.mask)?e.mask.map(function(e){return M(e)}):[])}},{key:"_appendCharRaw",value:function i(){var e=this._applyDispatch.apply(this,arguments),t;this.currentMask&&e.aggregate((t=this.currentMask)._appendChar.apply(t,arguments));return e}},{key:"_applyDispatch",value:function s(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"",t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=t.tail&&null!=t._beforeTailState?t._beforeTailState._value:this.value,r=this.rawInputValue,o=t.tail&&null!=t._beforeTailState?t._beforeTailState._rawInputValue:r,i=r.slice(o.length),s=this.currentMask,u=new Et,l=s&&s.state;if(this.currentMask=this.doDispatch(e,a({},t)),this.currentMask)if(this.currentMask!==s){this.currentMask.reset();var c=this.currentMask.append(o,{raw:!0});u.tailShift=c.inserted.length-n.length,i&&(u.tailShift+=this.currentMask.append(i,{raw:!0,tail:!0}).tailShift)}else this.currentMask.state=l;return u}},{key:"_appendPlaceholder",value:function c(){var e=this._applyDispatch.apply(this,arguments);return this.currentMask&&e.aggregate(this.currentMask._appendPlaceholder()),e}},{key:"doDispatch",value:function d(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return this.dispatch(e,this,t)}},{key:"doValidate",value:function p(){for(var e,n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=g(l(t.prototype),"doValidate",this)).call.apply(e,[this].concat(o))&&(!this.currentMask||(n=this.currentMask).doValidate.apply(n,o))}},{key:"reset",value:function m(){this.currentMask&&this.currentMask.reset(),this.compiledMasks.forEach(function(e){return e.reset()})}},{key:"remove",value:function y(){var e=new Et,t;this.currentMask&&e.aggregate((t=this.currentMask).remove.apply(t,arguments)).aggregate(this._applyDispatch());return e}},{key:"extractInput",value:function w(){var e;return this.currentMask?(e=this.currentMask).extractInput.apply(e,arguments):""}},{key:"extractTail",value:function b(){for(var e,n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return this.currentMask?(e=this.currentMask).extractTail.apply(e,o):(n=g(l(t.prototype),"extractTail",this)).call.apply(n,[this].concat(o))}},{key:"doCommit",value:function k(){this.currentMask&&this.currentMask.doCommit(),g(l(t.prototype),"doCommit",this).call(this)}},{key:"nearestInputPos",value:function S(){for(var e,n,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return this.currentMask?(e=this.currentMask).nearestInputPos.apply(e,o):(n=g(l(t.prototype),"nearestInputPos",this)).call.apply(n,[this].concat(o))}},{key:"value",get:function _(){return this.currentMask?this.currentMask.value:""},set:function E(e){v(l(t.prototype),"value",e,this,!0)}},{key:"unmaskedValue",get:function A(){return this.currentMask?this.currentMask.unmaskedValue:""},set:function C(e){v(l(t.prototype),"unmaskedValue",e,this,!0)}},{key:"typedValue",get:function L(){return this.currentMask?this.currentMask.typedValue:""},set:function T(e){var t=String(e);this.currentMask&&(this.currentMask.typedValue=e,t=this.currentMask.unmaskedValue),this.unmaskedValue=t}},{key:"isComplete",get:function q(){return!!this.currentMask&&this.currentMask.isComplete}},{key:"state",get:function x(){return a({},g(l(t.prototype),"state",this),{_rawInputValue:this.rawInputValue,compiledMasks:this.compiledMasks.map(function(e){return e.state}),currentMaskRef:this.currentMask,currentMask:this.currentMask&&this.currentMask.state})},set:function P(e){var n=e.compiledMasks,r=e.currentMaskRef,o=e.currentMask,i=h(e,["compiledMasks","currentMaskRef","currentMask"]);this.compiledMasks.forEach(function(e,t){return e.state=n[t]}),null!=r&&(this.currentMask=r,this.currentMask.state=o),v(l(t.prototype),"state",i,this,!0)}}]),t}(Ct);return jt.DEFAULTS={dispatch:function Xt(e,t,n){if(t.compiledMasks.length){var r=t.rawInputValue,o=t.compiledMasks.map(function(t,o){var i;return t.reset(),t.append(r,{raw:!0}),t.append(e,n),{weight:t.rawInputValue.length,index:o}});return o.sort(function(e,t){return t.weight-e.weight}),t.compiledMasks[o[0].index]}}},q.InputMask=It,q.Masked=Ct,q.MaskedPattern=xt,q.MaskedEnum=Bt,q.MaskedRange=Pt,q.MaskedNumber=Ot,q.MaskedDate=Rt,q.MaskedRegExp=Nt,q.MaskedFunction=Ht,q.MaskedDynamic=jt,q.createMask=M,q.MaskElement=Ft,q.HTMLMaskElement=Dt,St.IMask=q,q}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Glide=t()}(this,function(){"use strict";function e(e){console.error("[Glide warn]: "+e)}function t(e){return parseInt(e)}function n(e){return parseFloat(e)}function r(e){return"string"==typeof e}function o(e){var t=void 0===e?"undefined":Q(e);return"function"===t||"object"===t&&!!e}function i(e){return"number"==typeof e}function s(e){return"function"==typeof e}function a(e){return void 0===e}function u(e){return e.constructor===Array}function l(t,n,r){var o={};for(var i in n)s(n[i])?o[i]=n[i](t,o,r):e("Extension must be a function");for(var a in o)s(o[a].mount)&&o[a].mount();return o}function c(e,t,n){Object.defineProperty(e,t,n)}function d(e){return Object.keys(e).sort().reduce(function(t,n){return t[n]=e[n],t[n],t},{})}function h(e,t){var n=G({},e,t);return t.hasOwnProperty("classes")&&(n.classes=G({},e.classes,t.classes),t.classes.hasOwnProperty("direction")&&(n.classes.direction=G({},e.classes.direction,t.classes.direction))),t.hasOwnProperty("breakpoints")&&(n.breakpoints=G({},e.breakpoints,t.breakpoints)),n}function p(n,r,o){var s={mount:function a(){this._o=!1},make:function u(e){var t=this;n.disabled||(n.disable(),this.move=e,o.emit("run.before",this.move),this.calculate(),o.emit("run",this.move),r.Transition.after(function(){t.isStart()&&o.emit("run.start",t.move),t.isEnd()&&o.emit("run.end",t.move),(t.isOffset("<")||t.isOffset(">"))&&(t._o=!1,o.emit("run.offset",t.move)),o.emit("run.after",t.move),n.enable()}))},calculate:function l(){var r=this.move,o=this.length,s=r.steps,a=r.direction,u=i(t(s))&&0!==t(s);switch(a){case">":">"===s?n.index=o:this.isEnd()?n.isType("slider")&&!n.settings.rewind||(this._o=!0,n.index=0):u?n.index+=Math.min(o-n.index,-t(s)):n.index++;break;case"<":"<"===s?n.index=0:this.isStart()?n.isType("slider")&&!n.settings.rewind||(this._o=!0,n.index=o):u?n.index-=Math.min(n.index,t(s)):n.index--;break;case"=":n.index=s;break;default:e("Invalid direction pattern ["+a+s+"] has been used")}},isStart:function d(){return 0===n.index},isEnd:function h(){return n.index===this.length},isOffset:function p(e){return this._o&&this.move.direction===e}};return c(s,"move",{get:function f(){return this._m},set:function m(e){var n=e.substr(1);this._m={direction:e.substr(0,1),steps:n?t(n)?t(n):n:0}}}),c(s,"length",{get:function g(){var e=n.settings,o=r.Html.slides.length;return n.isType("slider")&&"center"!==e.focusAt&&e.bound?o-1-(t(e.perView)-1)+t(e.focusAt):o-1}}),c(s,"offset",{get:function y(){return this._o}}),s}function f(){return(new Date).getTime()}function m(e,t,n){var r=void 0,o=void 0,i=void 0,s=void 0,a=0;n||(n={});var u=function c(){a=!1===n.leading?0:f(),r=null,s=e.apply(o,i),r||(o=i=null)},l=function d(){var l=f();a||!1!==n.leading||(a=l);var c=t-(l-a);return o=this,i=arguments,c<=0||c>t?(r&&(clearTimeout(r),r=null),a=l,s=e.apply(o,i),r||(o=i=null)):r||!1===n.trailing||(r=setTimeout(u,c)),s};return l.cancel=function(){clearTimeout(r),a=0,r=o=i=null},l}function g(e,n,r){var o={apply:function i(e){for(var t=0,r=e.length;t<r;t++){var o=e[t].style,i=n.Direction.value;o[Z[i][0]]=0!==t?this.value/2+"px":"",t!==e.length-1?o[Z[i][1]]=this.value/2+"px":o[Z[i][1]]=""}},remove:function s(e){for(var t=0,n=e.length;t<n;t++){var r=e[t].style;r.marginLeft="",r.marginRight=""}}};return c(o,"value",{get:function a(){return t(e.settings.gap)}}),c(o,"grow",{get:function u(){return o.value*(n.Sizes.length-1)}}),c(o,"reductor",{get:function l(){var t=e.settings.perView;return o.value*(t-1)/t}}),r.on(["build.after","update"],m(function(){o.apply(n.Html.wrapper.children)},30)),r.on("destroy",function(){o.remove(n.Html.wrapper.children)}),o}function y(e){if(e&&e.parentNode){for(var t=e.parentNode.firstChild,n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}return[]}function v(e){return!!(e&&e instanceof window.HTMLElement)}function w(t,n){var o={mount:function i(){this.root=t.selector,this.track=this.root.querySelector(ee),this.slides=Array.prototype.slice.call(this.wrapper.children).filter(function(e){
return!e.classList.contains(t.settings.classes.cloneSlide)})}};return c(o,"root",{get:function s(){return o._r},set:function a(t){r(t)&&(t=document.querySelector(t)),v(t)?o._r=t:e("Root element must be a existing Html node")}}),c(o,"track",{get:function u(){return o._t},set:function l(t){v(t)?o._t=t:e("Could not find track element. Please use "+ee+" attribute.")}}),c(o,"wrapper",{get:function d(){return o.track.children[0]}}),o}function b(e,n,r){var i={mount:function s(){this.value=e.settings.peek}};return c(i,"value",{get:function a(){return i._v},set:function u(e){o(e)?(e.before=t(e.before),e.after=t(e.after)):e=t(e),i._v=e}}),c(i,"reductor",{get:function l(){var t=i.value,n=e.settings.perView;return o(t)?t.before/n+t.after/n:2*t/n}}),r.on(["resize","update"],function(){i.mount()}),i}function k(e,n,r){var o={mount:function i(){this._o=0},make:function s(){var e=this,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;this.offset=t,r.emit("move",{movement:this.value}),n.Transition.after(function(){r.emit("move.after",{movement:e.value})})}};return c(o,"offset",{get:function u(){return o._o},set:function l(e){o._o=a(e)?0:t(e)}}),c(o,"translate",{get:function d(){return n.Sizes.slideWidth*e.index}}),c(o,"value",{get:function h(){var e=this.offset,t=this.translate;return n.Direction.is("rtl")?t+e:t-e}}),r.on(["build.before","run"],function(){o.make()}),o}function S(e,t,n){var r={setupSlides:function o(){for(var e=this.slideWidth+"px",n=t.Html.slides,r=0;r<n.length;r++)n[r].style.width=e},setupWrapper:function i(e){t.Html.wrapper.style.width=this.wrapperSize+"px"},remove:function s(){for(var e=t.Html.slides,n=0;n<e.length;n++)e[n].style.width="";t.Html.wrapper.style.width=""}};return c(r,"length",{get:function a(){return t.Html.slides.length}}),c(r,"width",{get:function u(){return t.Html.root.offsetWidth}}),c(r,"wrapperSize",{get:function l(){return r.slideWidth*r.length+t.Gaps.grow+t.Clones.grow}}),c(r,"slideWidth",{get:function d(){return r.width/e.settings.perView-t.Peek.reductor-t.Gaps.reductor}}),n.on(["build.before","resize","update"],function(){r.setupSlides(),r.setupWrapper()}),n.on("destroy",function(){r.remove()}),r}function _(e,t,n){var r={mount:function o(){n.emit("build.before"),this.typeClass(),this.activeClass(),n.emit("build.after")},typeClass:function i(){t.Html.root.classList.add(e.settings.classes[e.settings.type])},activeClass:function s(){var n=e.settings.classes,r=t.Html.slides[e.index];r&&(r.classList.add(n.activeSlide),y(r).forEach(function(e){e.classList.remove(n.activeSlide)}))},removeClasses:function a(){var n=e.settings.classes;t.Html.root.classList.remove(n[e.settings.type]),t.Html.slides.forEach(function(e){e.classList.remove(n.activeSlide)})}};return n.on(["destroy","update"],function(){r.removeClasses()}),n.on(["resize","update"],function(){r.mount()}),n.on("move.after",function(){r.activeClass()}),r}function E(e,t,n){var r={mount:function o(){this.items=[],e.isType("carousel")&&(this.items=this.collect())},collect:function i(){for(var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[],r=t.Html.slides,o=e.settings,i=o.perView,s=o.classes,a,u=i+ +!!e.settings.peek,l=r.slice(0,u),c=r.slice(-u),d=0;d<Math.max(1,Math.floor(i/r.length));d++){for(var h=0;h<l.length;h++){var p=l[h].cloneNode(!0);p.classList.add(s.cloneSlide),n.push(p)}for(var f=0;f<c.length;f++){var m=c[f].cloneNode(!0);m.classList.add(s.cloneSlide),n.unshift(m)}}return n},append:function s(){for(var e=this.items,n=t.Html,r=n.wrapper,o=n.slides,i=Math.floor(e.length/2),a=e.slice(0,i).reverse(),s=e.slice(i,e.length),u=t.Sizes.slideWidth+"px",l=0;l<s.length;l++)r.appendChild(s[l]);for(var c=0;c<a.length;c++)r.insertBefore(a[c],o[0]);for(var d=0;d<e.length;d++)e[d].style.width=u},remove:function a(){for(var e=this.items,n=0;n<e.length;n++)t.Html.wrapper.removeChild(e[n])}};return c(r,"grow",{get:function u(){return(t.Sizes.slideWidth+t.Gaps.value)*r.items.length}}),n.on("update",function(){r.remove(),r.mount(),r.append()}),n.on("build.before",function(){e.isType("carousel")&&r.append()}),n.on("destroy",function(){r.remove()}),r}function A(e,t,n){var r=new te,o={mount:function i(){this.bind()},bind:function s(){r.on("resize",window,m(function(){n.emit("resize")},e.settings.throttle))},unbind:function a(){r.off("resize",window)}};return n.on("destroy",function(){o.unbind(),r.destroy()}),o}function C(t,n,r){var o={mount:function i(){this.value=t.settings.direction},resolve:function s(e){var t=e.slice(0,1);return this.is("rtl")?e.split(t).join(re[t]):e},is:function a(e){return this.value===e},addClass:function u(){n.Html.root.classList.add(t.settings.classes.direction[this.value])},removeClass:function l(){n.Html.root.classList.remove(t.settings.classes.direction[this.value])}};return c(o,"value",{get:function d(){return o._v},set:function h(t){ne.indexOf(t)>-1?o._v=t:e("Direction value must be `ltr` or `rtl`")}}),r.on(["destroy","update"],function(){o.removeClass()}),r.on("update",function(){o.mount()}),r.on(["build.before","update"],function(){o.addClass()}),o}function L(e,t){return{modify:function n(e){return t.Direction.is("rtl")?-e:e}}}function M(e,t){return{modify:function n(r){return r+t.Gaps.value*e.index}}}function T(e,t){return{modify:function n(e){return e+t.Clones.grow/2}}}function q(e,t){return{modify:function n(r){if(e.settings.focusAt>=0){var i=t.Peek.value;return o(i)?r-i.before:r-i}return r}}}function x(e,t){return{modify:function n(r){var o=t.Gaps.value,i=t.Sizes.width,s=e.settings.focusAt,a=t.Sizes.slideWidth;return"center"===s?r-(i/2-a/2):r-a*s-o*s}}}function P(t,n,r){var o=[M,T,q,x].concat(t._t,[L]);return{mutate:function i(a){for(var u=0;u<o.length;u++){var l=o[u];s(l)&&s(l().modify)?a=l(t,n,r).modify(a):e("Transformer should be a function that returns an object with `modify()` method")}return a}}}function R(e,t,n){var r={set:function o(n){var r=P(e,t).mutate(n);t.Html.wrapper.style.transform="translate3d("+-1*r+"px, 0px, 0px)"},remove:function i(){t.Html.wrapper.style.transform=""}};return n.on("move",function(o){var i=t.Gaps.value,s=t.Sizes.length,a=t.Sizes.slideWidth;return e.isType("carousel")&&t.Run.isOffset("<")?(t.Transition.after(function(){n.emit("translate.jump"),r.set(a*(s-1))}),r.set(-a-i*s)):e.isType("carousel")&&t.Run.isOffset(">")?(t.Transition.after(function(){n.emit("translate.jump"),r.set(0)}),r.set(a*s+i*s)):r.set(o.movement)}),n.on("destroy",function(){r.remove()}),r}function F(e,t,n){var r=!1,o={compose:function i(t){var n=e.settings;return r?t+" 0ms "+n.animationTimingFunc:t+" "+this.duration+"ms "+n.animationTimingFunc},set:function s(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"transform";t.Html.wrapper.style.transition=this.compose(e)},remove:function a(){t.Html.wrapper.style.transition=""},after:function u(e){setTimeout(function(){e()},this.duration)},enable:function l(){r=!1,this.set()},disable:function d(){r=!0,this.set()}};return c(o,"duration",{get:function h(){var n=e.settings;return e.isType("slider")&&t.Run.offset?n.rewindDuration:n.animationDuration}}),n.on("move",function(){o.set()}),n.on(["build.before","resize","translate.jump"],function(){o.disable()}),n.on("run",function(){o.enable()}),n.on("destroy",function(){o.remove()}),o}function D(e,r,o){var i=new te,s=0,a=0,u=0,l=!1,c=!!se&&{passive:!0},d={mount:function h(){this.bindSwipeStart()},start:function p(n){if(!l&&!e.disabled){this.disable();var r=this.touches(n);s=null,a=t(r.pageX),u=t(r.pageY),this.bindSwipeMove(),this.bindSwipeEnd(),o.emit("swipe.start")}},move:function f(i){if(!e.disabled){var l=e.settings,c=l.touchAngle,d=l.touchRatio,h=l.classes,p=this.touches(i),f=t(p.pageX)-a,m=t(p.pageY)-u,g=Math.abs(f<<2),y=Math.abs(m<<2),v=Math.sqrt(g+y),w=Math.sqrt(y);if(!(180*(s=Math.asin(w/v))/Math.PI<c))return!1;i.stopPropagation(),r.Move.make(f*n(d)),r.Html.root.classList.add(h.dragging),o.emit("swipe.move")}},end:function g(n){if(!e.disabled){var i=e.settings,u=this.touches(n),l=this.threshold(n),c=u.pageX-a,d=180*s/Math.PI,h=Math.round(c/r.Sizes.slideWidth);this.enable(),c>l&&d<i.touchAngle?(i.perTouch&&(h=Math.min(h,t(i.perTouch))),r.Direction.is("rtl")&&(h=-h),r.Run.make(r.Direction.resolve("<"+h))):c<-l&&d<i.touchAngle?(i.perTouch&&(h=Math.max(h,-t(i.perTouch))),r.Direction.is("rtl")&&(h=-h),r.Run.make(r.Direction.resolve(">"+h))):r.Move.make(),r.Html.root.classList.remove(i.classes.dragging),this.unbindSwipeMove(),this.unbindSwipeEnd(),o.emit("swipe.end")}},bindSwipeStart:function y(){var t=this,n=e.settings;n.swipeThreshold&&i.on(ae[0],r.Html.wrapper,function(e){t.start(e)},c),n.dragThreshold&&i.on(ae[1],r.Html.wrapper,function(e){t.start(e)},c)},unbindSwipeStart:function v(){i.off(ae[0],r.Html.wrapper,c),i.off(ae[1],r.Html.wrapper,c)},bindSwipeMove:function w(){var t=this;i.on(ue,r.Html.wrapper,m(function(e){t.move(e)},e.settings.throttle),c)},unbindSwipeMove:function b(){i.off(ue,r.Html.wrapper,c)},bindSwipeEnd:function k(){var e=this;i.on(le,r.Html.wrapper,function(t){e.end(t)})},unbindSwipeEnd:function S(){i.off(le,r.Html.wrapper)},touches:function _(e){return ce.indexOf(e.type)>-1?e:e.touches[0]||e.changedTouches[0]},threshold:function E(t){var n=e.settings;return ce.indexOf(t.type)>-1?n.dragThreshold:n.swipeThreshold},enable:function A(){return l=!1,r.Transition.enable(),this},disable:function C(){return l=!0,r.Transition.disable(),this}};return o.on("build.after",function(){r.Html.root.classList.add(e.settings.classes.swipeable)}),o.on("destroy",function(){d.unbindSwipeStart(),d.unbindSwipeMove(),d.unbindSwipeEnd(),i.destroy()}),d}function I(e,t,n){var r=new te,o={mount:function i(){this.bind()},bind:function s(){r.on("dragstart",t.Html.wrapper,this.dragstart)},unbind:function a(){r.off("dragstart",t.Html.wrapper)},dragstart:function u(e){e.preventDefault()}};return n.on("destroy",function(){o.unbind(),r.destroy()}),o}function B(e,t,n){var r=new te,o=!1,i=!1,s={mount:function a(){this._a=t.Html.wrapper.querySelectorAll("a"),this.bind()},bind:function u(){r.on("click",t.Html.wrapper,this.click)},unbind:function l(){r.off("click",t.Html.wrapper)},click:function d(e){i&&(e.stopPropagation(),e.preventDefault())},detach:function h(){if(i=!0,!o){for(var e=0;e<this.items.length;e++)this.items[e].draggable=!1,this.items[e].setAttribute("data-href",this.items[e].getAttribute("href")),this.items[e].removeAttribute("href");o=!0}return this},attach:function p(){if(i=!1,o){for(var e=0;e<this.items.length;e++)this.items[e].draggable=!0,this.items[e].setAttribute("href",this.items[e].getAttribute("data-href"));o=!1}return this}};return c(s,"items",{get:function f(){return s._a}}),n.on("swipe.move",function(){s.detach()}),n.on("swipe.end",function(){t.Transition.after(function(){s.attach()})}),n.on("destroy",function(){s.attach(),s.unbind(),r.destroy()}),s}function O(e,t,n){var r=new te,o=!!se&&{passive:!0},i={mount:function s(){this._n=t.Html.root.querySelectorAll(de),this._c=t.Html.root.querySelectorAll(he),this.addBindings()},setActive:function a(){for(var e=0;e<this._n.length;e++)this.addClass(this._n[e].children)},removeActive:function u(){for(var e=0;e<this._n.length;e++)this.removeClass(this._n[e].children)},addClass:function l(t){var n=e.settings,r=t[e.index];r&&(r.classList.add(n.classes.activeNav),y(r).forEach(function(e){e.classList.remove(n.classes.activeNav)}))},removeClass:function d(t){var n=t[e.index];n&&n.classList.remove(e.settings.classes.activeNav)},addBindings:function h(){for(var e=0;e<this._c.length;e++)this.bind(this._c[e].children)},removeBindings:function p(){for(var e=0;e<this._c.length;e++)this.unbind(this._c[e].children)},bind:function f(e){for(var t=0;t<e.length;t++)r.on("click",e[t],this.click),r.on("touchstart",e[t],this.click,o)},unbind:function m(e){for(var t=0;t<e.length;t++)r.off(["click","touchstart"],e[t])},click:function g(e){e.preventDefault(),t.Run.make(t.Direction.resolve(e.currentTarget.getAttribute("data-glide-dir")))}};return c(i,"items",{get:function v(){return i._c}}),n.on(["mount.after","move.after"],function(){i.setActive()}),n.on("destroy",function(){i.removeBindings(),i.removeActive(),r.destroy()}),i}function N(e,t,n){var r=new te,o={mount:function i(){e.settings.keyboard&&this.bind()},bind:function s(){r.on("keyup",document,this.press)},unbind:function a(){r.off("keyup",document)},press:function u(e){39===e.keyCode&&t.Run.make(t.Direction.resolve(">")),37===e.keyCode&&t.Run.make(t.Direction.resolve("<"))}};return n.on(["destroy","update"],function(){o.unbind()}),n.on("update",function(){o.mount()}),n.on("destroy",function(){r.destroy()}),o}function H(e,n,r){var o=new te,i={mount:function s(){this.start(),e.settings.hoverpause&&this.bind()},start:function u(){var t=this;e.settings.autoplay&&a(this._i)&&(this._i=setInterval(function(){t.stop(),n.Run.make(">"),t.start()},this.time))},stop:function l(){this._i=clearInterval(this._i)},bind:function d(){var e=this;o.on("mouseover",n.Html.root,function(){e.stop()}),o.on("mouseout",n.Html.root,function(){e.start()})},unbind:function h(){o.off(["mouseover","mouseout"],n.Html.root)}};return c(i,"time",{get:function p(){var r=n.Html.slides[e.index].getAttribute("data-glide-autoplay");return t(r||e.settings.autoplay)}}),r.on(["destroy","update"],function(){i.unbind()}),r.on(["run.before","pause","destroy","swipe.start","update"],function(){i.stop()}),r.on(["run.after","play","swipe.end"],function(){i.start()}),r.on("update",function(){i.mount()}),r.on("destroy",function(){o.destroy()}),i}function j(t){return o(t)?d(t):(e("Breakpoints option must be an object"),{})}function U(e,t,n){var r=new te,o=e.settings,i=j(o.breakpoints),s=G({},o),a={match:function u(e){if("undefined"!=typeof window.matchMedia)for(var t in e)if(e.hasOwnProperty(t)&&window.matchMedia("(max-width: "+t+"px)").matches)return e[t];return s}};return G(o,a.match(i)),r.on("resize",window,m(function(){e.settings=h(o,a.match(i))},e.settings.throttle)),n.on("update",function(){i=j(i),s=G({},o)}),n.on("destroy",function(){r.off("resize",window)}),a}var V={type:"slider",startAt:0,perView:1,focusAt:0,gap:10,autoplay:!1,hoverpause:!0,keyboard:!0,bound:!1,swipeThreshold:80,dragThreshold:120,perTouch:!1,touchRatio:.5,touchAngle:45,animationDuration:400,rewind:!0,rewindDuration:800,animationTimingFunc:"cubic-bezier(.165, .840, .440, 1)",throttle:10,direction:"ltr",peek:0,breakpoints:{},classes:{direction:{ltr:"glide--ltr",rtl:"glide--rtl"},slider:"glide--slider",carousel:"glide--carousel",swipeable:"glide--swipeable",dragging:"glide--dragging",cloneSlide:"glide__slide--clone",activeNav:"glide__bullet--active",activeSlide:"glide__slide--active",disabledArrow:"glide__arrow--disabled"}},Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},z=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y=function ge(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var o=Object.getPrototypeOf(e);return null===o?undefined:ge(o,t,n)}if("value"in r)return r.value;var i=r.get;return i===undefined?undefined:i.call(n)},$=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},K=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},J=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};W(this,e),this.events=t,this.hop=t.hasOwnProperty}return z(e,[{key:"on",value:function t(e,n){if(u(e))for(var r=0;r<e.length;r++)this.on(e[r],n);this.hop.call(this.events,e)||(this.events[e]=[]);var o=this.events[e].push(n)-1;return{remove:function i(){delete this.events[e][o]}}}},{key:"emit",value:function n(e,t){if(u(e))for(var n=0;n<e.length;n++)this.emit(e[n],t);this.hop.call(this.events,e)&&this.events[e].forEach(function(e){e(t||{})})}}]),e}(),X=function(){function n(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};W(this,n),this._c={},this._t=[],this._e=new J,this.disabled=!1,this.selector=e,this.settings=h(V,t),this.index=this.settings.startAt}return z(n,[{key:"mount",value:function r(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return this._e.emit("mount.before"),o(t)?this._c=l(this,t,this._e):e("You need to provide a object on `mount()`"),this._e.emit("mount.after"),this}},{key:"mutate",value:function i(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return u(t)?this._t=t:e("You need to provide a array on `mutate()`"),this}},{key:"update",value:function s(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return this.settings=h(this.settings,e),e.hasOwnProperty("startAt")&&(this.index=e.startAt),this._e.emit("update"),this}},{key:"go",value:function a(e){return this._c.Run.make(e),this}},{key:"move",value:function c(e){return this._c.Transition.disable(),this._c.Move.make(e),this}},{key:"destroy",value:function d(){return this._e.emit("destroy"),this}},{key:"play",value:function p(){var e=arguments.length>0&&arguments[0]!==undefined&&arguments[0];return e&&(this.settings.autoplay=e),this._e.emit("play"),this}},{key:"pause",value:function f(){return this._e.emit("pause"),this}},{key:"disable",value:function m(){return this.disabled=!0,this}},{key:"enable",value:function g(){return this.disabled=!1,this}},{key:"on",value:function y(e,t){return this._e.on(e,t),this}},{key:"isType",value:function v(e){return this.settings.type===e}},{key:"settings",get:function w(){return this._o},set:function b(t){o(t)?this._o=t:e("Options must be an `object` instance.")}},{key:"index",get:function k(){return this._i},set:function S(e){this._i=t(e)}},{key:"type",get:function _(){return this.settings.type}},{key:"disabled",get:function E(){return this._d},set:function A(e){this._d=!!e}}]),n}(),Z={ltr:["marginLeft","marginRight"],rtl:["marginRight","marginLeft"]},ee='[data-glide-el="track"]',te=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};W(this,e),this.listeners=t}return z(e,[{key:"on",value:function t(e,n,o){var i=arguments.length>3&&arguments[3]!==undefined&&arguments[3];r(e)&&(e=[e]);for(var s=0;s<e.length;s++)this.listeners[e[s]]=o,n.addEventListener(e[s],this.listeners[e[s]],i)}},{key:"off",value:function n(e,t){var n=arguments.length>2&&arguments[2]!==undefined&&arguments[2];r(e)&&(e=[e]);for(var o=0;o<e.length;o++)t.removeEventListener(e[o],this.listeners[e[o]],n)}},{key:"destroy",value:function o(){delete this.listeners}}]),e}(),ne=["ltr","rtl"],re={">":"<","<":">","=":"="},oe=!1;try{var ie=Object.defineProperty({},"passive",{get:function e(){oe=!0}});window.addEventListener("testPassive",null,ie),window.removeEventListener("testPassive",null,ie)}catch(me){}var se=oe,ae=["touchstart","mousedown"],ue=["touchmove","mousemove"],le=["touchend","touchcancel","mouseup","mouseleave"],ce=["mousedown","mousemove","mouseup","mouseleave"],de='[data-glide-el="controls[nav]"]',he='[data-glide-el^="controls"]',pe={Html:w,Translate:R,Transition:F,Direction:C,Peek:b,Sizes:S,Gaps:g,Move:k,Clones:E,Resize:A,Build:_,Run:p,Swipe:D,Images:I,Anchors:B,Controls:O,Keyboard:N,Autoplay:H,Breakpoints:U},fe;return function(e){function t(){return W(this,t),K(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return $(t,e),z(t,[{key:"mount",value:function n(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return Y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"mount",this).call(this,G({},pe,e))}}]),t}(X)});const GclModule=(()=>{const e=e=>{var t=RegExp("[?&]"+e+"=([^&]*)").exec(window.location.search);return t&&decodeURIComponent(t[1].replace(/\+/g," "))},t=e=>{var t=7776e6,n;return{value:e,expiryDate:(new Date).getTime()+t}},n=()=>{var n=e("gclid"),r=null,o=e("gclsrc"),i=!o||-1!==o.indexOf("aw");n&&i&&(r=t(n),localStorage.setItem("gclid",JSON.stringify(r)));var s=r||JSON.parse(localStorage.getItem("gclid")),a;return s&&(new Date).getTime()<s.expiryDate?s.value:""},r=()=>"undefined"!=typeof window.ga&&"undefined"!=typeof window.ga.getAll&&void 0!==window.ga.getAll()&&"undefined"!=typeof window.ga.getAll()[0]&&window.ga.getAll()[0].get("clientId");return{getGclid:n,getGaClientId:r}})();window.GclModule=GclModule;const GeqModule=(()=>{const e=()=>new Promise((e,t)=>{e()}),t=(e={},t)=>{void 0!==t&&t()},n=(e={},t)=>{void 0!==t&&t()};return{fireGeqAftersubmitScript:t,fireGeqPageLoadedScript:n}})();window.GeqModule=GeqModule;const GtagModule=(()=>{const e=(e,t)=>{console.log("fire g conversion");try{gtag("event","conversion",{send_to:e,event_callback:t})}catch(n){console.error(n),t()}};return{fireGtag:e}})();window.GtagModule=GtagModule;const AfterSubmitThirdPartiesConfig=(()=>{const e=window.GtagModule.fireGtag,t=window.GeqModule.fireGeqAftersubmitScript,n=(n,r,o)=>new Promise(i=>{switch(n){case"geq":return t(r,i(o));case"gtag":return e(r,i(o));default:return i(o)}}),r=async(e,t)=>{const n=t,r=Object.entries(e).map(([e,t])=>{try{if("function"==typeof t)return"function"==typeof t()?t()():t()}catch(n){console.log("beforeSubmitEventsPromis ERROR",n)}});await Promise.all(r),n()},o=async()=>{try{const t=await fetch("/submit_events"),o=await t.json(),i={};return o&&Object.entries(o).forEach(([e,t])=>{if(t){const o={};for(const[e,r]of Object.entries(t))o[e]=(t=>n(e,r,t));i[e]={initHandlers:({finalCb:e})=>r(o,e)}}}),i}catch(e){console.log("getList error:",e)}};return{getList:o}})();window.AfterSubmitThirdPartiesConfig=AfterSubmitThirdPartiesConfig;const ErrorsModule=(e=null,t="error-message")=>{e=e||document;const n=()=>{const n=[...e.querySelectorAll("."+t)];n.map(e=>e.remove())},r=(r,o,i=!0,s="afterend")=>{const a=`<div class=${t}>${o}</div>`,u=e.querySelector("."+r);i&&n(),u.insertAdjacentHTML(s,a),e.querySelector("."+t).scrollIntoView(!1)};return{hideMessages:n,showMessage:r}};window.ErrorsModule=ErrorsModule;const LoaderModule=e=>{const t=document.querySelector(e);if(!t)return;const n=t.querySelector(".loader-bar-progress"),r=t.dataset.delay,o=document.querySelector("body"),i=(e="loaded")=>(r&&n&&(n.style.animationDuration=r+"ms"),o.classList.remove(e),t.classList.remove(e),(new Date).getTime()),s=async(e,n="loaded",i=null)=>{console.log("hideLoaderCB",i);const s=r-Math.max((new Date).getTime()-e,0),a=()=>{o.classList.add(n),t.classList.add(n)};return new Promise(e=>setTimeout(()=>{if(i)try{i().then(()=>a())}catch(t){console.log("callback error",t)}else a();return e()},Math.max(s,0)))};return{triggerLoader:i,hideLoader:s}};window.LoaderModule=LoaderModule;const QuestionsResultsStoreModule=async()=>{const e="questions_results";let t=localStorage.getItem(e);const n=async(n=(()=>{}))=>{try{return null===(t=await i(e))&&await o(),n()}catch(r){return console.log("[init] error",r),null===t&&await o(),n()}},r=(e,n)=>{if(e){const r={...t,[e]:n};return o(r)}},o=(n={})=>new Promise((r,o)=>{try{localStorage.setItem(e,JSON.stringify(n)),r(t=JSON.parse(localStorage.getItem(e)))}catch(i){console.log("[setResults] error",i),o(i)}}),i=e=>new Promise((t,n)=>{try{let o=localStorage.getItem(e);t(o?JSON.parse(o):{})}catch(r){console.log("[getStore] error",r),n(r.message)}}),s=e=>{if(e)return t[e]};return{init:n,saveAnswer:r,getResultByQuestionId:s,getStore:i,setResults:o,STORE_KEY:e}};window.QuestionsResultsStoreModule=QuestionsResultsStoreModule;{const e=(()=>{const e=(e=".linkParamsRewriteRule")=>{console.log("@@@@@@@@getParamsToRewriteFromTemplate@@@@@@");try{const n=document.querySelectorAll(e);if(n.length>0){let e={};return Array.from(n).map(e=>e?e.getAttribute("data-params-to-rewrite"):"").map(e=>e?e.split("="):[]).map(t=>{e[t[0]]=t[1]}),e}return{}}catch(t){return console.log("get params from template error",t.message),{}}},t=e=>{const t="undefined"!=typeof LeadiD&&LeadiD.token,n=window.GclModule.getGclid(),r=window.GclModule.getGaClientId();switch(e){case"token":return t;case"gclid":return n;case"gaClientId":return r;default:return e}},n=e=>{const t=window.location.search;return r(e)(t)},r=n=>{const r="undefined"!=typeof LeadiD&&LeadiD.token,i=e();return console.log("paramsToRewriteDB",i),i&&Object.keys(i).length>0?e=>o({url:n,currentParams:e,paramsToRewrite:Object.keys(i),sub1:i.sub1?t(i.sub1):undefined,sub3:i.sub3?t(i.sub3):undefined,sub4:i.sub4?t(i.sub4):undefined,sub5:i.sub5?t(i.sub5):undefined}):d("myfamilybenefits.org","/lander_pages/2")||d("seniorhelperguide.com","/lander_pages/1")||d("seniorhelperguide.com","/lander_pages/10")||d("seniorhelperguide.com","/lander_pages/11")||d("seniorhelperguide.com","/homeowner")||d("seniorhelperguide.com","/discounts")||d("seniorhelperguide.com","/lp3")||d("seniorhelperguide.com","/question_chains/37")||d("seniorhelperguide.com","/lander_pages/6")||d("seniorhelperguide.com","/lander_pages/5")||d("seniorhelperguide.com","/lander_pages/9")||d("seniorhelperguide.com","/question_chains/3")||d("benefits.free4momma.com")||d("thousandsforinjuries.com")||d("bigbenefitsearch.com","/articles/1")||d("bigbenefitsearch.com","/question_chains/1")||d("bigbenefitsearch.com","/question_chains/5")||d("bigbenefitsearch.com","/lander_pages/1")||d("bigbenefitsearch.com","/lander_pages/2")||d("bigbenefitsearch.com","/lander_pages/4")||d("bigbenefitsearch.com","/lander_pages/5")||d("bestmomresources.com","/question_chains/26")||d("findthemoney.io","/lander_pages/5")||d("allpremiumauto.com","/car")||d("allpremiumauto.com","/question_chains/19")||d("allpremiumauto.com","/question_chains/22")||d("allpremiumauto.com","/question_chains/24")||d("allpremiumauto.com","/question_chains/25")||d("allpremiumauto.com","/question_chains/26")||d("allpremiumauto.com","/question_chains/27")||d("allpremiumauto.com","/question_chains/28")||d("allpremiumauto.com","/pages/auto_insurance")||d("lp1.dailyprosper.com","/question_chains/13")||d("lp1.dailyprosper.com","/question_chains/7")||d("lp1.dailyprosper.com","/lander_pages/1")||d("lp1.dailyprosper.com","/lander_pages/4")||d("lp1.dailyprosper.com","/lander_pages/6")||d("lp1.dailyprosper.com","/lander_pages/7")||d("lp1.dailyprosper.com","/lander_pages/5")||d("lp1.dailyprosper.com","/question_chains/19")||d("lp1.dailyprosper.com","/question_chains/30")||d("lp1.dailyprosper.com","/question_chains/65")||d("lp1.dailyprosper.com","/question_chains/66")||d("lp1.dailyprosper.com","/question_chains/67")||d("lp1.dailyprosper.com","/question_chains/38")||d("lp1.dailyprosper.com","/question_chains/22")||d("supersavings.io","/pages/lower_my_rates")||d("supersavings.io","/pages/auto_insurance")?e=>o({url:n,currentParams:e,paramsToRewrite:["sub5"],sub1:undefined,sub3:undefined,sub5:r}):d("findthemoney.io","/pages/fund")?e=>o({url:n,currentParams:e,paramsToRewrite:["sub5","sub3","sub1"],sub1:"41",sub3:"1005",sub5:r}):d("bestmomresources.com","/lander_pages/2")?e=>o({url:n,currentParams:e,paramsToRewrite:["sub5","sub3","sub1"],sub1:"41",sub3:"860",sub5:r}):d("everydaymomresource.com","/lander_pages/2")?e=>o({url:n,currentParams:e,paramsToRewrite:["sub5","sub3","sub1"],sub1:"41",sub3:"660",sub5:r}):d("everydaymomresource.com","/lander_pages/8")?e=>o({url:n,currentParams:e,paramsToRewrite:["sub5","sub3","sub1"],sub1:"41",sub3:"931",sub5:r}):d("everydaymomresource.com","/question_chains/34")?e=>o({url:n,currentParams:e,paramsToRewrite:["sub5","sub3","sub1"],sub1:"41",sub3:"932",sub5:r}):d("seniorhelperguide.com","/lander_pages/3")?e=>o({url:n,currentParams:e,paramsToRewrite:["sub5","sub3"],sub1:undefined,sub3:"937",sub5:r}):d("seniorhelperguide.com","/lander_pages/4")?e=>o({url:n,currentParams:e,paramsToRewrite:["sub5","sub3"],sub1:undefined,sub3:"938",sub5:r}):d("myfamilytree.io","/question_chains/41")||d("myfamilytree.io","/question_chains/19")||d("myfamilytree.io","/reliefbenefits")||d("myfamilytree.io","/pages/program_story")?e=>{const t=window.GclModule.getGclid(),r=window.GclModule.getGaClientId();return o({url:n,currentParams:e,paramsToRewrite:["sub4","sub5"],sub1:undefined,sub3:undefined,sub4:r,sub5:t})}:d("allpremiumauto.com","/articles/12")||d("allpremiumauto.com","/question_chains/15")||d("allpremiumauto.com","/question_chains/16")||d("allpremiumauto.com","/question_chains/18")||d("allpremiumauto.com","/question_chains/29")||d("allpremiumauto.com","/question_chains/30")||d("allpremiumauto.com","/question_chains/31")||d("allpremiumauto.com","/question_chains/32")||d("allpremiumauto.com","/question_chains/33")||d("allpremiumauto.com","/question_chains/34")||d("biggrantsearch.com","/question_chains/1")||d("biggrantsearch.com","/question_chains/9")||d("biggrantsearch.com","/question_chains/10")||d("biggrantsearch.com","/question_chains/11")||d("biggrantsearch.com","/question_chains/12")||d("lp1.dailyprosper.com","/question_chains/4")||d("lp1.dailyprosper.com","/question_chains/41")||d("lp1.dailyprosper.com","/question_chains/53")||d("lp1.dailyprosper.com","/question_chains/54")||d("lp1.dailyprosper.com","/question_chains/55")||d("lp1.dailyprosper.com","/question_chains/56")||d("lp1.dailyprosper.com","/question_chains/57")||d("lp1.dailyprosper.com","/question_chains/58")||d("lp1.dailyprosper.com","/question_chains/59")||d("lp1.dailyprosper.com","/question_chains/60")||d("lp1.dailyprosper.com","/question_chains/61")||d("lp1.dailyprosper.com","/question_chains/62")||d("lp1.dailyprosper.com","/question_chains/63")||d("lp1.dailyprosper.com","/question_chains/64")||d("lp1.dailyprosper.com","/question_chains/68")||d("lp1.dailyprosper.com","/question_chains/69")||d("lp1.dailyprosper.com","/question_chains/70")||d("lp1.dailyprosper.com","/question_chains/78")||d("lp1.dailyprosper.com","/question_chains/71")||d("lp1.dailyprosper.com","/question_chains/72")||d("lp1.dailyprosper.com","/question_chains/74")||d("lp1.dailyprosper.com","/lander_pages/8")||d("lp1.dailyprosper.com","/lander_pages/12")||d("lp1.dailyprosper.com","/lander_pages/13")||d("lp1.dailyprosper.com","/lander_pages/14")||d("lp1.dailyprosper.com","/lander_pages/15")||d("lp1.dailyprosper.com","/lander_pages/16")||d("homeowner.discountyourbills.com","/question_chains/1")||d("homeowner.discountyourbills.com","/question_chains/2")||d("homeowner.discountyourbills.com","/question_chains/3")||d("homeowner.discountyourbills.com","/question_chains/4")||d("homeowner.discountyourbills.com","/question_chains/5")?e=>{const t=window.GclModule.getGaClientId();return o({url:n,currentParams:e,paramsToRewrite:["sub4"],sub1:undefined,sub3:undefined,sub4:t,sub5:undefined})}:d("allpremiumauto.com","/pages/new_rule")?e=>o({url:n,currentParams:e,paramsToRewrite:["sub1","sub3","sub5"],sub1:"906",sub3:"1131",sub5:r}):d("lp1.dailyprosper.com","/lander_pages/2")||d("lp1.dailyprosper.com","/question_chains/9")?e=>{const t=new URLSearchParams(e);if(t.has("sub1")&&"808"==t.get("sub1")){const t=window.GclModule.getGaClientId();return o({url:n,currentParams:e,paramsToRewrite:["sub4","sub5"],sub4:t||"no_client",sub5:r})}return o({url:n,currentParams:e,paramsToRewrite:["sub5"],sub1:undefined,sub3:undefined,sub5:r})}:d("lp1.dailyprosper.com","/question_chains/21")||d("lp1.dailyprosper.com","/question_chains/42")?e=>o({url:n,currentParams:e+`&amp_device_id=${window.amplitude&&window.amplitude.getInstance()?window.amplitude.getInstance().options.deviceId:"0"}`}):e=>{if(!n)return null;const t=new URL(n),r=new URLSearchParams(t.search),i=new URLSearchParams(e),s={};return i.forEach((e,t)=>{r.has(t)&&""!=i.get(t)?s[t]=i.get(t):r.has(t)&&""==i.get(t)&&(s[t]=r.get(t))}),o({url:n,currentParams:e,paramsToRewrite:Object.keys(s),sub1:s.sub1||undefined,sub3:s.sub3||undefined,sub4:s.sub4||undefined,sub5:s.sub5||undefined})}},o=({url:e,currentParams:t,paramsToRewrite:n,sub1:r,sub3:o,sub4:u,sub5:l})=>{if(!e)return null;const c=new URL(e),d=s(n,t,c);return c.origin+i(c.pathname)+"?"+a(r,o,u,l,d)},i=e=>{if(!e)return"";const t=e.split("&");return t&&t.length>0?t[0]:""},s=(e=[],t,n)=>{const r=n.searchParams,o=new URLSearchParams(t.substr(1));return e.forEach(e=>{["sub1","sub3","sub4","sub5"].includes(e)&&o["delete"](e),r["delete"](e)}),o.toString()+"&"+r.toString()},a=(e,t,n,r,o)=>{
const i=e?"sub1="+e+"&":"",s=t?"sub3="+t+"&":"",a=n?"sub4="+n+"&":"",u=r?"sub5="+r+"&":"";return i+s+a+u+o},u=(e,t)=>{let n=document.createElement("a");n.href=e,n.target=t?"_blank":"_top",n.rel="noreferrer noopener",document.body.appendChild(n),n.click(),n.remove()},l=e=>"/redirects/redirect?url="+e,c=(e,t=!1,n=!1)=>{if(window.self==window.top||t)if(t){const t=document.createElement("button");t.onclick=function(){const t=window.open(e,"_blank","noreferrer");t&&(t.opener=null,t.location)},t.click()}else u(e,t);else u(e,t)},d=(e,t)=>{if(t&&t.length>0){const n=window.location.pathname;return n&&"/"==n[n.length-1]?window.location.host==e&&window.location.pathname.slice(0,-1)==t:window.location.host==e&&window.location.pathname==t}return window.location.host==e},h=(e=[],t=!0)=>{console.log("HANDLE DOUBLE CLICK:::::[links,fallback]",[e,t]),t&&0===e.length&&(e=[...document.querySelectorAll("a[data-newTabUrl]")]),e.map(e=>{e.getAttribute("href")?e.href=window.LinkModule.addCurrentParamsToUrl(e.href):e.removeAttribute("href"),e.addEventListener("click",()=>{p(e)})})},p=e=>{console.log("HANDLE LINKS REDIRECTS::::FIRE");const t=e.getAttribute("data-newTabUrl");t&&t.length>0&&window.LinkModule.performRedirect(window.LinkModule.addCurrentParamsToUrl(t),!0)};return{addCurrentParamsToUrl:n,addParamsToUrl:r,performRedirect:c,handleDoubleLinks:h,handleLinksRedirects:p,_isUrl:d}})();window.LinkModule=e}const FormsModule=(()=>{const e=async(e,t)=>{const n=e,r=n.elements;for(let e=0;e<r.length;e++){const n=r[e],o=t[n.name];o&&(n.value=t[n.name])}},t=e=>{const{domain:t,landerId:n,emailInput:r}=e;console.log("legacy action",t,n,r)},n=()=>{try{const t=document.createElement("script");t.type="text/javascript",t.src="https://secureanalytic.com/scripts/push/script/l8emwlpgkr?url="+encodeURI(self.location.hostname),t.onload=function(){push_init(),push_subscribe()};const n=document.getElementsByTagName("head");if(n){const e=n[0];e&&e.appendChild(t)}}catch(e){console.log("import script show error",e)}},r=e=>{e.preventDefault();const{target:t}=e,n=t.closest("form"),r=n.querySelector(".default_submit");if(n.reportValidity()){const e=t.closest(".lander-item"),n=t.getAttribute("answer_id"),o=window.TreeChainModule.answerTreeNode(n);o&&window.TreeChainModule.insertAfterQuestion(e,o,!1),r.click()}},o=e=>{const t=["#firstName","#lastName","#email","#phone","#address","#date_of_birth","#zip","#leadid_token","#authenticity_token","#trusted_id"];return t.map(t=>e&&e.querySelector(t))};let i=!1;const s=e=>{const t=window.location.pathname;let n=!1,r,o,s,a;window.AfterSubmitThirdPartiesConfig.getList().then(e=>{console.log("domainPages",e),console.log("domainPages[_currentPagePath]",e[t]),r=Object.keys(e).includes("all_pages"),o=e.all_pages,s=e[t],a="undefined"!=typeof e[t],console.log("isCurrentPageHasHandlers",a),n=!0});let u=!0;setInterval(()=>{n&&u&&(u=!1,console.log("change notSubmittedYet to false",u),a?(console.log("domainPages[currentPagePath]",s),s.initHandlers({finalCb:()=>{console.log("CurrentPage Handlers Loaded"),e()}})):r&&!i?(console.log("before finalCb fired"),o.initHandlers({finalCb:()=>{console.log("finalCb fired"),r&&!i&&(i=!0,a?console.log("all_pages loaded"):e())}})):(console.log("NO HANDLERS SUBMIT"),e()))},500)};return{runSubmitEvents:s,prefillData:e,trackAfterSubmit:t,initPush:n,handleAnswerButton:r,getFormFields:o}})();window.FormsModule=FormsModule;const HandleLeadFormModule=(e,t,n)=>{if(!e)return!1;const r=window.LanderInfoModule.getLanderId();let o={lander_id:r||undefined};const i=async(e,t)=>{const n=await window.QuestionsResultsStoreModule();await n.init(()=>{}),await n.saveAnswer(e,t)};e&&e.forEach(e=>{console.log("FORM",e),e&&e.addEventListener("submit",r=>{if(console.log("form event",r),r.preventDefault(),window.HoneypotValidationModule.validate("#lead_real_name"))return window.location.replace("/get_my_reward"),!1;const s=()=>{console.log("form submit");const r=e.querySelector('input[name="authenticity_token"]')||e.querySelector('input[name="token"]'),s=e.querySelector("#date_of_birth"),a=e.querySelector('input[name="zip"]'),u=o.birth?o.birth:s?s.value:null,l=o.zip?o.zip:a?a.value:null;u&&i("birth",u),l&&i("zip",l);const c=e.querySelectorAll(".form-input"),d=[...c].reduce((e,t)=>(console.log("NODE.NAME",t.name),t.value&&(e[t.name]=t.value),"address"===t.name&&i(t.name,t.value),e),{});o=Object.assign(o,d,{birth:u});const h=document.querySelector(".questions-wrapper");h&&h.querySelectorAll("form").forEach(e=>{e&&window.FormsModule.prefillData(e,o)}),t(()=>({form:e,call:()=>n(o,r)}))};console.log("fireSubmitThirdPartyEvents",s),window.FormsModule.runSubmitEvents(s)})})};window.HandleLeadFormModule=HandleLeadFormModule;const MaskModule=(e,t)=>{if(!e)return!1;Array.from(e).forEach(e=>{const n=e.getAttribute("data-custom-validation-pattern");if(n)IMask(e,{mask:n});else if("phone"===t&&IMask(e,{mask:"000-000-0000"}),"zip"===t&&IMask(e,{mask:"00000"}),"DOB"===t){e.pattern="\\d{1,2}-\\d{1,2}-\\d{4}";const t=31536e6,n=(new Date).getFullYear()-18;IMask(e,{mask:Date,pattern:"m{-}`d{-}`Y",min:new Date(new Date-120*t),max:new Date(n,11,31),autofix:!0,lazy:!0,format:function(e){var t=e.getDate(),n=e.getMonth()+1,r;return t<10&&(t="0"+t),n<10&&(n="0"+n),[n,t,e.getFullYear()].join("-")},parse:function(e){var t=e.split("-");return new Date(t[2],t[0]-1,t[1])}})}})};window.MaskModule=MaskModule;const LeadsModule=(()=>{const e=async(e="",t={})=>{try{console.log("post data url",e),console.log("post data",t);const r=document.querySelector('meta[name="csrf-token"]'),o=r.getAttribute("content"),i=await fetch(e,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json","X-CSRF-Token":o},body:JSON.stringify(t)});return await i.json()}catch(n){return console.log("postData error: "+n.message),{}}},t=async(e="",t={})=>{console.log("UPDATE LEAD",t);const n=document.querySelector('meta[name="csrf-token"]'),r=n.getAttribute("content");try{const n=await fetch(e,{method:"PATCH",credentials:"same-origin",headers:{"Content-Type":"application/json","X-CSRF-Token":r},body:JSON.stringify(t)});return await n.json()}catch(o){console.log(o)}},n=async(t,n={})=>{try{return await e(`/questions/${t}/track.json`,n)}catch(r){console.log("track failed",r)}},r=async(t,n={})=>{try{return await e(`/question_chains/${t}/track.json`,n)}catch(r){console.log("track failed",r)}},o=()=>{let e;const t=document.querySelector(".main-chain"),n=!!t&&"true"==t.getAttribute("data-use-sub-six");return"undefined"==(e=n?t?t.getAttribute("data-sub-six"):undefined:localStorage.getItem("local_lead_id"))?undefined:e};return{postData:e,updateLead:t,trackQuestionRender:n,trackChainRender:r,getLocalLeadId:o}})();window.LeadsModule=LeadsModule;const TmpPixelsModule=(()=>{const e=()=>{console.log("trackBing"),function(e,t,n,r,o){var i,s,a;e[o]=e[o]||[],i=function(){var t={ti:"26082836"};t.q=e[o],e[o]=new UET(t),e[o].push("pageLoad"),e[o].push("event","Lead",{})},(s=t.createElement(n)).src=r,s.async=1,s.onload=s.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(i(),s.onload=s.onreadystatechange=null)},(a=t.getElementsByTagName(n)[0]).parentNode.insertBefore(s,a)}(window,document,"script","//bat.bing.com/bat.js","uetq")},t=e=>{const t=Object.keys(e).map(t=>t+"="+e[t]).join("&"),n="https://www.vallr.site/",r=window.LinkModule.addParamsToUrl(n)(t);console.log("trackerUrl",r);const o=document.createElement("iframe");o.setAttribute("src",r),o.setAttribute("frameborder","0"),o.setAttribute("scrolling","no"),o.setAttribute("height","1"),o.setAttribute("width","1"),document.body.appendChild(o)},n=()=>{const e=document.createElement("iframe"),t="https://track.clickbooth.com/l/con?cbiframe=1&oid=55339&cbtid=sub5val";e.setAttribute("src",t),e.setAttribute("scrolling","no"),e.setAttribute("frameborder","0"),e.setAttribute("width","1"),e.setAttribute("height","1"),e.setAttribute("loading","eager"),document.body.appendChild(e)},r=async e=>{const t=localStorage.getItem("pushnamiSubscriberId");if(!t)return;e.svu=!0;const n={sub:{},urlParams:e,subscriberId:t};console.log("pn data update",n),await fetch("https://api.pushnami.com/api/push/subscribe",{method:"POST",body:JSON.stringify(n),mode:"cors",redirect:"follow",headers:new Headers({key:"5d0cd7a65b245178f6bfd1de"})})};return{trackBing:e,trackFbVallr:t,trackClickBooth:n,updatePushnamiSubscriber:r}})();window.TmpPixelsModule=TmpPixelsModule;const QuestionSliderModule=(()=>{let e,t,n,r,o;const i=i=>{e=i.transformStepCurrent,t=i.transformStepCount,n=i.transformStepWidth,r=i.transformStepWidthExt,o=s(n,e,r),i.callback&&i.callback()},s=(e,t,n)=>`${+e*+t}${n}`,a=(t,n)=>{o=s(t,e,n)},u=e=>{t=e},l=(e=1)=>{let n;return 1/t*100*e},c=(n=1)=>{let r,o;const i=l(n)+e/t*100*n;return i>100?100:i},d=e=>{e.style.width=l()+"%"},h=e=>{e.style.width=c()+"%"},p=e=>{e.classList.contains("mobile")&&(e.style.transform=`translateX(${o})`)},f=e=>{const t=e.parentNode.querySelector(".bar-placeholder");t&&(t.classList.add("hidden"),e.classList.remove("hidden"))},m=(e,t)=>{t.forEach(e=>f(e)),e.forEach(e=>h(e)),t.forEach(e=>p(e))},g=e=>{const t=360,n=c(),r=t-t/100*n,o=e.querySelector(".progress-val"),i=e.querySelector(".progress-text");console.log("progressCircleEl",o),o.style.strokeDashoffset=r,i.textContent=parseInt(n)+"%"},y=t=>{const i=t.querySelectorAll(".lander-item")[e-1],a=t.querySelectorAll(".lander-item")[e];i&&i.classList.remove("active"),a&&a.classList.add("active"),t.style.transform=`translateX(-${o})`,A(a),o=s(n,+e+1,r)},v=n=>{n.forEach(n=>n.textContent=e>t?t:e)},w=(n,r="")=>{console.log("transformStepCurrent",e),console.log("transformStepCount",t),n.forEach(e=>{e.textContent=parseInt(c())+r})},b=(t,n=!1)=>{const r=n||e;t.forEach((e,t)=>{t+1<=r?e.classList.add("active"):e.classList.remove("active")})},k=(e,t=null)=>{console.log("el",t);const n=(t||document).querySelectorAll(".question-answers .button");n.forEach(t=>{t.closest(".hidden")||(e?t.setAttribute("disabled","disabled"):t.removeAttribute("disabled"))})},S=(e,t)=>{document.querySelectorAll(".progress-bar").forEach(e=>{e.classList.remove("hidden")}),e&&t.forEach(e=>e.classList.add("hidden"))},_=e=>{const t=document.querySelectorAll(".progress-circle");t.forEach(t=>{e?t.classList.add("hidden"):t.classList.remove("hidden")})},E=(n,r,o,i,s,a)=>{m(n,r);const u=document.querySelectorAll(".progress-circle");a&&w(a),u&&Array.from(u).map(e=>{g(e)}),y(o),window.scrollTo(0,0);const l=document.querySelectorAll(".lander-item")[+e],c=l?l.dataset:{};if(l){const e=l.hasAttribute("data-is-bar-hidden");S(e,r),_(e)}else S(!1,r),_(!1);if(e==t&&i){const e=window.LinkModule.addCurrentParamsToUrl(i),t=new URL(e);t.origin==window.location.origin?window.LinkModule.performRedirect(window.LinkModule.addCurrentParamsToUrl(i),!1,!0):window.LinkModule.performRedirect(window.LinkModule.addCurrentParamsToUrl(i),!1)}e++,v(s);const d=document.querySelectorAll(".steps .step");b(d,c.anchor)},A=e=>{if(!e)return!1;const t=e.querySelector(".questionBackLink"),n=!!t&&t.getAttribute("backlink");n&&window.BrowserNavBehaviorModule.setBackBtnLink(n)};return{init:i,toggleLoading:k,setInitProgressBarWidth:d,nextQuestion:E,updateStepSize:a,updateStepTotalCount:u}})();window.QuestionSliderModule=QuestionSliderModule;const ClassWatcher=(e,t,n,r)=>{let o=null,i=e.classList.contains(t);const s=()=>{o=new MutationObserver(u),a()},a=()=>{o.observe(e,{attributes:!0})},u=e=>{for(let o of e)if("attributes"===o.type&&"class"===o.attributeName){let e=o.target.classList.contains(t);i!==e&&(i=e,e?n():r())}};return s(),o};window.ClassWatcherModule=ClassWatcher;const LanderInfoModule=function(){const e=Object.freeze({DEFAULT:"default",MOMMY:"mommy-template",QUESTIONS_ON_FORM:"questions-on-form-template",CLICK:"click-template",MINIMAL:"minimal-template",CHEAP_AUTO:"cheap-auto-template"}),t=Object.freeze({USARESOURCEFINDERCOM:"usaresourcefinder.com",SMILECURRENTCOM:"smilecurrent.com",MOMMYSRESOURCECOM:"mommysresource.com",USHOUSINGHELPERCOM:"ushousinghelper.com"}),n=()=>{const t=document.getElementById("lander");if(!t)return undefined;const n=t.classList.contains(e.MOMMY),r=t.classList.contains(e.CLICK),o=t.classList.contains(e.MINIMAL),i=t.classList.contains(e.QUESTIONS_ON_FORM);switch(!0){case i:return e.QUESTIONS_ON_FORM;case r:return e.CLICK;case n:return e.MOMMY;case o:return e.MINIMAL;default:return e.DEFAULT}},r=()=>{const e=document.getElementById("lander");if(!e)return undefined;const t=document.querySelector("[data-lander-id]"),n=t.getAttribute("data-lander-id");if(n)return n;const r=window.location.pathname.match(/([^\/]+$)/g);return r?r[0]:undefined},o=(e,n)=>{if(e===t.MOMMYSRESOURCECOM)return["1"].includes(n)},i=e=>{switch(console.log("currentTemplate",e),e){case window.LanderInfoModule.TEMPLATE_TYPES.MOMMY:return[document.querySelector(".lander-mommy-form"),document.querySelector(".form-questions-wrapper")];case window.LanderInfoModule.TEMPLATE_TYPES.QUESTIONS_ON_FORM:case window.LanderInfoModule.TEMPLATE_TYPES.MINIMAL:return[document.querySelector(".lander-form"),document.querySelector(".form-questions")];case window.LanderInfoModule.TEMPLATE_TYPES.CLICK:return[document.querySelector(".lander-mcr-form"),document.querySelector(".form-questions")];default:return[document.querySelector(".lander-body"),document.querySelector("#lander-wrapper")]}};return{DOMAINS:t,TEMPLATE_TYPES:e,getTemplateType:n,getLanderId:r,isLanderTrackable:o,getFormBlocksToSwitch:i}}();window.LanderInfoModule=LanderInfoModule;const BrowserNavBehaviorModule=function(){const e=async e=>{console.log(e),window.addEventListener("popstate",function(t){null!==t.state&&window.location.replace(window.LinkModule.addCurrentParamsToUrl(e))}),window.history.pushState({},"page","")};return{setBackBtnLink:e}}();window.BrowserNavBehaviorModule=BrowserNavBehaviorModule;const prepopulateLocationModule=async e=>{if(!e)return!1;const t=t=>{Object.keys(t).map(n=>{const r=[...e.querySelectorAll(`.location_tag[data-tag=${n}]`)];r.map(e=>{t[n]&&(e.innerHTML=t[n]),e.classList.add("loaded")})})},n=async()=>{const e=async()=>{const e=e=>{const t=new RegExp("ip=([0-9.]*)","g"),n=t.exec(e)||{};return n[1]},t="https://www.cloudflare.com/cdn-cgi/trace",n=await fetch(t,{method:"GET",headers:{"Content-Type":"text/plain"}});return e(await n.text())},t=async e=>{const t=`https://api.ipstack.com/${e}?access_key=7f6d9154a6086901c437fba4446cd6de`,n=await fetch(t,{method:"GET"});return await n.json()},n=()=>{const e=document.querySelector("[data-session-location]"),t=e&&e.dataset.sessionLocation||"{}";return JSON.parse(t)},r=()=>{const e=document.querySelector("[data-client-ip]");return e?e.dataset.clientIp:""};let o=n();if(console.log("geoResponse:IP",r()),console.log("geoResponse[0]",o),!o.ip){const n=r()||await e();o=await t(n)||{},console.log("geoResponse::Finish",o)}return!o.error&&{country:o.country_name,countryCode:o.country_code,state:o.region_name,stateCode:o.region_code,city:o.city}},r=async e=>{const t=e.coords.latitude,n=e.coords.longitude,r=(e,t)=>{const n=new google.maps.LatLng(e,t),r=new google.maps.Geocoder;return new Promise((e,t)=>r.geocode({latLng:n},function(n,r){const o=(e,t)=>{const n=e=>e.types[0]===t,r=e.map(e=>e),o=r.find(n);return o};if(r==google.maps.GeocoderStatus.OK){const t=n[0].address_components,r=o(t,"country"),i=o(t,"administrative_area_level_1")||o(t,"administrative_area_level_2")||o(t,"administrative_area_level_3"),s=o(t,"locality"),a={country:r.long_name,countryCode:r.short_name,state:i.long_name,stateCode:i.short_name,city:s.long_name};e(a)}else t()}))},o=await r(t,n);return o},o=()=>new Promise(function(e,t){navigator.geolocation.getCurrentPosition(e,t)}).then(e=>r(e))["catch"](e=>{console.log("Can't get user geolocation",e)}),i=async()=>{let e=!1;return!(e=await n())&&"geolocation"in navigator&&(e=await o()),e&&t(e)},s=[...document.querySelectorAll(".location_tag[data-tag]")];return s&&s.length>0?await i():void 0};window.prepopulateLocationModule=prepopulateLocationModule;const prepopulateTemplatesModule=(e,t={},n=".questionEl > .question-title")=>e?new Promise(r=>{const o=Object.fromEntries(new URLSearchParams(window.location.search));t={...o,...t},0===Object.keys(t).length&&(t=JSON.parse(localStorage.getItem("savedUser"))||{}),localStorage.setItem("savedUser",JSON.stringify(t));const i=new RegExp("::([_a-zA-Z]*)?(\\(([^()]*?)\\))?::","g"),s=[...e.querySelectorAll(n)];s.map(e=>{let n=e.dataset.initialtext||e.innerHTML;i.lastIndex=0,e.innerHTML=n.replace(i,e=>{i.lastIndex=0;const n=i.exec(e)||{},r=n[3]||"",o=t[n[1]];return o||r})}),r()}):Promise.resolve(!1);window.prepopulateTemplatesModule=prepopulateTemplatesModule;const prepopulateAnswerHistoryModule=async e=>{if(!e)return!1;const t=/[^0-9.-]+/g,n=e=>e&&"string"==typeof e,r=e=>e&&"number"==typeof e,o=e=>parseFloat(n(e)?e.replace(t,""):r(e)&&e),i=(e,{value:t,factor:n})=>{if(!e)return t;const r="",i=o(t),s=o(n),a=isNaN(s);if(a)return t;const u=!isNaN(i)&&!isNaN(s);if(!u)return r;switch(e){case"multiply":return i*s;case"divide":return 0==s?i:i/s;case"subtract":return i-s;case"add":return i+s;default:return r}},s=(e,{factor:t,action:n})=>t&&n?i(n,{value:e,factor:t}):e,a=t=>{try{Object.entries(t).forEach(([n,r])=>{const o=Array.from(e.querySelectorAll(`.answer_history_tag[data-first-question-id="${n}"]`));o.map(e=>{if(r){const n=s(r,{factor:e.hasAttribute("data-first-question-factor-value")&&e.getAttribute("data-first-question-factor-value"),action:e.hasAttribute("data-first-question-factor-action-type")&&e.getAttribute("data-first-question-factor-action-type")}),o=e.hasAttribute("data-second-question-id")&&e.getAttribute("data-second-question-id"),i=t[o]||NaN,a=s(i,{factor:e.hasAttribute("data-second-question-factor-value")&&e.getAttribute("data-second-question-factor-value"),action:e.hasAttribute("data-second-question-factor-action-type")&&e.getAttribute("data-second-question-factor-action-type")}),u=s(n,{factor:a,action:e.hasAttribute("data-first-question-and-second-question-expression-action-type")&&e.getAttribute("data-first-question-and-second-question-expression-action-type")}),l=s(u,{factor:e.hasAttribute("data-overall-factor-value")&&e.getAttribute("data-overall-factor-value"),action:e.hasAttribute("data-overall-factor-action-type")&&e.getAttribute("data-overall-factor-action-type")});e.innerHTML=l}e.classList.add("loaded")})})}catch(n){console.log("populateAnswerHistoryTags ERROR",n)}},u=async()=>{try{const t=await window.QuestionsResultsStoreModule();await t.init(()=>{});const n=await t.getStore(t.STORE_KEY);return a(n)}catch(e){console.log("handleAnswerHistoryTags ERROR",e)}},l=[...document.querySelectorAll(".answer_history_tag[data-first-question-id]")];return l&&l.length>0?await u():void 0};window.prepopulateAnswerHistoryModule=prepopulateAnswerHistoryModule;const filterAnswersByVisibilityRulesModule=async e=>{if(!e)return!1;const t=/[^0-9.-]+/g,n=e=>e&&"string"==typeof e,r=e=>e&&"number"==typeof e,o=e=>parseFloat(n(e)?e.replace(t,""):r(e)&&e),i=t=>{try{Object.entries(t).forEach(([t,n])=>{const r=Array.from(e.querySelectorAll(`[data-visibility-rule-target="${t}"]`));console.log("answersEls",r),r.forEach(e=>{const t=e.getAttribute("data-visibility-rule-action"),r=e.getAttribute("data-visibility-rule-condition");"hide"==t&&"less_than"==r?o(e.text)<=o(n)&&e.parentNode.removeChild(e):"hide"==t&&"greater_than"==r&&o(e.text)>=o(n)&&e.parentNode.removeChild(e)})})}catch(n){console.log("filterAnswers ERROR",n)}},s=async()=>{try{const t=await window.QuestionsResultsStoreModule();await t.init(()=>{});const n=await t.getStore(t.STORE_KEY);return i(n)}catch(e){console.log("handleAnswerHistoryTags ERROR",e)}},a=[...document.querySelectorAll("[data-visibility-rule-action]")];return a&&a.length>0?await s():void 0};window.filterAnswersByVisibilityRulesModule=filterAnswersByVisibilityRulesModule;const getFormFieldsObject=e=>{const t=e.querySelector('[name="first_name"]')||{},n=e.querySelector('[name="last_name"]')||{},r=e.querySelector('[name="email"]')||{},o=e.querySelector('[name="phone"]')||{},i=e.querySelector('[name="address"]')||{};return{first_name:t.value,last_name:n.value,email:r.value,phone:o.value,address:i?i.value:null}},formRedirectLoaderModule=(e,t=!1)=>{if(!e||t)return;let n=null;const r=e.getAttribute("redirect_link"),o=e.getAttribute("new_tab_redirect_link");console.log("currenttabredir",r),console.log("newtabredir",o);let i=(new Date).getTime();if(r&&r.length>0)n=window.LoaderModule("#postloader-wrapper");else{if(!(o&&o.length>0))return;n=window.LoaderModule("#loader-wrapper")}window.prepopulateTemplatesModule(document.querySelector("body"),getFormFieldsObject(e),".loader-text ");const s=async()=>{try{return await n.triggerLoader()}catch(e){console.log("redirects module show loader error: ",e)}},a=async(e=null)=>{try{const r=await n.hideLoader(i,undefined,e);return r}catch(t){e&&e(),console.log("redirects module hide loader error: ",t)}};return{show:s,hide:a}},formRedirectsModule=e=>{const t=e.getAttribute("redirect_link"),n=e=>"?"+Object.keys(e).map(t=>e[t]?t+"="+e[t]:"").join("&");if(t&&t.length>0)return window.LinkModule.performRedirect(window.LinkModule.addParamsToUrl(window.LinkModule.addCurrentParamsToUrl(t))(n(getFormFieldsObject(e))))},formNewTabRedirect=e=>{const t=e.getAttribute("new_tab_redirect_link"),n=e=>"?"+Object.keys(e).map(t=>e[t]?t+"="+e[t]:"").join("&");t&&t.length>0&&window.LinkModule.performRedirect(window.LinkModule.addParamsToUrl(window.LinkModule.addCurrentParamsToUrl(t))(n(getFormFieldsObject(e))),!0)},finalRedirectsModule=e=>{const t=e||document.querySelector("[data-final-url]"),n=t?t.getAttribute("data-final-url"):undefined;n&&window.LinkModule.performRedirect(window.LinkModule.addCurrentParamsToUrl(n))},submitRedirect=e=>{e&&window.LinkModule.performRedirect(window.LinkModule.addCurrentParamsToUrl(e))};window.submitRedirect=submitRedirect,window.formNewTabRedirect=formNewTabRedirect,window.formRedirectsModule=formRedirectsModule,window.finalRedirectsModule=finalRedirectsModule,window.formRedirectLoaderModule=formRedirectLoaderModule;const ArticleQuestionModule=(()=>{const e=e=>{const t=new URLSearchParams(window.location.search).get("iframeId"),n=t+(e?"::window.nextYes::":"::window.nextNo::");document.querySelector("html").classList.contains("iFramed")&&parent.postMessage(n,"*")},t=e=>document.querySelector(`.article-wrapper[data-question-id="${e}"]`),n=e=>{if(e)return fetch(`/questions/${e}/article`)},r=(e,t=!0)=>{if(!e)return!1;const n=t?window.nextYes:window.nextNo,{questionId:r,answerId:o}=e.dataset,i=e.getAttribute("redirect_link"),s=e.getAttribute("new_tab_redirect_link"),a={question_id:r,answer_id:o,target:{getAttribute:()=>{}}};n(s,a,e,i)},o=e=>{const o=t(e);if(!o)return!1;const i=n(e),s=o.querySelector(".loader_placeholder"),{interceptActions:a,interceptRedirects:u}=o.dataset;return!!i&&i.then(e=>e.text()).then(e=>{o.insertAdjacentHTML("beforeend",e),"true"==a&&o.addEventListener("click",e=>{e.preventDefault(),r(o)}),"true"==u&&[...o.querySelectorAll("a")].map(e=>{const t=e.getAttribute("target");e.addEventListener("click",()=>{const t=e.getAttribute("target"),n=e.getAttribute("href");if(t)r(o);else if(n){try{window.LoaderModule("#loader-wrapper").triggerLoader()}catch(i){console.log("triggerLoader error",i)}window.LinkModule.performRedirect(window.LinkModule.addCurrentParamsToUrl(n))}})});const t=new Promise((e,t)=>{const n=[...o.querySelectorAll(".embedChainScript")];n.map(n=>{const r=document.createElement("script");document.body.appendChild(r),r&&(r.onload=e,r.onerror=t,r.async=!0,r.src=n?n.src:"")})});t.then(e=>{console.log("embed script loaded",e)}),s.remove()})["catch"](function(e){console.warn("Something went wrong.",e)})};return{handleArticleLoading:o,handleArticleAsAnswer:r,requestArticleForQuestion:n,embedCallback:e}})();window.ArticleQuestionModule=ArticleQuestionModule;const TreeChainModule=(()=>{const e=e=>document.querySelector(`.tree-chain[data-answer-id="${e}"]`),t=e=>{if(console.log("deleteAllNextQuestions",e),!e)return!1;let n=e.nextElementSibling;n&&n.remove(),e.nextElementSibling&&t(e)},n=e=>{const t=document.querySelector(".main-chain .questions-wrapper");t&&t.setAttribute("data-final-url",e)},r=(e,r,o=!1)=>{const i=o?".question-wrapper.lander-item.hidden":".questions-wrapper .lander-item";if(!e)return!1;if(!r)return!1;const s=r.getAttribute("data-answer-id"),a=e.querySelector(`[data-answer-id="${s}"]`),u=a&&a.dataset||{},l="replace"===u.chainMode;if(l){t(e);const o=r.querySelector("[data-final-url]"),i=o&&o.getAttribute("data-final-url");console.log("new redirect link",i),n(i)}const c=e,d=r.querySelectorAll(i);Array.prototype.reverse.call([...d]).forEach(e=>{c.parentNode.insertBefore(e,c.nextSibling)})},o=e=>{if(e)return fetch(`/questions/${e}/tree.html`)},i=e=>{if(e)return fetch(`/questions/${e}/nested_tree.html`)},s=e=>{const t=document.querySelector(".treeChainsWrapper");return!!t&&(window.ChainHelperModule.toggleAnswersDisableState("add"),e?e.then(e=>e.text()).then(e=>{window.ChainHelperModule.toggleAnswersDisableState("remove");const n=new DOMParser,r=n.parseFromString(e,"text/html"),o=r.querySelectorAll(".tree-chain");o.forEach(e=>{t.appendChild(e)})})["catch"](function(e){console.warn("Something went wrong.",e)}):(window.ChainHelperModule.toggleAnswersDisableState("remove"),!1))};return{answerTreeNode:e,insertAfterQuestion:r,requestTreeForQuestion:o,requestNestedTreeForQuestion:i,handleTreeLoading:s}})();window.TreeChainModule=TreeChainModule;const ChainHelperModule=(()=>{const e=()=>{const e=document.querySelector(".main-chain");return e?parseInt(e.getAttribute("data-chain-id")):undefined},t=()=>{const e=document.querySelector(".lander-item.active");return e?parseInt(e.getAttribute("data-id")):undefined},n=()=>{const e=document.querySelector(".lander-item.active");if(!e)return undefined;const t=e.nextElementSibling;return t?parseInt(t.getAttribute("data-id")):undefined},r=()=>{const e=document.querySelector("[data-final-url]"),t=e?e.getAttribute("data-final-url"):undefined;return t},o=()=>{const e=document.querySelector("#leadid_token"),t=e&&e.value;console.log("@@@@@@@@@@@@@@@@",t),t&&document.querySelectorAll("#leadid_token").forEach(e=>e.setAttribute("value",t))},i=e=>{let t=window.LeadsModule.getLocalLeadId();if(t)return window.LeadsModule.updateLead(`/leads/${t}.json`,{lead:{leadid_token:e}})},s=async e=>{if(!e)return!1;const t=e.querySelector("[data-is-push-enabled]"),n=!!t&&t.getAttribute("data-is-push-enabled");"true"==n&&window.FormsModule.initPush()},a=e=>{const t=document.querySelectorAll(".lander-item");t&&t.forEach(t=>{new window.ClassWatcher(t,"active",()=>e(t),()=>console.log("removed"))})},u=()=>{a(s)},l=e=>{document.querySelectorAll(".button.answer").forEach(t=>{"add"==e?t.classList.add("treeDisable"):t.classList.remove("treeDisable"),t.parentElement.style.cursor="add"==e?"wait":"initial"})};return{fillAllLeadIdInputs:o,sendNewToken:i,enablePush:s,startWatchLanderItemsToEnablePush:u,chainId:e,getFinalUrl:r,currentActiveQuestionId:t,nextQuestionId:n,toggleAnswersDisableState:l}})();window.ChainHelperModule=ChainHelperModule;const QuestionHelperModule=(()=>{const e=e=>{e&&window.LinkModule.performRedirect(window.LinkModule.addCurrentParamsToUrl(e),!0)},t=(e,t)=>new Promise(n=>{try{if(e&&e.length>0){const r=document.querySelector(".chain-container");r&&(r.style.opacity="0");const o=()=>{window.LinkModule.performRedirect(window.LinkModule.addCurrentParamsToUrl(e),!1,!e.includes("fullpage"))};window.LeadsModule.postData("/clicks",{answer_click:t}).then(()=>{o(),n(),console.log(e.includes("fullpage"),"11111111111111")})["catch"](e=>{console.log("handleSubmitRedirect promise e",e),o(),n()})}else n()}catch(r){console.error("handleSubmitRedirect catch e",r),n()}}),n=e=>{e||console.error("can't handle LeadToken without questionEl");const t=e&&e.querySelector("#leadid_token");t&&window.ChainHelperModule.sendNewToken(t.value)},r=e=>(e||console.error("can't get num val without questionEl"),e&&e.querySelector(".current-value")?e.querySelector(".current-value").innerText.match(/[^\$].*$/)[0]:null),o=e=>e&&e.selectedText?e.selectedText:null,i=(e,t)=>{console.log("getLeadData",e);const n=e.target.getAttribute("answer_id")||e.answer_id,i=e.target.getAttribute("question_id")||e.question_id;console.log("before entered_value",e.entered_value,t),console.log("before entered_value",e.numerical,t),console.log("before entered_value",r(t),t),console.log("before entered_value",e.target.innerText,t),console.log("before entered_value",o(e),t);const s=e.entered_value||e.numerical||r(t)||e.target.innerText||o(e)||null;return console.log("entered_value",s),{answer_id:n,question_id:i,entered_value:s,local_lead_id:window.LeadsModule.getLocalLeadId()}},s=(e,t)=>{const n=window.TreeChainModule.answerTreeNode(t);if(n){const t=e.closest(".lander-item");window.TreeChainModule.insertAfterQuestion(t,n)}},a=()=>{const e=()=>{const e=[...document.querySelectorAll(".skip-btn")];return e.find(e=>e.offsetParent)},t=()=>{const e=[...document.querySelectorAll(".question-answers.select button.button:not(.hidden)")];e.map(e=>e.classList.add("hidden"))},n=e();t();const r=[...document.querySelectorAll(".lander-item.active .nested-questions:not(.hidden)")][0];console.log("nestedContainer",r);const o=!!r&&[...r.querySelectorAll(".questionEl")].pop();console.log("lastNestedQuestion",o);const i=!!o&&o.querySelector(".button.hidden");console.log("btnToShow",i),i&&i.classList.remove("hidden")},u=e=>{const t=()=>{const t=e.closest(".question-answers");if(t){const e=t.querySelectorAll(".answered");return[...e].map(e=>e.classList.remove("answered"))}};e&&(t(e),e.classList.add("answered"))},l=(e,t=!1)=>{console.log("getNestedQuestions::answerId",e);const n=document.querySelector(`.nested-questions[data-parentid='${e}'][data-show-by-default='${t}']`);return n},c=e=>{const t=document.querySelector(`.nested-questions[data-question-id='${e}'][data-show-by-default=true]`);return t},d=(e,t,n,r=!1)=>{const o=e=>e.offsetParent;let i=[],s=e.nextElementSibling;for(;s;)i.push(s),s=s.nextElementSibling;console.log("removeNextSiblings::",i),i.map(e=>{const i=!r||+e.dataset.questionId==+t;o(e)&&i&&!e.classList.contains("form-caption")&&(e.classList.add("hidden"),e.dataset.hiddenByQuestionId=t,e.dataset.hiddenByAnswerId=n)})},h=(e,t)=>{const n=[...document.querySelectorAll(`[data-hidden-by-question-id='${e}']`)];console.log("showNestedsHiddenByQuestion::",n),n.map(e=>{const n=+e.dataset.hiddenByAnswerId==+t;console.log(e,n),n||(e.classList.remove("hidden"),e.dataset.hiddenByQuestionId="",e.dataset.hiddenByAnswerId="")})},p=(e,t,n=!1)=>{const r=t.dataset;console.log("elData",r),console.log("answerId",e);const o="true"===r.keepPrevious||n;let i=l(e,n);if(i){const n=t.parentElement,s=n.querySelector(".questionEl > .form-caption"),a=i.querySelector(":scope > .skip-btn");a&&a.remove(),d(t,r.questionId,e,o),t.parentNode.insertBefore(i,t.nextSibling),i.classList.remove("hidden"),s&&n.appendChild(s)}else d(t,r.questionId,e,o),h(r.questionId,e);return a(),!!i};return{handleLeadToken:n,getLeadData:i,insertTreeNode:s,triggerPopUp:e,handleSubmitRedirect:t,removeNextSiblings:d,markAsAnswered:u,handleNestedQuestions:p,getNestedQuestions:l,getQuestionDefaultNested:c,showLastNestedButton:a}})();window.QuestionHelperModule=QuestionHelperModule;const ArticlePreloadModule=(()=>{const e=async e=>{const t=document.querySelector("[data-final-url]");if(!t)return!0;const n=t.attributes["data-final-url"];if(!n)return!0;const r=n.value;if(!r)return!0;const o=new URL(r);if(o.origin==window.location.origin){const t=await fetch(o.pathname),n=await t.text(),r=new DOMParser,i=r.parseFromString(n,"text/html"),s=i.querySelector(".mainArticleContainer");if(s){const e=s.querySelectorAll(".article .content .text a");e&&Array.from(e).forEach(e=>{const t=e?e.href:"";e.href=window.LinkModule.addCurrentParamsToUrl(t)})}e&&document.body.appendChild(e),e&&s&&e.appendChild(s)}};return{init:e}})();window.ArticlePreloadModule=ArticlePreloadModule;const HoneypotValidationModule=(()=>{const e=e=>{try{console.log("selector",e);const n=document.querySelector(e);if(!n)return!1;if(n)return""!==n.value}catch(t){return console.log(t),!1}};return{validate:e}})();window.HoneypotValidationModule=HoneypotValidationModule;const ModalsModule=e=>{if(console.log("ModalsModule::layoutWrapper",e),!e)return{initModals:()=>console.log("initModals can't work with empty layout Wrapper")};const t="active",n="modal-layout-active",r=(r,o=!1)=>{console.log("hideModal",r);const i=r.dataset||{};if(r.classList.remove(t),document.body.classList.remove(n),i.layoutclass&&e.classList.remove(i.layoutclass),o){const e=o().form,t=window.formRedirectLoaderModule(e);t&&t.show(),window.formNewTabRedirect(e),o().call().then(async n=>{
t&&await t.hide(()=>window.formRedirectsModule(e))})}},o=r=>{const o=r.dataset||{};"true"===o.onlyonce&&r.classList.add("disabled"),o.layoutclass&&e.classList.add(o.layoutclass),o.hidedelay&&f(r,o.hidedelay),console.log("showModal",r),r.classList.add(t),document.body.classList.add(n),console.log("document.body.classList",document.body.classList)},i=e=>{const t=[...e.querySelectorAll(".close_modal")];t.map(t=>{t.addEventListener("click",t=>{t.preventDefault(),r(e)})})},s=t=>{const n=o=>{e.contains(o.target)&&!t.contains(o.target)&&t.classList.contains("active")&&(r(t),document.removeEventListener("click",n))};document.addEventListener("click",n)},a=(e,t)=>{t.addEventListener("click",()=>{console.log("initClickModalHandler::modal",e);const r="button"===t.tagName.toLowerCase(),i=t.closest("form"),a=!r||!i||i.checkValidity();!a||document.body.classList.contains(n)||e.classList.contains("disabled")||(o(e),s(e))})},u=(e,t)=>{const n=[...document.querySelectorAll(`[data-modal='${t}']`)];n.map(t=>{a(e,t)})},l=(e,t)=>{const n=[...document.getElementsByClassName(t)];n.map(t=>{a(e,t)})},c=(e,t)=>{let r;const i=()=>{clearTimeout(r),r=setTimeout(()=>{document.body.classList.contains(n)||e.classList.contains("disabled")||(o(e),s(e))},t)};let a;["load","mousedown","keydown","keyup","input"].forEach(e=>{document.addEventListener(e,i,!0)})},d=(t,r)=>{const i=["mouseover","touchstart"],a=[...document.getElementsByClassName(r)];a.map(r=>{i.map(i=>{r.addEventListener(i,r=>{document.body.classList.contains(n)||t.classList.contains("disabled")||e.contains(r.target)||(o(t),s(t))})})})},h=t=>{document.body.addEventListener("click",r=>{console.log("initShowOnAnyClickModals::modal",t),console.log("layoutWrapper",e),document.body.classList.contains(n)||t.classList.contains("disabled")||e.contains(r.target)||(o(t),s(t))})},p=e=>{console.log("initShowOnWindowLeaveModals::modal",e);const t=n=>{n.clientY<50&&null==n.relatedTarget&&"a"!==n.target.nodeName.toLowerCase()&&(o(e),s(e),document.removeEventListener("mouseout",t))};document.addEventListener("mouseout",t)},f=(e,t)=>{if(t&&t>0){setTimeout(()=>{r(e)},t);const n=e.querySelector(".modal_countdown"),o=n.querySelector(".value");let i=Math.round(t/1e3);o.innerHTML=i;const s=setInterval(()=>{0!==i?(i-=1,o.innerHTML=i):clearInterval(s)},1e3)}},m=(t=".modal")=>{const n=[...e.querySelectorAll(t)];console.log("ModalsModule::modals",n),n.map(e=>{const t=e.dataset||{},{trigger:n,handle:o,idledelay:s}=t;console.log("modal::DATASET",t),"click_anywhere"===n&&h(e),"button"===n&&u(e,o),"window_mouse_leave"===n&&p(e),"class_click"===n&&l(e,o),"class_hover"===n&&d(e,o),"on_idle"===n&&c(e,s),i(e);const a=[...e.querySelectorAll("form")];window.HandleLeadFormModule(a,t=>r(e,t),g)})},g=(e,t)=>{let n=window.LeadsModule.getLocalLeadId();return n?window.LeadsModule.updateLead(`/leads/${n}.json`,{authenticity_token:t.value,lead:e}):window.LeadsModule.postData("/leads.json",{authenticity_token:t.value,lead:e})};return{initModals:m}};window.ModalsModule=ModalsModule,window.ClassWatcher=class e{constructor(e,t,n,r){this.targetNode=e,this.classToWatch=t,this.classAddedCallback=n,this.classRemovedCallback=r,this.observer=null,this.lastClassState=e.classList.contains(this.classToWatch),this.init()}init(){this.observer=new MutationObserver(e=>this.mutationCallback(e,this)),this.observe()}observe(){this.observer.observe(this.targetNode,{attributes:!0})}disconnect(){this.observer.disconnect()}mutationCallback(e,t){for(let t of e)if("attributes"===t.type&&"class"===t.attributeName){let e=t.target.classList.contains(this.classToWatch);this.lastClassState!==e&&(this.lastClassState=e,e?this.classAddedCallback():this.classRemovedCallback())}}},document.addEventListener("turbolinks:load",()=>{let e=document.querySelector("body");const t=function(){const e=document.querySelectorAll(".card-items.mobile .lead-form-item"),t=document.querySelectorAll(".card-items.desktop .lead-form-item");new Array(e,t).map(e=>{if(e&&e.length>0){let t=450;e.forEach(e=>{setTimeout(()=>{e.classList+=" visible"},+t),t+=400})}})},n=function(){};let r=new window.ClassWatcher(e,"loaded",t,n)}),document.addEventListener("turbolinks:load",()=>{const e=document.querySelectorAll("input.phone[data-custom-validation-pattern]");window.MaskModule(e,"phone"),Array.from(e).forEach(e=>{if(!e)return!1;if(e.classList.contains("alwaysVisible"))return!1;e.style.display="none";const t=Array.from(e.parentNode.children),n=t.filter(e=>{if(!e)return!1;const t=["first_name","last_name","email"];return e.hasAttribute("name")&&t.includes(e.getAttribute("name"))});n&&0==n.length&&(e.style.display="block"),n.map(t=>{if(!t)return!1;t.addEventListener("input",function(){const t=n.map(e=>e.value&&"string"==typeof e.value&&e.value.length>0);t.every(e=>1==e)&&(e.style.display="block")})})})}),document.addEventListener("turbolinks:load",()=>{function e(t){t.stopPropagation(),n.style.display="none",n.removeEventListener("click",e)}function t(i){if(i.clientY<50&&null==i.relatedTarget&&"a"!==i.target.nodeName.toLowerCase()){document.removeEventListener("mouseout",t),n.style.display="block",r.addEventListener("click",e),o&&o.addEventListener("click",e);let s=n.querySelector(".counter .value").innerHTML;const a=setInterval(()=>{0!=+s?(n.querySelector(".counter .value").innerHTML=+s-1,s=n.querySelector(".counter .value").innerHTML):(clearInterval(a),e(i))},1e3)}}const n=document.getElementById("exit_popup");if(!n)return!1;const r=n.querySelector(".popup-overlay"),o=n.querySelector(".close"),i=document.querySelectorAll("#exit_popup a");document.body.appendChild(n),n&&(console.log("beforeshow"),document.addEventListener("mouseout",t)),Array.from(i).forEach(e=>{const t=e.href;e.href=window.LinkModule.addCurrentParamsToUrl(t)})}),document.addEventListener("turbolinks:load",function(){const e=[...document.querySelectorAll(".accordion-item")];e.map(e=>{e.addEventListener("click",function(e){var t=e.currentTarget,n=t.querySelector(".accordion-title"),r=t.querySelector(".accordion-inner");n.classList.toggle("active"),"block"===r.style.display?r.style.display="none":r.style.display="block"})})}),document.addEventListener("turbolinks:load",()=>{const e=document.querySelector(".backLink"),t=!!e&&e.getAttribute("backlink");t&&window.BrowserNavBehaviorModule.setBackBtnLink(t)}),document.addEventListener("turbolinks:load",()=>{const e=()=>{const e=document.querySelector(".lander-item.active"),t=e?e.getAttribute("data-id"):null;t&&window.LeadsModule.trackQuestionRender(t)},t=window.location.hostname,n=!1,r=window.LanderInfoModule.getLanderId(),o=document.getElementById("lander");if(!o)return;const i=window.LanderInfoModule.getTemplateType(),s=[window.LanderInfoModule.TEMPLATE_TYPES.QUESTIONS_ON_FORM,window.LanderInfoModule.TEMPLATE_TYPES.CLICK].includes(window.LanderInfoModule.getTemplateType()),[a,u]=window.LanderInfoModule.getFormBlocksToSwitch(i),l=document.getElementsByClassName("lander-item").length,c=document.querySelector(".lander_pages-show"),d=document.querySelectorAll("#form"),h=async e=>{await window.FormsModule.runSubmitEvents(e)},p=async(e,o)=>{e&&localStorage.setItem("local_lead_id",e.id);const i=e.email?e.email:"",a=document.querySelector(".questions-wrapper");a&&a.querySelectorAll("form").forEach(t=>{t&&window.FormsModule.prefillData(t,e)}),window.FormsModule.trackAfterSubmit({landerId:r,email:i,domain:t,isDomainTrackable:n});const u=window.formRedirectLoaderModule(o,s);if(u)return window.formRedirectsModule(o);const c=o.getAttribute("redirect_link");!c.length>0&&!l&&(window.location.pathname="/congratulations")},f=(t,n)=>{if(window.HoneypotValidationModule.validate("#lead_real_name"))return window.location.replace("/get_my_reward"),!1;const[o,i,a,l,d,f,m,g,y,v]=window.FormsModule.getFormFields(n);l&&(IMask(l,{mask:"000-000-0000"}),l.classList.contains("alwaysVisible")||(l.style.display="none")),l&&!l.classList.contains("alwaysVisible")&&(""!=o.value&&""!=i.value&&""!=a.value?null===l||(l.style.display="block"):null===l||(l.style.display="none"));const w=document.querySelectorAll("input");if(l&&!l.classList.contains("alwaysVisible"))for(let e=0;e<w.length;e++)w[e].addEventListener("input",function(){""!=o.value&&""!=i.value&&""!=a.value?null===l||(l.style.display="block"):null===l||(l.style.display="none")});t.preventDefault();let b=l?l.value:undefined,k=m?m.value:undefined,S=g?g.value:undefined,_=v?v.value:undefined;const E=()=>{const e={trusted_id:_,leadid_token:S,first_name:(o||{}).value,last_name:(i||{}).value,email:(a||{}).value,phone:b,zip:k,lander_id:r,address:d?d.value:null,birth:f?f.value:null},t=document.querySelectorAll("[data-skip-param]");t.length>0&&[...t].map(t=>{const n=t.getAttribute("data-skip-param");if(t.classList.contains("active")){const e=t.nextSibling;e&&e.classList.add("active")}e[n]&&t.remove(),window.trackCurrentQuestion()})},A=window.formRedirectLoaderModule(n,s);A&&A.show(),window.formNewTabRedirect(n),window.LeadsModule.postData("/leads",{authenticity_token:y.value,lead:{trusted_id:_,leadid_token:S,first_name:(o||{}).value,last_name:(i||{}).value,email:(a||{}).value,address:d?d.value:null,phone:b,zip:k,lander_id:r,birth:f?f.value:null}}).then(async e=>h(()=>p(e,n))),E();const C=document.querySelector(".questions-wrapper"),L=C&&C.getAttribute("data-chain-id");L&&window.LeadsModule.trackChainRender(L),s||c&&(c.className+=" submitted"),u&&(u.style.display="block",setTimeout(()=>{u.className+=" visible",window.prepopulateTemplatesModule(u,{userFirstName:o.value,userLastName:i.value,userEmail:a.value,userPhone:l?l.value:undefined}),window.initChat&&window.initChat()},0));const M=document.querySelector(".chain-screen");M&&(M.style.display="block"),window.scrollTo(0,0),e()},m=e=>{e.addEventListener("submit",t=>f(t,e),!1)};d.forEach(m);const g=window.ChainHelperModule.currentActiveQuestionId(),y=window.ChainHelperModule.nextQuestionId();window.TreeChainModule.handleTreeLoading(window.TreeChainModule.requestTreeForQuestion(g)),window.TreeChainModule.handleTreeLoading(window.TreeChainModule.requestNestedTreeForQuestion(g)),window.TreeChainModule.handleTreeLoading(window.TreeChainModule.requestTreeForQuestion(y)),window.TreeChainModule.handleTreeLoading(window.TreeChainModule.requestNestedTreeForQuestion(y)),window.MaskModule(document.querySelectorAll("input.date[data-custom-validation-pattern]"),"DOB"),document.querySelector("#lander")&&(window.prepopulateTemplatesModule(document.querySelector("#lander"),{},"h1, h2, h3, p, a"),window.prepopulateLocationModule(document.querySelector("body")))}),window.scrollToAnchor=(e=>{e.preventDefault(),window.scrollTo(0,e.target.getAttribute("href"))}),document.addEventListener("turbolinks:load",()=>{const e="{{ad_middle}}",t="{{ad_middle_second}}",n="{{ad_middle_third}}",r="{{ad_middle_fourth}}",o=document.querySelector(".ad-middle-orig"),i=document.querySelector(".ad-middle-orig-second"),s=document.querySelector(".ad-middle-orig-third"),a=document.querySelector(".ad-middle-orig-fourth"),u=(e,t)=>{const n=document.querySelectorAll(".text p");n.forEach(n=>(n.innerText&&n.innerText.includes(e)&&(n.innerHTML=n.innerHTML.replace(e,t.innerHTML)),n)),t.parentNode.removeChild(t)};o&&u(e,o),i&&u(t,i),s&&u(n,s),a&&u(r,a);const l=()=>{const e=[...document.querySelectorAll(".article a")];window.LinkModule.handleDoubleLinks(e,!1)},c=document.querySelector(".mainArticleContainer");if(c){const e=c.getAttribute("chain_url");e.length>0&&c.addEventListener("click",t=>{t.preventDefault();const n=t.target.closest("a"),r=n?n.getAttribute("href"):undefined;r&&window.location.replace(window.LinkModule.addCurrentParamsToUrl(`${e}?redirect_url=${r}`))})}!document.querySelector(".skip_prepopulation")&&document.querySelector(".mainArticleContainer")&&window.prepopulateTemplatesModule(document.querySelector(".mainArticleContainer"),{},".content"),window.prepopulateTemplatesModule(document.querySelector(".modal-layout"),{},".modal").then(()=>{const e=document.querySelector(".modal-layout");window.ModalsModule(e).initModals()}),l(),window.prepopulateLocationModule(document.querySelector("body"))}),document.addEventListener("turbolinks:load",()=>{const e=5e3,t=document.querySelector("body.question_chains"),n=document.querySelectorAll(".progress-bar"),r=document.querySelectorAll(".bar-status"),o=document.querySelectorAll(".current-step"),i=document.querySelectorAll(".progress-percent"),s=document.querySelectorAll(".chain .questions-wrapper .lander-item").length;let a=1;const u=new URLSearchParams(window.location.search),l=u.get("redirect_url");l&&window.open(l),window.trackCurrentQuestion=(()=>{const e=document.querySelector(".lander-item.active"),t=e?e.getAttribute("data-id"):null;t&&window.LeadsModule.trackQuestionRender(t)});const c=()=>{const e=1280,t=window.innerWidth>e?e:100,n=window.innerWidth<768,r=465,o=document.querySelector(".lander-item"),i=o?o.offsetWidth:0;switch(!0){case window.LanderInfoModule.getTemplateType()==window.LanderInfoModule.TEMPLATE_TYPES.MOMMY:return[n?i:538,"px"];case window.LanderInfoModule.getTemplateType()==window.LanderInfoModule.TEMPLATE_TYPES.QUESTIONS_ON_FORM:case window.LanderInfoModule.getTemplateType()==window.LanderInfoModule.TEMPLATE_TYPES.CLICK:return[n?i:r,"px"];case document.querySelectorAll(".full-screen-slides").length>0:return[100,"vw"];default:return[t,window.innerWidth>e?"px":"vw"]}},[d,h]=c(),p=document.querySelector(".lander-item");if(!p)return!1;p.classList.add("active");const f=window.QuestionSliderModule;f.init({transformStepCount:s,transformStepCurrent:a,transformStepWidth:d,transformStepWidthExt:h,callback:window.ChainHelperModule.startWatchLanderItemsToEnablePush}),r.forEach(e=>{f.setInitProgressBarWidth(e)});let m=document.querySelectorAll(".questions-wrapper form");const g=e=>{const t=document.querySelectorAll("input.phone[data-custom-validation-pattern]"),s=document.querySelectorAll("input.date[data-custom-validation-pattern]"),a=document.querySelectorAll(".questions-wrapper form"),u=[...a].filter(e=>![...m].includes(e));window.HandleLeadFormModule(u,g,v),m=a,window.MaskModule(t,"phone"),window.MaskModule(s,"DOB");const l=document.querySelector("#lander-wrapper"),d=document.querySelector(".form-questions"),h=window.ChainHelperModule.nextQuestionId();h&&window.ArticleQuestionModule.handleArticleLoading(h),window.TreeChainModule.handleTreeLoading(window.TreeChainModule.requestTreeForQuestion(h)),window.TreeChainModule.handleTreeLoading(window.TreeChainModule.requestNestedTreeForQuestion(h)),window.prepopulateAnswerHistoryModule(document.querySelector("body")),window.filterAnswersByVisibilityRulesModule(document.querySelector("body"));const p=window.ChainHelperModule.getFinalUrl(),y=l||d;if(y){const[t,s]=c();f.updateStepSize(t,s);let a=document.querySelectorAll(".chain .main-chain .lander-item").length,u=document.querySelectorAll(".chain-in-lander-container .main-chain .lander-item").length,l=0==a?u:a;f.updateStepTotalCount(l);const d=()=>f.nextQuestion(r,n,y,p,o,i);if(e){const t=window.formRedirectLoaderModule(e().form);t&&t.show(),e().form&&window.formNewTabRedirect(e().form),e().call().then(async n=>{window.trackCurrentQuestion(),n&&localStorage.setItem("local_lead_id",n.id);const r=e().form;if(r){const e=r.closest(".questionEl");let n;if(_(r,null,"questionEl")){let n=q(e)&&M(e)&&T(e);if(n&&d(),t){const e=n&&window.formRedirectsModule(r);await t.hide(e)}}else{const e=r.querySelector(".form-submit");e&&e.classList.add("answered"),t&&await t.hide(()=>window.formRedirectsModule(r))}}else d()})}else d(),window.trackCurrentQuestion();window.initCarSelect&&window.initCarSelect(),window.initSearchSelects&&window.initSearchSelects()}},y=e=>{const t="; "+document.cookie,n=t.split("; "+e+"=");if(2==n.length)return n.pop().split(";").shift()},v=(e,t)=>{let n=window.LeadsModule.getLocalLeadId();return n?window.LeadsModule.updateLead(`/leads/${n}.json`,{authenticity_token:t.value,lead:e}):window.LeadsModule.postData("/leads.json",{authenticity_token:t.value,click_id:y("click_id"),lead:e})},w=document.querySelectorAll(".questions-wrapper form");window.HandleLeadFormModule(w,g,v);const b=(e,t=[])=>t.reduce((t,n)=>t||!!e&&e.className.includes(n),!1),k=(e,t)=>{if(!e)return!0;if(!e.target)return!0;const n=e.target.closest(`.${t}`);if(!n)return undefined;const r=n.nextElementSibling,o=b(r,[t,"nested-questions"]);return!r||!o},S=(e,t)=>{if(!e)return undefined;const n=e.closest(`.${t}`);if(!n)return undefined;const r=n.nextElementSibling,o=b(r,[t,"nested-questions"]);return!r||!o},_=(e,t,n="lander-item")=>{const r=S(e,n);return void 0!==r?r:k(t,n)},E=function(e,t){const n=e.cloneNode(!0);let r=document.body;n.style.height="auto",n.style.position="absolute",t&&document.querySelector(t)&&(r=document.querySelector(t)),r.appendChild(n);const o=n.offsetHeight;return n.remove(),o},A=function(e,t){const n=e&&e.querySelector(".chat-scoll"),r=E(t,".chat-area");n.style.height||(n.style.height=n.offsetHeight+"px"),n.style.height=parseInt(n.style.height)+r+"px"};window.recalculateChatHeight=A;const C=(e,t)=>{const n=e.dataset.answertime;n&&setTimeout(()=>{e.className.includes("answered")||t.classList.add("userInactive")},n)};window.handleAnswerTime=C,window.chatNextYes=function(t,n,r){const o=r||n.target.closest(".questionEl"),i=n.target.getAttribute("answer_id")||n.answer_id,s=n.target.getAttribute("question_id")||n.question_id,a=o?o.closest(".cl-chat"):n.target.closest(".cl-chat"),u=o||n.target.closest(".lander-item");o?o.querySelector(".variant").classList.add("active"):n.target.classList.add("active"),u.classList.add("answered"),a.classList.add("isLoading");const l=o&&o.querySelector(".current-value")?o.querySelector(".current-value").innerText.match(/[^\$].*$/)[0]:" ",c=n.numerical||n.entered_value||l||null,d={answer_id:i,question_id:s,entered_value:c},h=window.TreeChainModule.answerTreeNode(i);h&&window.TreeChainModule.insertAfterQuestion(o,h,".question-wrapper.lander-item.hidden");const p=(new Date).getTime();window.LeadsModule.postData("/clicks",{answer_click:d}).then(()=>{if(_(o,n)){let e=window.ChainHelperModule.getFinalUrl();e&&(localStorage.removeItem("chatUI"),localStorage.removeItem("savedUser"),window.LinkModule.performRedirect(window.LinkModule.addCurrentParamsToUrl(e),!1))}else{const t=u.nextElementSibling;setTimeout(()=>{A(a,t),t.classList.remove("hidden"),C(t,a),a.classList.remove("isLoading")},Math.max(e,(new Date).getTime()-p));const n=JSON.parse(localStorage.getItem("chatUI"))||{};localStorage.setItem("chatUI",JSON.stringify({...n,[d.question_id]:d}))}t&&window.LinkModule.performRedirect(window.LinkModule.addCurrentParamsToUrl(t),!0)})},window.chatNextNo=function(t,n,r){const o=r||n.target.closest(".questionEl"),i=n.target.getAttribute("answer_id"),s=n.target.getAttribute("question_id"),a=o?o.closest(".cl-chat"):n.target.closest(".cl-chat"),u=o||n.target.closest(".lander-item");o?o.querySelector(".variant").classList.add("active"):n.target.classList.add("active"),u.classList.add("answered"),a.classList.add("isLoading");const l={answer_id:i,question_id:s},c=window.TreeChainModule.answerTreeNode(i);c&&window.TreeChainModule.insertAfterQuestion(o,c,".question-wrapper.lander-item.hidden");const d=(new Date).getTime();window.LeadsModule.postData("/clicks",{answer_click:l}).then(()=>{if(_(o,n)){let e=window.ChainHelperModule.getFinalUrl();e&&(localStorage.removeItem("chatUI"),localStorage.removeItem("savedUser"),window.LinkModule.performRedirect(window.LinkModule.addCurrentParamsToUrl(e),!1))}else{const t=u.nextElementSibling;setTimeout(()=>{A(a,t),t.classList.remove("hidden"),C(t,a),a.classList.remove("isLoading")},Math.max(e,(new Date).getTime()-d));const n=JSON.parse(localStorage.getItem("chatUI"))||{};localStorage.setItem("chatUI",JSON.stringify({...n,[l.question_id]:l}))}t&&window.LinkModule.performRedirect(window.LinkModule.addCurrentParamsToUrl(t),!0)})};const L=e=>e.offsetParent,M=e=>{let t=!0;const n=e.closest(".lander-item"),r=e.querySelector(".openEndedInput"),o=[...n.querySelectorAll(".nested-questions .openEndedInput")],i=n.querySelector(".chain-content .openEndedInput");return t=o.reduce((e,t)=>(t!==r&&L(t)&&(e=e&&window.handleOpenEndedSend(null,t)),e),!0),i&&r!==i&&(t=t&&window.handleOpenEndedSend(null,i)),t},T=e=>{let t=!0;const n=e.closest(".lander-item"),r=e.querySelector(".questionLeadForm"),o=[...n.querySelectorAll(".nested-questions .questionLeadForm")],i=n.querySelector(".chain-content .questionLeadForm"),s=e=>{const t=e.reportValidity();if(t){const t=e.querySelector(".form-submit");t.click()}return t};return t=o.reduce((e,t)=>(t!==r&&L(t)&&(e=e&&s(t)),e),!0),i&&r!==i&&(t=t&&s(i)),t},q=e=>{let t=!0;const n=e.closest(".lander-item"),r=n.querySelector(".chain-content"),o=e.classList.contains("required_element")?e:e.closest(".required_element"),i=[...n.querySelectorAll(".nested-questions .required_element")];console.log("handleNestedRequired ::currentEl",e),console.log("handleNestedRequired ::rootElement",r),console.log("handleNestedRequired ::currentRequired",o),console.log("requiredElements",i);const s=e=>{const t=window.ErrorsModule(e),n=[...e.querySelectorAll("[required]")];let r=!!e.querySelector(".answered")||e.classList.contains("answered");const o=e=>(e&&L(e)&&(r=e.reportValidity()),r);return n.length>0&&(r=!0,r=n.reduce((e,t)=>e=e&&o(t),r)),r?t.hideMessages():t.showMessage("question-title","* you should answer the question to continue"),r};if(t=i.reduce((e,t)=>(t!==o&&L(t)&&(e=e&&s(t)),e),!0),r&&![e,o].includes(r)){const e=r.closest(".required_element");e&&(t=t&&s(r))}return t},x=(e,t,n)=>{const r=_(e,t,"questionEl"),o=!e.closest(".nested-questions");return!n&&(o||r)},P=(e,t,n,r=null)=>{r&&r.classList.remove("isLoading"),window.ArticleQuestionModule.embedCallback(t),n&&g(),window.QuestionSliderModule.toggleLoading(!1,e)},R=async(e,t,n,r,o)=>{window.QuestionHelperModule.triggerPopUp(e);let i=!0;const s=window.QuestionHelperModule,a=n||t.target.closest(".questionEl"),u=document.querySelector(".questions-wrapper");window.QuestionSliderModule.toggleLoading(!0,a),u&&u.classList.add("isLoading"),s.handleLeadToken(a);const l=s.getLeadData(t,a);await s.handleSubmitRedirect(r,l),s.insertTreeNode(a,l.answer_id);const c=await window.QuestionsResultsStoreModule();await c.init(()=>{}),await c.saveAnswer(l.question_id,l.entered_value);const d=s.getQuestionDefaultNested(l.question_id)||s.handleNestedQuestions(l.answer_id,a),h=_(a,t,"lander-item"),p=x(a,t,d);p&&(s.removeNextSiblings(a,l.question_id,l.answer_id),i=q(a)&&M(a)&&T(a)),i?(s.markAsAnswered(n||t.target),window.ErrorsModule(a).hideMessages(),window.LeadsModule.postData("/clicks",{answer_click:l}).then(()=>{h&&P(a,o,p,u)}),h||P(a,o,p,u)):window.QuestionSliderModule.toggleLoading(!1,a),window.QuestionHelperModule.showLastNestedButton();const f=window.gcb&&window.gcb.onQuestionRender;console.log("leadData.question_id",l.question_id),f&&f(l.question_id)};window.nextNo=function(e,t,n,r){R(e,t,n,r,!1)},window.nextYes=function(e,t,n,r){R(e,t,n,r,!0)},window.handleAnswerSelect=function(e,t,n){console.log(e,t,n);const r=0===t?1:t-1,o=e[r],i=n.nextElementSibling,s=o.is_correct,a=n.closest(".questionEl");a.classList.remove("answered");const u={selectedText:o.text,target:{getAttribute:e=>"answer_id"===e?o.id:o[e]}},l=n.closest(".cl-chat");if(i&&L(i)){const e=i.cloneNode(!0);i.parentNode.replaceChild(e,i),e.addEventListener("click",()=>{l?s?window.chatNextYes(o.redirect_link,u,a):window.chatNextNo(o.redirect_link,u,a):s?window.nextYes(o.redirect_link,u,a):window.nextNo(o.redirect_link,u,a)})}else l?s?window.chatNextYes(o.redirect_link,u,a):window.chatNextNo(o.redirect_link,u,a):s?window.nextYes(o.redirect_link,u,a):window.nextNo(o.redirect_link,u,a)},window.handleInsuranceSelect=function(e){const t=e.target,n=t.closest(".questionEl"),r=n.querySelector("button.variant");n.classList.remove("answered");const o=n.closest(".cl-chat"),i=()=>{if(t.reportValidity()){const e=t.value,r={entered_value:e,target:{getAttribute:e=>{t.getAttribute(e)}},question_id:t.getAttribute("question_id")};o?window.chatNextYes("",r,n):window.nextYes("",r,n)}};if(r&&L(r)){const e=r.cloneNode(!0);r.parentNode.replaceChild(e,r),e.addEventListener("click",()=>{i()})}else i()},window.handleCarResponse=function(e,t){const n=e.target,r=n.closest(".questionEl"),o=r.closest(".cl-chat"),i=()=>{const e={entered_value:t,target:{getAttribute:e=>{n.getAttribute(e)}},question_id:n.getAttribute("question_id")};o?window.chatNextYes("",e,r):window.nextYes("",e,r)};i()},window.handleCarSelect=function(e){const t=e.target,n=t.closest(".questionEl"),r=n.querySelector(".makes_select"),o=n.querySelector("button.variant");n.classList.remove("answered");const i=n.closest(".cl-chat"),s=()=>{if(r.reportValidity()&&t.reportValidity()){const e=r.selectedOptions[0].text+" "+t.selectedOptions[0].text,o={entered_value:e,target:{getAttribute:e=>{t.getAttribute(e)}},question_id:t.getAttribute("question_id")};i?window.chatNextYes("",o,n):window.nextYes("",o,n)}};if(o&&L(o)){const e=o.cloneNode(!0);o.parentNode.replaceChild(e,o),e.addEventListener("click",()=>{s()})}else s()},window.handleOpenEndedSend=function(e,t=null){const n=(e,t)=>{const n=[...e.querySelectorAll(".answer")],r=n.find(e=>""===e.dataset.text),o=n.find(e=>{const n=e.dataset;if(n.text&&t.value.toLowerCase().includes(n.text.toLowerCase()))return e});return o||r},r=(e||{}).target,o=r?r.parentNode.querySelector(".answer.input"):t;if(o.reportValidity()){const e=o.closest(".cl-chat"),t=o.closest(".questionEl"),r=(n(t,o)||{}).dataset||{},{answerId:i,newTabRedirect:s,redirect:a,isCorrect:u}=r,l={entered_value:o.value,target:{getAttribute:e=>{o.getAttribute(e)}},question_id:o.getAttribute("question_id"),answer_id:i};let c=e?window.chatNextYes:window.nextYes;return i?(c=e?u?window.chatNextYes:window.chatNextNo:u?window.nextYes:window.nextNo)(s,l,t,a):c(null,l,t),!0}return!1},window.handleRangeChanged=function(e,t,n){const r=e[t],o=n.parentNode.nextElementSibling,i=o.cloneNode(!0);o.parentNode.replaceChild(i,o),n.closest(".questionEl").classList.remove("answered");const s={target:{getAttribute:e=>"answer_id"===e?r.id:r[e]}},a=n.closest(".questionEl"),u=n.closest(".cl-chat");i.addEventListener("click",()=>{u?window.chatNextYes(r.redirect_link,s,a):window.nextYes(r.redirect_link,s,a)})},window.handleNumericalRangeChanged=function(e,t,n){const r=n.parentNode.nextElementSibling,o=r.cloneNode(!0);r.parentNode.replaceChild(o,r);const i=n.closest(".questionEl");i.classList.remove("answered");const s=i.querySelector(".current-value");s.innerText="$"+t;const a={entered_value:t,target:{getAttribute:e=>{o.getAttribute(e)}},numerical:o.getAttribute("numerical"),question_id:o.getAttribute("question_id"),answer_id:o.getAttribute("answer_id")},u=n.closest(".cl-chat");o.addEventListener("click",()=>{u?window.chatNextYes("",a,i):window.nextYes("",a,i)})},window.skipQuestion=function(){g()},t&&window.trackCurrentQuestion(),window.ChainHelperModule.enablePush(document.querySelector(".lander-item.active"));const F=window.ChainHelperModule.currentActiveQuestionId(),D=window.ChainHelperModule.nextQuestionId();window.ArticleQuestionModule.handleArticleLoading(F),window.TreeChainModule.handleTreeLoading(window.TreeChainModule.requestTreeForQuestion(F)),window.TreeChainModule.handleTreeLoading(window.TreeChainModule.requestNestedTreeForQuestion(F)),window.TreeChainModule.handleTreeLoading(window.TreeChainModule.requestTreeForQuestion(D)),window.TreeChainModule.handleTreeLoading(window.TreeChainModule.requestNestedTreeForQuestion(D)),setTimeout(()=>window.ChainHelperModule.fillAllLeadIdInputs(),1e3),document.querySelector(".skip_prepopulation")||window.prepopulateTemplatesModule(document.querySelector(".prepopulated-area")),window.prepopulateTemplatesModule(document.querySelector("body"),{},".chain-header"),window.prepopulateTemplatesModule(document.querySelector("body"),{},".loader-text "),window.prepopulateLocationModule(document.querySelector("body")),window.prepopulateAnswerHistoryModule(document.querySelector("body")),window.filterAnswersByVisibilityRulesModule(document.querySelector("body")),window.MaskModule(document.querySelectorAll("input.date[data-custom-validation-pattern]"),"DOB"),window.MaskModule(document.querySelectorAll('input[name="zip"][data-custom-validation-pattern]'),"zip"),window.QuestionHelperModule.showLastNestedButton()}),document.addEventListener("turbolinks:load",()=>{window.scrollTo(0,0);const e=document.querySelectorAll(".pages tbody a");Array.from(e).forEach(e=>{const t=e.href;e.href=window.LinkModule.addCurrentParamsToUrl(t)}),document.querySelector(".skip_prepopulation")||window.prepopulateTemplatesModule(document.querySelector(".pages"),{},".container")}),document.addEventListener("turbolinks:load",()=>{const e=e=>{const r=n(e);if(t(),r&&o(e,r),!r){const t=e.querySelectorAll(".questionEl")[0];i(e,t,3e3,!0)}},t=()=>{const e=JSON.parse(localStorage.getItem("chatUI"))||{},t=Object.keys(e),n=document.querySelectorAll(".chain > #lander-wrapper .chat-scoll .lander-item"),r=[...n].map(e=>e.getAttribute("data-questionid")),o=t.filter(e=>!r.includes(e)),i=o.map(e=>{const t=document.querySelector(`[data-questionid='${e}']`);if(t)return t.closest(".tree-chain")});i.forEach(e=>{const t=document.querySelectorAll(".chain > #lander-wrapper .chat-scoll .lander-item.answered"),n=t.item(t.length-1);window.TreeChainModule.insertAfterQuestion(n,e,".question-wrapper.lander-item.hidden")})},n=e=>{let t=!1;const n=JSON.parse(localStorage.getItem("chatUI"))||{},r=Object.keys(n);return r.length>0&&r.map(r=>{const{answer_id:o,entered_value:s}=n[r],a=document.querySelector(`[data-questionid='${r}']`);if(a){if(t=a,i(e,a,0),a.classList.add("answered"),o){const e=a.querySelector(`.variant[data-answerid='${o}']`),t=a.querySelector(`label[data-answerid='${o}']`),n=a.querySelector("select");if(e&&e.classList.add("active"),n&&(n.value=o),t){const e=a.querySelector(".rangeInputItem");e&&(e.value=t.dataset.val)}if(n||t){const e=a.querySelector(".variant");e&&e.classList.add("active")}}if(s){const e=a.querySelector(".rangeInputItem"),t=a.querySelector(".current-value"),n=a.querySelector(".openEndedInput"),r=a.querySelector(".variant");e&&(e.value=s),n&&(n.value=s),t&&(t.innerText=`$${s}`),r&&r.classList.add("active")}}}),t},r=e=>{const t=document.querySelector("#startChat"),n=document.querySelector("#chatPlaceholder");t&&t.classList.add("hidden"),n&&n.classList.add("hidden"),e.classList.add("active")},o=async(e,t)=>{const n=document.createElement("div");n.className="question-wrapper disabled hidden",n.innerHTML='<div class="message">Welcome back!</div>',t.parentNode.insertBefore(n,t.nextSibling),await i(e,n),setTimeout(()=>i(e,n.nextSibling,5e3,!0),2e3)},i=(e,t,n=3e3,r=!1)=>(n>0&&e.classList.add("isLoading"),new Promise(o=>{setTimeout(()=>{n>0&&e.classList.remove("isLoading"),window.recalculateChatHeight(e,t),t.classList.remove("hidden"),r&&window.handleAnswerTime(t,e),o()},n)})),s=()=>{const t=document.querySelector(".cl-chat");if(!t)return!1;r(t),t.classList.add("isLoading"),e(t)},a=()=>{const e=[...document.querySelectorAll(".rangeInputItem")];e.map(e=>e.oninput())};a(),document.querySelector(".cl-chat")&&s()}),document.addEventListener("turbolinks:load",async()=>{const e=".loader",t=async()=>{const e=e=>{const t=new RegExp("ip=([0-9.]*)","g"),n=t.exec(e)||{};return n[1]},t="https://www.cloudflare.com/cdn-cgi/trace",n=await fetch(t,{method:"GET",headers:{"Content-Type":"text/plain"}});return e(await n.text())},n=async e=>{const t=`https://api.ipstack.com/${e}?access_key=7f6d9154a6086901c437fba4446cd6de`,n=await fetch(t,{method:"GET"});return await n.json()},r=async(e,t)=>{const n=`${window.location.origin}/api/v1/summary_data`,r=JSON.stringify({zip:e}),o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:r}).then(e=>e.json());return await o},o=(e,t)=>{const n=(e,t)=>Object.keys(e).map((n,r)=>{let o=t[r]||i(2);return{label:s(n),backgroundColor:o,data:[Math.round(e[n])]}}),r=["#caf270","#45c490","#008d93","#2e5468","#2196f38c","#f443368c","#3f51b570","#00968896"],o=t.getContext("2d"),a=new Chart(o,{type:"bar",data:{labels:["$ amt / year"],datasets:n(e,r)},options:{tooltips:{displayColors:!0,callbacks:{mode:"x"}},scales:{xAxes:[{stacked:!1,gridLines:{display:!1}}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0},type:"linear"}]},responsive:!0,maintainAspectRatio:!1,legend:{position:"bottom"}}})},i=e=>{var t=[256*Math.random(),256*Math.random(),256*Math.random()],n=[51*e,51*e,51*e],r;return"rgb("+[t[0]+n[0],t[1]+n[1],t[2]+n[2]].map(e=>Math.round(e/2)).join(",")+")"},s=e=>(e=e.replace(/[_\s]+/g," ")).charAt(0).toUpperCase()+e.slice(1),a=(t,n)=>{const r=n.parentNode.querySelector(e);"loading"===t?(r.classList.add("active"),n.style.display="none"):(r.classList.remove("active"),n.style.display="block")
},u=async e=>{const i=document.querySelector(e);if(i){a("loading",i);const e=await t(),s=await n(e),u=await r(s.zip);a(!1,i),o(u.expenditure,i)}};window.loadExpenditureChart=u}),document.addEventListener("turbolinks:load",async()=>{const e=document.querySelectorAll("[data-editable]");if(0===e.length)return;const t=()=>new Promise(e=>{setTimeout(()=>{const t=document.createElement("script");t.setAttribute("src","https://cdn.jsdelivr.net/npm/sweetalert2@10"),document.head.appendChild(t),e()},1e3)});await t(),e.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const n=e.nextElementSibling,r=n.textContent,o=e.getAttribute("data-editable");window.swal.fire({title:"Change Text",html:"<textarea id='edit-text' rows=5>"+r+"</textarea>",animation:"slide-from-top",confirmButtonText:"Save",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0}).then(({isConfirmed:e})=>{if(!e)return;let t=document.querySelector("#edit-text"),i=t?t.value:r,s;if(((e,t)=>e!==t)(i,r)){const e="/static_texts.json";fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:i,key:o})}).then(()=>(n.textContent=i,window.swal.fire("Success","","success")))["catch"](e=>(console.error(e),window.swal.fire("Something went wrong",e,"error")))}else window.swal.close()})},!1)})}),document.addEventListener("turbolinks:load",async()=>{const e=document.querySelectorAll("[data-editable-image]");if(0===e.length)return;const t=(e,t)=>new Promise(function(n,r){var o=new FormData;o.append("image",e),o.append("replacement_key",t);var i=new XMLHttpRequest;i.open("POST","/api/v1/images",!0),i.onload=function(){if(200===i.status){var e=JSON.parse(i.responseText).url,o;n({url:e,replacement_key:t||"test"})}else alert("Upload error"),r("error")},i.send(o)}),n=()=>new Promise(e=>{setTimeout(()=>{const t=document.createElement("script");t.setAttribute("src","https://cdn.jsdelivr.net/npm/sweetalert2@10"),document.head.appendChild(t),e()},1e3)});window.swal||await n(),e.forEach(e=>{e.addEventListener("click",n=>{n.preventDefault();const r=e.getAttribute("key");window.swal.fire({title:"Select image",input:"file",inputAttributes:{accept:"image/*","aria-label":"Upload your profile picture"},animation:"slide-from-top",confirmButtonText:"Save",showCancelButton:!0,showLoaderOnConfirm:!0}).then(({isConfirmed:n,value:o})=>{if(n)if(o){const n=new FileReader;n.onload=(n=>{window.swal.fire({title:"Loading"}),window.swal.showLoading(),t(o,r).then(t=>{window.swal.fire({title:"Your uploaded picture",imageUrl:n.target.result,imageAlt:"The uploaded picture"}),e.setAttribute("src",t.url)})}),n.readAsDataURL(o)}else window.swal.close()})},!1)})}),document.addEventListener("turbolinks:load",()=>{const e=()=>{const e=[...document.querySelectorAll(".lander-item a")];window.LinkModule.handleDoubleLinks(e,!1)};e()}),document.addEventListener("turbolinks:load",()=>{const e=()=>{const e=[...document.querySelectorAll(".qc-question a.image")];window.LinkModule.handleDoubleLinks(e,!1)};e()});